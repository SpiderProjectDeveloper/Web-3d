!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){self,t.exports=(()=>{"use strict";var t={887:(t,e,n)=>{n.r(e),n.d(e,{glMatrix:()=>r,mat2:()=>i,mat2d:()=>a,mat3:()=>o,mat4:()=>s,quat:()=>u,quat2:()=>d,vec2:()=>h,vec3:()=>l,vec4:()=>c});var r={};n.r(r),n.d(r,{ARRAY_TYPE:()=>f,EPSILON:()=>A,RANDOM:()=>p,equals:()=>v,setMatrixArrayType:()=>I,toRadian:()=>g});var i={};n.r(i),n.d(i,{LDU:()=>U,add:()=>D,adjoint:()=>S,clone:()=>T,copy:()=>C,create:()=>E,determinant:()=>O,equals:()=>H,exactEquals:()=>V,frob:()=>w,fromRotation:()=>x,fromScaling:()=>B,fromValues:()=>R,identity:()=>b,invert:()=>F,mul:()=>q,multiply:()=>_,multiplyScalar:()=>k,multiplyScalarAndAdd:()=>X,rotate:()=>P,scale:()=>N,set:()=>M,str:()=>L,sub:()=>W,subtract:()=>G,transpose:()=>y});var a={};n.r(a),n.d(a,{add:()=>ct,clone:()=>z,copy:()=>j,create:()=>Q,determinant:()=>$,equals:()=>ft,exactEquals:()=>At,frob:()=>lt,fromRotation:()=>it,fromScaling:()=>at,fromTranslation:()=>ot,fromValues:()=>Y,identity:()=>K,invert:()=>J,mul:()=>pt,multiply:()=>tt,multiplyScalar:()=>dt,multiplyScalarAndAdd:()=>ht,rotate:()=>et,scale:()=>nt,set:()=>Z,str:()=>st,sub:()=>It,subtract:()=>ut,translate:()=>rt});var o={};n.r(o),n.d(o,{add:()=>Ht,adjoint:()=>yt,clone:()=>vt,copy:()=>Et,create:()=>mt,determinant:()=>Ft,equals:()=>Qt,exactEquals:()=>Wt,frob:()=>Vt,fromMat2d:()=>Lt,fromMat4:()=>gt,fromQuat:()=>wt,fromRotation:()=>xt,fromScaling:()=>Bt,fromTranslation:()=>Nt,fromValues:()=>Tt,identity:()=>bt,invert:()=>Mt,mul:()=>zt,multiply:()=>St,multiplyScalar:()=>Xt,multiplyScalarAndAdd:()=>qt,normalFromMat4:()=>Ut,projection:()=>Dt,rotate:()=>_t,scale:()=>Pt,set:()=>Ct,str:()=>Gt,sub:()=>jt,subtract:()=>kt,translate:()=>Ot,transpose:()=>Rt});var s={};n.r(s),n.d(s,{add:()=>Be,adjoint:()=>re,clone:()=>Yt,copy:()=>Zt,create:()=>Kt,determinant:()=>ie,equals:()=>Ge,exactEquals:()=>De,frob:()=>xe,fromQuat:()=>Me,fromQuat2:()=>ve,fromRotation:()=>fe,fromRotationTranslation:()=>ge,fromRotationTranslationScale:()=>be,fromRotationTranslationScaleOrigin:()=>Re,fromScaling:()=>Ae,fromTranslation:()=>he,fromValues:()=>Jt,fromXRotation:()=>pe,fromYRotation:()=>Ie,fromZRotation:()=>me,frustum:()=>ye,getRotation:()=>Ce,getScaling:()=>Te,getTranslation:()=>Ee,identity:()=>te,invert:()=>ne,lookAt:()=>_e,mul:()=>Ve,multiply:()=>ae,multiplyScalar:()=>we,multiplyScalarAndAdd:()=>Ue,ortho:()=>Oe,perspective:()=>Fe,perspectiveFromFieldOfView:()=>Se,rotate:()=>le,rotateX:()=>ce,rotateY:()=>ue,rotateZ:()=>de,scale:()=>se,set:()=>$t,str:()=>Ne,sub:()=>He,subtract:()=>Le,targetTo:()=>Pe,translate:()=>oe,transpose:()=>ee});var l={};n.r(l),n.d(l,{add:()=>je,angle:()=>Rn,bezier:()=>In,ceil:()=>Je,clone:()=>Xe,copy:()=>Qe,create:()=>ke,cross:()=>An,dist:()=>xn,distance:()=>on,div:()=>Nn,divide:()=>Ze,dot:()=>hn,equals:()=>Sn,exactEquals:()=>Fn,floor:()=>$e,forEach:()=>Un,fromValues:()=>We,hermite:()=>pn,inverse:()=>un,len:()=>Ln,length:()=>qe,lerp:()=>fn,max:()=>en,min:()=>tn,mul:()=>Pn,multiply:()=>Ye,negate:()=>cn,normalize:()=>dn,random:()=>mn,rotateX:()=>Tn,rotateY:()=>Cn,rotateZ:()=>bn,round:()=>nn,scale:()=>rn,scaleAndAdd:()=>an,set:()=>ze,sqrDist:()=>Bn,sqrLen:()=>wn,squaredDistance:()=>sn,squaredLength:()=>ln,str:()=>yn,sub:()=>_n,subtract:()=>Ke,transformMat3:()=>vn,transformMat4:()=>gn,transformQuat:()=>En,zero:()=>Mn});var c={};n.r(c),n.d(c,{add:()=>Xn,ceil:()=>zn,clone:()=>Gn,copy:()=>Hn,create:()=>Dn,cross:()=>lr,dist:()=>Er,distance:()=>tr,div:()=>vr,divide:()=>Qn,dot:()=>sr,equals:()=>Ir,exactEquals:()=>pr,floor:()=>jn,forEach:()=>Rr,fromValues:()=>Vn,inverse:()=>ar,len:()=>Cr,length:()=>nr,lerp:()=>cr,max:()=>Yn,min:()=>Kn,mul:()=>gr,multiply:()=>Wn,negate:()=>ir,normalize:()=>or,random:()=>ur,round:()=>Zn,scale:()=>Jn,scaleAndAdd:()=>$n,set:()=>kn,sqrDist:()=>Tr,sqrLen:()=>br,squaredDistance:()=>er,squaredLength:()=>rr,str:()=>fr,sub:()=>mr,subtract:()=>qn,transformMat4:()=>dr,transformQuat:()=>hr,zero:()=>Ar});var u={};n.r(u),n.d(u,{add:()=>Zr,calculateW:()=>xr,clone:()=>zr,conjugate:()=>Ur,copy:()=>Kr,create:()=>Mr,dot:()=>ti,equals:()=>li,exactEquals:()=>si,fromEuler:()=>Gr,fromMat3:()=>Dr,fromValues:()=>jr,getAxisAngle:()=>Sr,identity:()=>yr,invert:()=>wr,len:()=>ri,length:()=>ni,lerp:()=>ei,mul:()=>Jr,multiply:()=>Or,normalize:()=>oi,random:()=>Lr,rotateX:()=>_r,rotateY:()=>Pr,rotateZ:()=>Nr,rotationTo:()=>ci,scale:()=>$r,set:()=>Yr,setAxes:()=>di,setAxisAngle:()=>Fr,slerp:()=>Br,sqlerp:()=>ui,sqrLen:()=>ai,squaredLength:()=>ii,str:()=>Vr});var d={};n.r(d),n.d(d,{add:()=>Li,clone:()=>Ai,conjugate:()=>ki,copy:()=>Ei,create:()=>hi,dot:()=>Gi,equals:()=>Yi,exactEquals:()=>Ki,fromMat4:()=>vi,fromRotation:()=>gi,fromRotationTranslation:()=>Ii,fromRotationTranslationValues:()=>pi,fromTranslation:()=>mi,fromValues:()=>fi,getDual:()=>Ri,getReal:()=>bi,getTranslation:()=>Fi,identity:()=>Ti,invert:()=>Hi,len:()=>qi,length:()=>Xi,lerp:()=>Vi,mul:()=>Ui,multiply:()=>wi,normalize:()=>zi,rotateAroundAxis:()=>Bi,rotateByQuatAppend:()=>Ni,rotateByQuatPrepend:()=>xi,rotateX:()=>Oi,rotateY:()=>_i,rotateZ:()=>Pi,scale:()=>Di,set:()=>Ci,setDual:()=>yi,setReal:()=>Mi,sqrLen:()=>Qi,squaredLength:()=>Wi,str:()=>ji,translate:()=>Si});var h={};n.r(h),n.d(h,{add:()=>na,angle:()=>Oa,ceil:()=>oa,clone:()=>Ji,copy:()=>ta,create:()=>Zi,cross:()=>Ta,dist:()=>Da,distance:()=>Aa,div:()=>Ua,divide:()=>aa,dot:()=>Ea,equals:()=>xa,exactEquals:()=>Na,floor:()=>sa,forEach:()=>Ha,fromValues:()=>$i,inverse:()=>ga,len:()=>Ba,length:()=>pa,lerp:()=>Ca,max:()=>ca,min:()=>la,mul:()=>wa,multiply:()=>ia,negate:()=>ma,normalize:()=>va,random:()=>ba,rotate:()=>Sa,round:()=>ua,scale:()=>da,scaleAndAdd:()=>ha,set:()=>ea,sqrDist:()=>Ga,sqrLen:()=>Va,squaredDistance:()=>fa,squaredLength:()=>Ia,str:()=>Pa,sub:()=>La,subtract:()=>ra,transformMat2:()=>Ra,transformMat2d:()=>Ma,transformMat3:()=>ya,transformMat4:()=>Fa,zero:()=>_a});var A=1e-6,f="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function I(t){f=t}var m=Math.PI/180;function g(t){return t*m}function v(t,e){return Math.abs(t-e)<=A*Math.max(1,Math.abs(t),Math.abs(e))}function E(){var t=new f(4);return f!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function T(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function C(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function b(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function R(t,e,n,r){var i=new f(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function M(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function y(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function F(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*a-i*r;return o?(o=1/o,t[0]=a*o,t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t):null}function S(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function O(t){return t[0]*t[3]-t[2]*t[1]}function _(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*s+a*l,t[1]=i*s+o*l,t[2]=r*c+a*u,t[3]=i*c+o*u,t}function P(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=r*-s+a*l,t[3]=i*-s+o*l,t}function N(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],l=n[1];return t[0]=r*s,t[1]=i*s,t[2]=a*l,t[3]=o*l,t}function x(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function B(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function L(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function w(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function U(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function D(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function G(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function H(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],c=e[3];return Math.abs(n-o)<=A*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=A*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=A*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=A*Math.max(1,Math.abs(a),Math.abs(c))}function k(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function X(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var q=_,W=G;function Q(){var t=new f(6);return f!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function z(t){var e=new f(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function j(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Y(t,e,n,r,i,a){var o=new f(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o}function Z(t,e,n,r,i,a,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t}function J(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=n*a-r*i;return l?(l=1/l,t[0]=a*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-a*o)*l,t[5]=(r*o-n*s)*l,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=n[0],u=n[1],d=n[2],h=n[3],A=n[4],f=n[5];return t[0]=r*c+a*u,t[1]=i*c+o*u,t[2]=r*d+a*h,t[3]=i*d+o*h,t[4]=r*A+a*f+s,t[5]=i*A+o*f+l,t}function et(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*c,t[1]=i*u+o*c,t[2]=r*-c+a*u,t[3]=i*-c+o*u,t[4]=s,t[5]=l,t}function nt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r*c,t[1]=i*c,t[2]=a*u,t[3]=o*u,t[4]=s,t[5]=l,t}function rt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=r*c+a*u+s,t[5]=i*c+o*u+l,t}function it(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function at(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function lt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function dt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function At(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ft(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=e[0],c=e[1],u=e[2],d=e[3],h=e[4],f=e[5];return Math.abs(n-l)<=A*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=A*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=A*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-d)<=A*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-h)<=A*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-f)<=A*Math.max(1,Math.abs(s),Math.abs(f))}var pt=tt,It=ut;function mt(){var t=new f(9);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new f(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Et(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Tt(t,e,n,r,i,a,o,s,l){var c=new f(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=l,c}function Ct(t,e,n,r,i,a,o,s,l,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=c,t}function bt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Rt(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Mt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=u*o-s*c,h=-u*a+s*l,A=c*a-o*l,f=n*d+r*h+i*A;return f?(f=1/f,t[0]=d*f,t[1]=(-u*r+i*c)*f,t[2]=(s*r-i*o)*f,t[3]=h*f,t[4]=(u*n-i*l)*f,t[5]=(-s*n+i*a)*f,t[6]=A*f,t[7]=(-c*n+r*l)*f,t[8]=(o*n-r*a)*f,t):null}function yt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-s*c,t[1]=i*c-r*u,t[2]=r*s-i*o,t[3]=s*l-a*u,t[4]=n*u-i*l,t[5]=i*a-n*s,t[6]=a*c-o*l,t[7]=r*l-n*c,t[8]=n*o-r*a,t}function Ft(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8];return e*(c*a-o*l)+n*(-c*i+o*s)+r*(l*i-a*s)}function St(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],A=n[1],f=n[2],p=n[3],I=n[4],m=n[5],g=n[6],v=n[7],E=n[8];return t[0]=h*r+A*o+f*c,t[1]=h*i+A*s+f*u,t[2]=h*a+A*l+f*d,t[3]=p*r+I*o+m*c,t[4]=p*i+I*s+m*u,t[5]=p*a+I*l+m*d,t[6]=g*r+v*o+E*c,t[7]=g*i+v*s+E*u,t[8]=g*a+v*l+E*d,t}function Ot(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],A=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=h*r+A*o+c,t[7]=h*i+A*s+u,t[8]=h*a+A*l+d,t}function _t(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=Math.sin(n),A=Math.cos(n);return t[0]=A*r+h*o,t[1]=A*i+h*s,t[2]=A*a+h*l,t[3]=A*o-h*r,t[4]=A*s-h*i,t[5]=A*l-h*a,t[6]=c,t[7]=u,t[8]=d,t}function Pt(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Nt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function xt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function wt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,d=r*s,h=i*o,A=i*s,f=i*l,p=a*o,I=a*s,m=a*l;return t[0]=1-d-f,t[3]=u-m,t[6]=h+I,t[1]=u+m,t[4]=1-c-f,t[7]=A-p,t[2]=h-I,t[5]=A+p,t[8]=1-c-d,t}function Ut(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],A=e[11],f=e[12],p=e[13],I=e[14],m=e[15],g=n*s-r*o,v=n*l-i*o,E=n*c-a*o,T=r*l-i*s,C=r*c-a*s,b=i*c-a*l,R=u*p-d*f,M=u*I-h*f,y=u*m-A*f,F=d*I-h*p,S=d*m-A*p,O=h*m-A*I,_=g*O-v*S+E*F+T*y-C*M+b*R;return _?(_=1/_,t[0]=(s*O-l*S+c*F)*_,t[1]=(l*y-o*O-c*M)*_,t[2]=(o*S-s*y+c*R)*_,t[3]=(i*S-r*O-a*F)*_,t[4]=(n*O-i*y+a*M)*_,t[5]=(r*y-n*S-a*R)*_,t[6]=(p*b-I*C+m*T)*_,t[7]=(I*E-f*b-m*v)*_,t[8]=(f*C-p*E+m*g)*_,t):null}function Dt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Gt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Vt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Ht(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function kt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Xt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function qt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Qt(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=e[0],h=e[1],f=e[2],p=e[3],I=e[4],m=e[5],g=e[6],v=e[7],E=e[8];return Math.abs(n-d)<=A*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-h)<=A*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-f)<=A*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-p)<=A*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-I)<=A*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(s-m)<=A*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-g)<=A*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-v)<=A*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(u-E)<=A*Math.max(1,Math.abs(u),Math.abs(E))}var zt=St,jt=kt;function Kt(){var t=new f(16);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Yt(t){var e=new f(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,n,r,i,a,o,s,l,c,u,d,h,A,p,I){var m=new f(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=a,m[6]=o,m[7]=s,m[8]=l,m[9]=c,m[10]=u,m[11]=d,m[12]=h,m[13]=A,m[14]=p,m[15]=I,m}function $t(t,e,n,r,i,a,o,s,l,c,u,d,h,A,f,p,I){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=c,t[9]=u,t[10]=d,t[11]=h,t[12]=A,t[13]=f,t[14]=p,t[15]=I,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],A=e[11],f=e[12],p=e[13],I=e[14],m=e[15],g=n*s-r*o,v=n*l-i*o,E=n*c-a*o,T=r*l-i*s,C=r*c-a*s,b=i*c-a*l,R=u*p-d*f,M=u*I-h*f,y=u*m-A*f,F=d*I-h*p,S=d*m-A*p,O=h*m-A*I,_=g*O-v*S+E*F+T*y-C*M+b*R;return _?(_=1/_,t[0]=(s*O-l*S+c*F)*_,t[1]=(i*S-r*O-a*F)*_,t[2]=(p*b-I*C+m*T)*_,t[3]=(h*C-d*b-A*T)*_,t[4]=(l*y-o*O-c*M)*_,t[5]=(n*O-i*y+a*M)*_,t[6]=(I*E-f*b-m*v)*_,t[7]=(u*b-h*E+A*v)*_,t[8]=(o*S-s*y+c*R)*_,t[9]=(r*y-n*S-a*R)*_,t[10]=(f*C-p*E+m*g)*_,t[11]=(d*E-u*C-A*g)*_,t[12]=(s*M-o*F-l*R)*_,t[13]=(n*F-r*M+i*R)*_,t[14]=(p*v-f*T-I*g)*_,t[15]=(u*T-d*v+h*g)*_,t):null}function re(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],A=e[11],f=e[12],p=e[13],I=e[14],m=e[15];return t[0]=s*(h*m-A*I)-d*(l*m-c*I)+p*(l*A-c*h),t[1]=-(r*(h*m-A*I)-d*(i*m-a*I)+p*(i*A-a*h)),t[2]=r*(l*m-c*I)-s*(i*m-a*I)+p*(i*c-a*l),t[3]=-(r*(l*A-c*h)-s*(i*A-a*h)+d*(i*c-a*l)),t[4]=-(o*(h*m-A*I)-u*(l*m-c*I)+f*(l*A-c*h)),t[5]=n*(h*m-A*I)-u*(i*m-a*I)+f*(i*A-a*h),t[6]=-(n*(l*m-c*I)-o*(i*m-a*I)+f*(i*c-a*l)),t[7]=n*(l*A-c*h)-o*(i*A-a*h)+u*(i*c-a*l),t[8]=o*(d*m-A*p)-u*(s*m-c*p)+f*(s*A-c*d),t[9]=-(n*(d*m-A*p)-u*(r*m-a*p)+f*(r*A-a*d)),t[10]=n*(s*m-c*p)-o*(r*m-a*p)+f*(r*c-a*s),t[11]=-(n*(s*A-c*d)-o*(r*A-a*d)+u*(r*c-a*s)),t[12]=-(o*(d*I-h*p)-u*(s*I-l*p)+f*(s*h-l*d)),t[13]=n*(d*I-h*p)-u*(r*I-i*p)+f*(r*h-i*d),t[14]=-(n*(s*I-l*p)-o*(r*I-i*p)+f*(r*l-i*s)),t[15]=n*(s*h-l*d)-o*(r*h-i*d)+u*(r*l-i*s),t}function ie(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],A=t[12],f=t[13],p=t[14],I=t[15];return(e*o-n*a)*(d*I-h*p)-(e*s-r*a)*(u*I-h*f)+(e*l-i*a)*(u*p-d*f)+(n*s-r*o)*(c*I-h*A)-(n*l-i*o)*(c*p-d*A)+(r*l-i*s)*(c*f-u*A)}function ae(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],A=e[10],f=e[11],p=e[12],I=e[13],m=e[14],g=e[15],v=n[0],E=n[1],T=n[2],C=n[3];return t[0]=v*r+E*s+T*d+C*p,t[1]=v*i+E*l+T*h+C*I,t[2]=v*a+E*c+T*A+C*m,t[3]=v*o+E*u+T*f+C*g,v=n[4],E=n[5],T=n[6],C=n[7],t[4]=v*r+E*s+T*d+C*p,t[5]=v*i+E*l+T*h+C*I,t[6]=v*a+E*c+T*A+C*m,t[7]=v*o+E*u+T*f+C*g,v=n[8],E=n[9],T=n[10],C=n[11],t[8]=v*r+E*s+T*d+C*p,t[9]=v*i+E*l+T*h+C*I,t[10]=v*a+E*c+T*A+C*m,t[11]=v*o+E*u+T*f+C*g,v=n[12],E=n[13],T=n[14],C=n[15],t[12]=v*r+E*s+T*d+C*p,t[13]=v*i+E*l+T*h+C*I,t[14]=v*a+E*c+T*A+C*m,t[15]=v*o+E*u+T*f+C*g,t}function oe(t,e,n){var r,i,a,o,s,l,c,u,d,h,A,f,p=n[0],I=n[1],m=n[2];return e===t?(t[12]=e[0]*p+e[4]*I+e[8]*m+e[12],t[13]=e[1]*p+e[5]*I+e[9]*m+e[13],t[14]=e[2]*p+e[6]*I+e[10]*m+e[14],t[15]=e[3]*p+e[7]*I+e[11]*m+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],A=e[10],f=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=A,t[11]=f,t[12]=r*p+s*I+d*m+e[12],t[13]=i*p+l*I+h*m+e[13],t[14]=a*p+c*I+A*m+e[14],t[15]=o*p+u*I+f*m+e[15]),t}function se(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function le(t,e,n,r){var i,a,o,s,l,c,u,d,h,f,p,I,m,g,v,E,T,C,b,R,M,y,F,S,O=r[0],_=r[1],P=r[2],N=Math.sqrt(O*O+_*_+P*P);return N<A?null:(O*=N=1/N,_*=N,P*=N,i=Math.sin(n),o=1-(a=Math.cos(n)),s=e[0],l=e[1],c=e[2],u=e[3],d=e[4],h=e[5],f=e[6],p=e[7],I=e[8],m=e[9],g=e[10],v=e[11],E=O*O*o+a,T=_*O*o+P*i,C=P*O*o-_*i,b=O*_*o-P*i,R=_*_*o+a,M=P*_*o+O*i,y=O*P*o+_*i,F=_*P*o-O*i,S=P*P*o+a,t[0]=s*E+d*T+I*C,t[1]=l*E+h*T+m*C,t[2]=c*E+f*T+g*C,t[3]=u*E+p*T+v*C,t[4]=s*b+d*R+I*M,t[5]=l*b+h*R+m*M,t[6]=c*b+f*R+g*M,t[7]=u*b+p*R+v*M,t[8]=s*y+d*F+I*S,t[9]=l*y+h*F+m*S,t[10]=c*y+f*F+g*S,t[11]=u*y+p*F+v*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=o*i+u*r,t[6]=s*i+d*r,t[7]=l*i+h*r,t[8]=c*i-a*r,t[9]=u*i-o*r,t[10]=d*i-s*r,t[11]=h*i-l*r,t}function ue(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*r,t[1]=o*i-u*r,t[2]=s*i-d*r,t[3]=l*i-h*r,t[8]=a*r+c*i,t[9]=o*r+u*i,t[10]=s*r+d*i,t[11]=l*r+h*i,t}function de(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=o*i+u*r,t[2]=s*i+d*r,t[3]=l*i+h*r,t[4]=c*i-a*r,t[5]=u*i-o*r,t[6]=d*i-s*r,t[7]=h*i-l*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Ae(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fe(t,e,n){var r,i,a,o=n[0],s=n[1],l=n[2],c=Math.sqrt(o*o+s*s+l*l);return c<A?null:(o*=c=1/c,s*=c,l*=c,r=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+l*r,t[2]=l*o*a-s*r,t[3]=0,t[4]=o*s*a-l*r,t[5]=s*s*a+i,t[6]=l*s*a+o*r,t[7]=0,t[8]=o*l*a+s*r,t[9]=s*l*a-o*r,t[10]=l*l*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pe(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ie(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,c=a+a,u=r*s,d=r*l,h=r*c,A=i*l,f=i*c,p=a*c,I=o*s,m=o*l,g=o*c;return t[0]=1-(A+p),t[1]=d+g,t[2]=h-m,t[3]=0,t[4]=d-g,t[5]=1-(u+p),t[6]=f+I,t[7]=0,t[8]=h+m,t[9]=f-I,t[10]=1-(u+A),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ve(t,e){var n=new f(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=r*r+i*i+a*a+o*o;return d>0?(n[0]=2*(s*o+u*r+l*a-c*i)/d,n[1]=2*(l*o+u*i+c*r-s*a)/d,n[2]=2*(c*o+u*a+s*i-l*r)/d):(n[0]=2*(s*o+u*r+l*a-c*i),n[1]=2*(l*o+u*i+c*r-s*a),n[2]=2*(c*o+u*a+s*i-l*r)),ge(t,e,n),t}function Ee(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Te(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(a*a+o*o+s*s),t[2]=Math.sqrt(l*l+c*c+u*u),t}function Ce(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function be(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,c=a+a,u=o+o,d=i*l,h=i*c,A=i*u,f=a*c,p=a*u,I=o*u,m=s*l,g=s*c,v=s*u,E=r[0],T=r[1],C=r[2];return t[0]=(1-(f+I))*E,t[1]=(h+v)*E,t[2]=(A-g)*E,t[3]=0,t[4]=(h-v)*T,t[5]=(1-(d+I))*T,t[6]=(p+m)*T,t[7]=0,t[8]=(A+g)*C,t[9]=(p-m)*C,t[10]=(1-(d+f))*C,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Re(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],l=e[3],c=a+a,u=o+o,d=s+s,h=a*c,A=a*u,f=a*d,p=o*u,I=o*d,m=s*d,g=l*c,v=l*u,E=l*d,T=r[0],C=r[1],b=r[2],R=i[0],M=i[1],y=i[2],F=(1-(p+m))*T,S=(A+E)*T,O=(f-v)*T,_=(A-E)*C,P=(1-(h+m))*C,N=(I+g)*C,x=(f+v)*b,B=(I-g)*b,L=(1-(h+p))*b;return t[0]=F,t[1]=S,t[2]=O,t[3]=0,t[4]=_,t[5]=P,t[6]=N,t[7]=0,t[8]=x,t[9]=B,t[10]=L,t[11]=0,t[12]=n[0]+R-(F*R+_*M+x*y),t[13]=n[1]+M-(S*R+P*M+B*y),t[14]=n[2]+y-(O*R+N*M+L*y),t[15]=1,t}function Me(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,d=r*s,h=i*o,A=i*s,f=i*l,p=a*o,I=a*s,m=a*l;return t[0]=1-d-f,t[1]=u+m,t[2]=h-I,t[3]=0,t[4]=u-m,t[5]=1-c-f,t[6]=A+p,t[7]=0,t[8]=h+I,t[9]=A-p,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,n,r,i,a,o){var s=1/(n-e),l=1/(i-r),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function Fe(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}function Se(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*l*.5,t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Oe(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*c,t[15]=1,t}function _e(t,e,n,r){var i,a,o,s,l,c,u,d,h,f,p=e[0],I=e[1],m=e[2],g=r[0],v=r[1],E=r[2],T=n[0],C=n[1],b=n[2];return Math.abs(p-T)<A&&Math.abs(I-C)<A&&Math.abs(m-b)<A?te(t):(u=p-T,d=I-C,h=m-b,i=v*(h*=f=1/Math.sqrt(u*u+d*d+h*h))-E*(d*=f),a=E*(u*=f)-g*h,o=g*d-v*u,(f=Math.sqrt(i*i+a*a+o*o))?(i*=f=1/f,a*=f,o*=f):(i=0,a=0,o=0),s=d*o-h*a,l=h*i-u*o,c=u*a-d*i,(f=Math.sqrt(s*s+l*l+c*c))?(s*=f=1/f,l*=f,c*=f):(s=0,l=0,c=0),t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=a,t[5]=l,t[6]=d,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*p+a*I+o*m),t[13]=-(s*p+l*I+c*m),t[14]=-(u*p+d*I+h*m),t[15]=1,t)}function Pe(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],l=r[1],c=r[2],u=i-n[0],d=a-n[1],h=o-n[2],A=u*u+d*d+h*h;A>0&&(u*=A=1/Math.sqrt(A),d*=A,h*=A);var f=l*h-c*d,p=c*u-s*h,I=s*d-l*u;return(A=f*f+p*p+I*I)>0&&(f*=A=1/Math.sqrt(A),p*=A,I*=A),t[0]=f,t[1]=p,t[2]=I,t[3]=0,t[4]=d*I-h*p,t[5]=h*f-u*I,t[6]=u*p-d*f,t[7]=0,t[8]=u,t[9]=d,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function Ne(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function xe(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Be(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Le(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function we(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Ue(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function De(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ge(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],I=t[13],m=t[14],g=t[15],v=e[0],E=e[1],T=e[2],C=e[3],b=e[4],R=e[5],M=e[6],y=e[7],F=e[8],S=e[9],O=e[10],_=e[11],P=e[12],N=e[13],x=e[14],B=e[15];return Math.abs(n-v)<=A*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-E)<=A*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(i-T)<=A*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(a-C)<=A*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(o-b)<=A*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-R)<=A*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-M)<=A*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-y)<=A*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-F)<=A*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(d-S)<=A*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(h-O)<=A*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(f-_)<=A*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(p-P)<=A*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(I-N)<=A*Math.max(1,Math.abs(I),Math.abs(N))&&Math.abs(m-x)<=A*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(g-B)<=A*Math.max(1,Math.abs(g),Math.abs(B))}var Ve=ae,He=Le;function ke(){var t=new f(3);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xe(t){var e=new f(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qe(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function We(t,e,n){var r=new f(3);return r[0]=t,r[1]=e,r[2]=n,r}function Qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ze(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function je(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ke(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ye(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ze(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function an(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function on(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function sn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function ln(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function un(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function dn(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function hn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function An(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2];return t[0]=i*l-a*s,t[1]=a*o-r*l,t[2]=r*s-i*o,t}function fn(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function pn(t,e,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,c=o*(a-1),u=o*(3-2*a);return t[0]=e[0]*s+n[0]*l+r[0]*c+i[0]*u,t[1]=e[1]*s+n[1]*l+r[1]*c+i[1]*u,t[2]=e[2]*s+n[2]*l+r[2]*c+i[2]*u,t}function In(t,e,n,r,i,a){var o=1-a,s=o*o,l=a*a,c=s*o,u=3*a*s,d=3*l*o,h=l*a;return t[0]=e[0]*c+n[0]*u+r[0]*d+i[0]*h,t[1]=e[1]*c+n[1]*u+r[1]*d+i[1]*h,t[2]=e[2]*c+n[2]*u+r[2]*d+i[2]*h,t}function mn(t,e){e=e||1;var n=2*p()*Math.PI,r=2*p()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function gn(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function vn(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function En(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],l=e[1],c=e[2],u=i*c-a*l,d=a*s-r*c,h=r*l-i*s,A=i*h-a*d,f=a*u-r*h,p=r*d-i*u,I=2*o;return u*=I,d*=I,h*=I,A*=2,f*=2,p*=2,t[0]=s+u+A,t[1]=l+d+f,t[2]=c+h+p,t}function Tn(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Cn(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function bn(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function Rn(t,e){var n=We(t[0],t[1],t[2]),r=We(e[0],e[1],e[2]);dn(n,n),dn(r,r);var i=hn(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function Mn(t){return t[0]=0,t[1]=0,t[2]=0,t}function yn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Fn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Sn(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=A*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=A*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=A*Math.max(1,Math.abs(i),Math.abs(s))}var On,_n=Ke,Pn=Ye,Nn=Ze,xn=on,Bn=sn,Ln=qe,wn=ln,Un=(On=ke(),function(t,e,n,r,i,a){var o,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,o=n;o<s;o+=e)On[0]=t[o],On[1]=t[o+1],On[2]=t[o+2],i(On,On,a),t[o]=On[0],t[o+1]=On[1],t[o+2]=On[2];return t});function Dn(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Gn(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Vn(t,e,n,r){var i=new f(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Hn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function kn(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Xn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function qn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Wn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Qn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function zn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function jn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Kn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Yn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Zn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Jn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $n(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+i*i+a*a}function nr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function rr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ir(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ar(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function or(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function sr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function lr(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],l=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],u=e[0],d=e[1],h=e[2],A=e[3];return t[0]=d*c-h*l+A*s,t[1]=-u*c+h*o-A*a,t[2]=u*l-d*o+A*i,t[3]=-u*s+d*a-h*i,t}function cr(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t}function ur(t,e){var n,r,i,a,o,s;e=e||1;do{o=(n=2*p()-1)*n+(r=2*p()-1)*r}while(o>=1);do{s=(i=2*p()-1)*i+(a=2*p()-1)*a}while(s>=1);var l=Math.sqrt((1-o)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*l,t[3]=e*a*l,t}function dr(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}function hr(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*a-l*i,d=c*i+l*r-o*a,h=c*a+o*i-s*r,A=-o*r-s*i-l*a;return t[0]=u*c+A*-o+d*-l-h*-s,t[1]=d*c+A*-s+h*-o-u*-l,t[2]=h*c+A*-l+u*-s-d*-o,t[3]=e[3],t}function Ar(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function fr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function pr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Ir(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],s=e[1],l=e[2],c=e[3];return Math.abs(n-o)<=A*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=A*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=A*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=A*Math.max(1,Math.abs(a),Math.abs(c))}var mr=qn,gr=Wn,vr=Qn,Er=tr,Tr=er,Cr=nr,br=rr,Rr=function(){var t=Dn();return function(e,n,r,i,a,o){var s,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Mr(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function yr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Fr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Sr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>A?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Or(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+o*s+i*c-a*l,t[1]=i*u+o*l+a*s-r*c,t[2]=a*u+o*c+r*l-i*s,t[3]=o*u-r*s-i*l-a*c,t}function _r(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=a*l-i*s,t[3]=o*l-r*s,t}function Pr(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l-a*s,t[1]=i*l+o*s,t[2]=a*l+r*s,t[3]=o*l-i*s,t}function Nr(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*s,t[1]=i*l-r*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t}function xr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Br(t,e,n,r){var i,a,o,s,l,c=e[0],u=e[1],d=e[2],h=e[3],f=n[0],p=n[1],I=n[2],m=n[3];return(a=c*f+u*p+d*I+h*m)<0&&(a=-a,f=-f,p=-p,I=-I,m=-m),1-a>A?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,l=Math.sin(r*i)/o):(s=1-r,l=r),t[0]=s*c+l*f,t[1]=s*u+l*p,t[2]=s*d+l*I,t[3]=s*h+l*m,t}function Lr(t){var e=p(),n=p(),r=p(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function wr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function Ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Dr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[o]=(e[3*o+i]+e[3*i+o])*n}return t}function Gr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),l=Math.cos(n),c=Math.sin(r),u=Math.cos(r);return t[0]=a*l*u-o*s*c,t[1]=o*s*u+a*l*c,t[2]=o*l*c-a*s*u,t[3]=o*l*u+a*s*c,t}function Vr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hr,kr,Xr,qr,Wr,Qr,zr=Gn,jr=Vn,Kr=Hn,Yr=kn,Zr=Xn,Jr=Or,$r=Jn,ti=sr,ei=cr,ni=nr,ri=ni,ii=rr,ai=ii,oi=or,si=pr,li=Ir,ci=(Hr=ke(),kr=We(1,0,0),Xr=We(0,1,0),function(t,e,n){var r=hn(e,n);return r<-.999999?(An(Hr,kr,e),Ln(Hr)<1e-6&&An(Hr,Xr,e),dn(Hr,Hr),Fr(t,Hr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(An(Hr,e,n),t[0]=Hr[0],t[1]=Hr[1],t[2]=Hr[2],t[3]=1+r,oi(t,t))}),ui=(qr=Mr(),Wr=Mr(),function(t,e,n,r,i,a){return Br(qr,e,i,a),Br(Wr,n,r,a),Br(t,qr,Wr,2*a*(1-a)),t}),di=(Qr=mt(),function(t,e,n,r){return Qr[0]=n[0],Qr[3]=n[1],Qr[6]=n[2],Qr[1]=r[0],Qr[4]=r[1],Qr[7]=r[2],Qr[2]=-e[0],Qr[5]=-e[1],Qr[8]=-e[2],oi(t,Dr(t,Qr))});function hi(){var t=new f(8);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ai(t){var e=new f(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function fi(t,e,n,r,i,a,o,s){var l=new f(8);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l}function pi(t,e,n,r,i,a,o){var s=new f(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var l=.5*i,c=.5*a,u=.5*o;return s[4]=l*r+c*n-u*e,s[5]=c*r+u*t-l*n,s[6]=u*r+l*e-c*t,s[7]=-l*t-c*e-u*n,s}function Ii(t,e,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=e[0],s=e[1],l=e[2],c=e[3];return t[0]=o,t[1]=s,t[2]=l,t[3]=c,t[4]=r*c+i*l-a*s,t[5]=i*c+a*o-r*l,t[6]=a*c+r*s-i*o,t[7]=-r*o-i*s-a*l,t}function mi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function gi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function vi(t,e){var n=Mr();Ce(n,e);var r=new f(3);return Ee(r,e),Ii(t,n,r),t}function Ei(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Ti(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ci(t,e,n,r,i,a,o,s,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t}var bi=Kr;function Ri(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Mi=Kr;function yi(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Fi(t,e){var n=e[4],r=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],l=-e[2],c=e[3];return t[0]=2*(n*c+a*o+r*l-i*s),t[1]=2*(r*c+a*s+i*o-n*l),t[2]=2*(i*c+a*l+n*s-r*o),t}function Si(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=.5*n[0],l=.5*n[1],c=.5*n[2],u=e[4],d=e[5],h=e[6],A=e[7];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=o*s+i*c-a*l+u,t[5]=o*l+a*s-r*c+d,t[6]=o*c+r*l-i*s+h,t[7]=-r*s-i*l-a*c+A,t}function Oi(t,e,n){var r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=s*o+u*r+l*a-c*i,h=l*o+u*i+c*r-s*a,A=c*o+u*a+s*i-l*r,f=u*o-s*r-l*i-c*a;return _r(t,e,n),r=t[0],i=t[1],a=t[2],o=t[3],t[4]=d*o+f*r+h*a-A*i,t[5]=h*o+f*i+A*r-d*a,t[6]=A*o+f*a+d*i-h*r,t[7]=f*o-d*r-h*i-A*a,t}function _i(t,e,n){var r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=s*o+u*r+l*a-c*i,h=l*o+u*i+c*r-s*a,A=c*o+u*a+s*i-l*r,f=u*o-s*r-l*i-c*a;return Pr(t,e,n),r=t[0],i=t[1],a=t[2],o=t[3],t[4]=d*o+f*r+h*a-A*i,t[5]=h*o+f*i+A*r-d*a,t[6]=A*o+f*a+d*i-h*r,t[7]=f*o-d*r-h*i-A*a,t}function Pi(t,e,n){var r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=s*o+u*r+l*a-c*i,h=l*o+u*i+c*r-s*a,A=c*o+u*a+s*i-l*r,f=u*o-s*r-l*i-c*a;return Nr(t,e,n),r=t[0],i=t[1],a=t[2],o=t[3],t[4]=d*o+f*r+h*a-A*i,t[5]=h*o+f*i+A*r-d*a,t[6]=A*o+f*a+d*i-h*r,t[7]=f*o-d*r-h*i-A*a,t}function Ni(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],l=e[1],c=e[2],u=e[3];return t[0]=s*o+u*r+l*a-c*i,t[1]=l*o+u*i+c*r-s*a,t[2]=c*o+u*a+s*i-l*r,t[3]=u*o-s*r-l*i-c*a,s=e[4],l=e[5],c=e[6],u=e[7],t[4]=s*o+u*r+l*a-c*i,t[5]=l*o+u*i+c*r-s*a,t[6]=c*o+u*a+s*i-l*r,t[7]=u*o-s*r-l*i-c*a,t}function xi(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+o*s+i*c-a*l,t[1]=i*u+o*l+a*s-r*c,t[2]=a*u+o*c+r*l-i*s,t[3]=o*u-r*s-i*l-a*c,s=n[4],l=n[5],c=n[6],u=n[7],t[4]=r*u+o*s+i*c-a*l,t[5]=i*u+o*l+a*s-r*c,t[6]=a*u+o*c+r*l-i*s,t[7]=o*u-r*s-i*l-a*c,t}function Bi(t,e,n,r){if(Math.abs(r)<A)return Ei(t,e);var i=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r*=.5;var a=Math.sin(r),o=a*n[0]/i,s=a*n[1]/i,l=a*n[2]/i,c=Math.cos(r),u=e[0],d=e[1],h=e[2],f=e[3];t[0]=u*c+f*o+d*l-h*s,t[1]=d*c+f*s+h*o-u*l,t[2]=h*c+f*l+u*s-d*o,t[3]=f*c-u*o-d*s-h*l;var p=e[4],I=e[5],m=e[6],g=e[7];return t[4]=p*c+g*o+I*l-m*s,t[5]=I*c+g*s+m*o-p*l,t[6]=m*c+g*l+p*s-I*o,t[7]=g*c-p*o-I*s-m*l,t}function Li(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function wi(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[4],l=n[5],c=n[6],u=n[7],d=e[4],h=e[5],A=e[6],f=e[7],p=n[0],I=n[1],m=n[2],g=n[3];return t[0]=r*g+o*p+i*m-a*I,t[1]=i*g+o*I+a*p-r*m,t[2]=a*g+o*m+r*I-i*p,t[3]=o*g-r*p-i*I-a*m,t[4]=r*u+o*s+i*c-a*l+d*g+f*p+h*m-A*I,t[5]=i*u+o*l+a*s-r*c+h*g+f*I+A*p-d*m,t[6]=a*u+o*c+r*l-i*s+A*g+f*m+d*I-h*p,t[7]=o*u-r*s-i*l-a*c+f*g-d*p-h*I-A*m,t}var Ui=wi;function Di(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Gi=ti;function Vi(t,e,n,r){var i=1-r;return Gi(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Hi(t,e){var n=Wi(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function ki(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Xi=ni,qi=Xi,Wi=ii,Qi=Wi;function zi(t,e){var n=Wi(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,a=e[2]/n,o=e[3]/n,s=e[4],l=e[5],c=e[6],u=e[7],d=r*s+i*l+a*c+o*u;t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=(s-r*d)/n,t[5]=(l-i*d)/n,t[6]=(c-a*d)/n,t[7]=(u-o*d)/n}return t}function ji(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Ki(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Yi(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],I=e[5],m=e[6],g=e[7];return Math.abs(n-u)<=A*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-d)<=A*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=A*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-f)<=A*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-p)<=A*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-I)<=A*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(l-m)<=A*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-g)<=A*Math.max(1,Math.abs(c),Math.abs(g))}function Zi(){var t=new f(2);return f!=Float32Array&&(t[0]=0,t[1]=0),t}function Ji(t){var e=new f(2);return e[0]=t[0],e[1]=t[1],e}function $i(t,e){var n=new f(2);return n[0]=t,n[1]=e,n}function ta(t,e){return t[0]=e[0],t[1]=e[1],t}function ea(t,e,n){return t[0]=e,t[1]=n,t}function na(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ra(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ia(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function aa(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function oa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function sa(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function la(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function ca(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function ua(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function da(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function ha(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function Aa(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function fa(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function pa(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function Ia(t){var e=t[0],n=t[1];return e*e+n*n}function ma(t,e){return t[0]=-e[0],t[1]=-e[1],t}function ga(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function va(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Ea(t,e){return t[0]*e[0]+t[1]*e[1]}function Ta(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ca(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t}function ba(t,e){e=e||1;var n=2*p()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Ra(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function Ma(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function ya(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Fa(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function Sa(t,e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=i*s-a*o+n[0],t[1]=i*o+a*s+n[1],t}function Oa(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var l=(n*i+r*a)*o*s;return l>1?0:l<-1?Math.PI:Math.acos(l)}function _a(t){return t[0]=0,t[1]=0,t}function Pa(t){return"vec2("+t[0]+", "+t[1]+")"}function Na(t,e){return t[0]===e[0]&&t[1]===e[1]}function xa(t,e){var n=t[0],r=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=A*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=A*Math.max(1,Math.abs(r),Math.abs(a))}var Ba=pa,La=ra,wa=ia,Ua=aa,Da=Aa,Ga=fa,Va=Ia,Ha=function(){var t=Zi();return function(e,n,r,i,a,o){var s,l;for(n||(n=2),r||(r=0),l=i?Math.min(i*n+r,e.length):e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},831:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.EasingType=void 0,i(n(9438),e),i(n(3425),e),i(n(8194),e),i(n(6920),e),i(n(4469),e),i(n(8378),e),i(n(6413),e),i(n(2607),e),i(n(9499),e);var a=n(9549);Object.defineProperty(e,"EasingType",{enumerable:!0,get:function(){return a.EasingType}}),i(n(5819),e),i(n(5637),e),i(n(1906),e),i(n(6952),e)},126:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bitmap=void 0,e.Bitmap=function(){}},5056:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ClippingPlane=void 0,e.ClippingPlane=function(){}},1447:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Coloring=void 0,e.Coloring=function(){}},9368:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0,e.Component=function(t){this.ifc_guid=t,this.originating_system="xBIM",this.authoring_tool_id="WebUI"}},2680:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Components=void 0,e.Components=function(){}},7085:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Guid=void 0;var n=function(){function t(){}return t.new=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(t){var e=parseInt(t,10);return(e^16*Math.random()>>e/4).toString(16)}))},t}();e.Guid=n},6952:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(126),e),i(n(5056),e),i(n(1447),e),i(n(9368),e),i(n(2680),e),i(n(1970),e),i(n(9891),e),i(n(1963),e),i(n(1304),e),i(n(7745),e),i(n(779),e),i(n(4134),e)},1970:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0,e.Line=function(){}},9891:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OrthogonalCamera=void 0,e.OrthogonalCamera=function(){}},1963:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PerspectiveCamera=void 0,e.PerspectiveCamera=function(){}},1304:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Snapshot=void 0,e.Snapshot=function(){}},7745:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ViewSetupHints=void 0,e.ViewSetupHints=function(){}},779:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Viewpoint=void 0;var r=n(7085),i=n(5056),a=n(2680),o=n(887),s=n(6413),l=n(831),c=n(4134),u=n(9368),d=function(){function t(){this.index=++t._currentIndex,this.guid=r.Guid.new()}return t.GetViewpoint=function(e,n,r){void 0===r&&(r=e.width/2);var i=new t,o=e.width/e.height,d=r/o,h=function(t){return Array.prototype.slice.call(t)};if(e.camera===s.CameraType.PERSPECTIVE)i.perspective_camera={camera_direction:h(e.getCameraDirection()),camera_up_vector:h(e.getCameraHeading()),camera_view_point:h(e.getCameraPositionWcs()),field_of_view:e.cameraProperties.fov,height:e.cameraProperties.height,width:e.cameraProperties.height*o};else{var A=e.cameraProperties.height/e.unitsInMeter,f=e.height/t.resolution;i.orthogonal_camera={camera_direction:h(e.getCameraDirection()),camera_up_vector:h(e.getCameraHeading()),camera_view_point:h(e.getCameraPositionWcs()),view_to_world_scale:f/A,height:e.cameraProperties.height,width:e.cameraProperties.height*o}}var p=e.getCurrentImageDataUrl(r,d,"png").substring(22);i.snapshot={snapshot_type:"png",snapshot_data:p};var I=e.getClip();null!=I&&(t.AddClippingPlane(i,I.PlaneA),t.AddClippingPlane(i,I.PlaneB));var m=e.getProductsWithState(l.State.HIGHLIGHTED);if(null!=m&&m.length>0){null==n&&(console.warn("ID mapping function should be used to persist global identity of selected elements"),n=function(t,e){return e+"_"+t}),null==i.components&&(i.components=new a.Components,i.components.coloring=[],i.components.selection=[],i.components.visibility=new c.Visibility);var g=i.components.selection;m.forEach((function(t){var e=n(t.id,t.model);g.push(new u.Component(e))}))}return i},t.AddClippingPlane=function(t,e){if(null!=e&&4===e.length){null==t.clipping_planes&&(t.clipping_planes=[]);var n=new i.ClippingPlane;n.direction=e.slice(0,3);var r=e,a=-r[0]*r[3]/(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),o=-r[1]*r[3]/(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),s=-r[2]*r[3]/(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);n.location=[a,o,s],t.clipping_planes.push(n)}},t.SetViewpoint=function(e,n,r,i){void 0===i&&(i=0);var a=function(t){return null==t||t.length<3?null:o.vec3.fromValues(t[0],t[1],t[2])},c=e.getCurrentWcs(),u=e.width/e.height;t.SetClipping(e,n);var d=n.perspective_camera||n.orthogonal_camera;if(null!=d){var h=d.camera_view_point,A=d.camera_direction,f=d.camera_up_vector,p=a(h),I=o.vec3.subtract(o.vec3.create(),p,c),m=o.vec3.normalize(o.vec3.create(),a(A)),g=o.vec3.normalize(o.vec3.create(),a(f)||o.vec3.fromValues(0,0,1)),v=o.vec3.angle(m,g);(Math.abs(v)<1e-6||Math.abs(v-Math.PI)<1e-6)&&(console.warn("Collinear target and heading vectors for the view. Singularity will be fixed by guess."),v=o.vec3.angle(m,o.vec3.fromValues(0,0,1)),(Math.abs(v)<1e-6||Math.abs(v-Math.PI)<1e-6)&&(g=o.vec3.fromValues(0,1,0)));var E=function(t){return null!=t&&"number"==typeof t&&t>0},T=e.cameraProperties.height||100,C=e.getMergedRegion(),b=C&&C.bbox&&C.population>0?e.getDistanceAndHeight(C.bbox,m,g):null;if(null!=b&&o.vec3.dist(a(C.centre),I)>4*b.distance){var R=o.vec3.negate(o.vec3.create(),m),M=o.vec3.scale(o.vec3.create(),R,b.distance);I=o.vec3.add(o.vec3.create(),a(C.centre),M),T=b.height}if(n.perspective_camera){e.camera=s.CameraType.PERSPECTIVE;var y=60;if(E(n.perspective_camera.field_of_view)&&(y=n.perspective_camera.field_of_view),E(d.width)&&E(d.height)&&(O=d.width/d.height)>u){var F=y*Math.PI/180;y=2*Math.atan(Math.tan(F/2)*O/u)*180/Math.PI}e.cameraProperties.fov=y}else if(n.orthogonal_camera){if(e.camera=s.CameraType.ORTHOGONAL,e.cameraProperties.fov=60,E(n.orthogonal_camera.view_to_world_scale)){var S=n.orthogonal_camera.view_to_world_scale;T=e.height/t.resolution/S*e.unitsInMeter}if(E(d.width)&&E(d.height)){var O,_=d.height;(O=d.width/_)>u&&(_=_*O/u),null!=b&&_>4*b.height&&(_=b.height),T=_}}var P=o.vec3.add(o.vec3.create(),I,m),N=o.mat4.lookAt(o.mat4.create(),I,P,g);if(e.animations.viewTo({mv:N,height:T},i).then((function(){if(n.orthogonal_camera){if(o.vec3.angle(a(d.camera_direction),o.vec3.fromValues(0,0,-1))>Math.PI/180)return;e.adjustments.adjust(10)}})),e.clearHighlighting(),null!=n.components&&null!=n.components.selection&&n.components.selection.length>0){var x=n.components.selection;null==r&&(console.warn("No function defined to map between global IDs and local product and model IDs"),r=function(t){var e=t.split("_"),n=parseInt(e[0],10);return{productId:parseInt(e[1],10),modelId:n}});var B={};x.map((function(t){return r(t.ifc_guid)})).forEach((function(t){(B[t.modelId]||(B[t.modelId]=[])).push(t.productId)})),Object.getOwnPropertyNames(B).forEach((function(t){e.addState(l.State.HIGHLIGHTED,B[t],parseInt(t,10))}))}}},t.SetClipping=function(e,n){if(e.unclip(),e.sectionBox.setToInfinity(),null!=n.clipping_planes&&0!==n.clipping_planes.length)if(6!==n.clipping_planes.length){var r=t.getClippingEquation(n.clipping_planes[0]),i=t.getClippingEquation(n.clipping_planes[1]);null!=r&&e.setClippingPlaneA(r),null!=i&&e.setClippingPlaneB(i)}else e.sectionBox.setToPlanes(n.clipping_planes)},t.getClippingEquation=function(t){if(null==t||null==t.direction||null==t.location)return null;var e=t.direction,n=t.location,r=0-e[0]*n[0]-e[1]*n[1]-e[2]*n[2];return[e[0],e[1],e[2],r]},Object.defineProperty(t,"resolution",{get:function(){if(null!=t._resolution)return t._resolution;var e=document.createElement("div");e.style.position="absolute",e.style.width="100mm",document.body.appendChild(e);var n=e.getBoundingClientRect();return document.body.removeChild(e),t._resolution=n.width/.1,t._resolution},enumerable:!1,configurable:!0}),t._currentIndex=0,t._resolution=null,t}();e.Viewpoint=d},4134:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Visibility=void 0,e.Visibility=function(){this.default_visibility=!1}},6413:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CameraType=e.CameraProperties=void 0;var r,i=n(887),a=function(){function t(t){this._fov=45,this._type=r.PERSPECTIVE,this.onChange=function(){},this.onChange=t||function(){}}return Object.defineProperty(t.prototype,"fov",{get:function(){return this._fov},set:function(t){if(null==t||t<=0||t>180)throw new Error("Perspective field of view has to be a positive number between 0 and 180 degrees");this._fov=t,this.onChange&&this.type===r.PERSPECTIVE&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t,this.onChange&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._far},set:function(t){this._far=t,this.onChange&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){if(null==t||t<=0)throw new Error("Orthographic view height has to be a positive number");this._height=t,this.onChange&&this.type===r.ORTHOGONAL&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this.onChange&&this.onChange()},enumerable:!1,configurable:!0}),t.prototype.getProjectionMatrix=function(t,e){var n=t/e;switch(this.type){case r.PERSPECTIVE:return i.mat4.perspective(i.mat4.create(),this.fov*Math.PI/180,n,this.near,this.far);case r.ORTHOGONAL:var a=this.height,o=a*n;return i.mat4.ortho(i.mat4.create(),o/-2,o/2,a/-2,a/2,this.near,this.far);default:throw new Error("Undefined camera type")}},t}();e.CameraProperties=a,function(t){t[t.PERSPECTIVE=0]="PERSPECTIVE",t[t.ORTHOGONAL=1]="ORTHOGONAL"}(r=e.CameraType||(e.CameraType={}))},3810:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Abilities=void 0;var r=n(7997),i=n(1275),a=function(){function t(){}return t.check=function(){var t=new i.CheckResult,e=document.createElement("canvas");if(e){var n=null,a=0;if(r.WebGLUtils.setupWebGL(e,(function(t,e){n=t,a=e}),null,(function(e){t.errors.push(e)})),null==n)t.errors.push("Browser doesn't support WebGL. This is critical.");else{!(a<2)||n.getExtension("OES_texture_float")||n.getExtension("MOZ_OES_texture_float")||n.getExtension("WEBKIT_OES_texture_float")||t.errors.push("Floating point texture extension is not supported."),!(a<2)||n.getExtension("WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||t.warnings.push("Depth texture extension is not available. It will not be possible to get 3D coordinates of user interactions.");var o=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);o<4&&t.errors.push("Browser supports only "+o+" vertex texture image units but minimal requirement for the viewer is 4.")}}else t.errors.push("Browser doesn't have support for HTMLCanvasElement. This is critical.");return window.File&&window.FileReader&&window.Blob||t.errors.push("Browser doesn't support 'File', 'FileReader' or 'Blob' objects."),window.Int32Array&&window.Float32Array||t.errors.push("Browser doesn't support TypedArrays. These are crucial for binary parsing and for comunication with GPU."),0==t.errors.length&&(t.noErrors=!0),0==t.warnings.length&&(t.noWarnings=!0),t},t}();e.Abilities=a},5460:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BBox=void 0;var r=n(887),i=function(){function t(){}return t.centre=function(t){return[t[0]+t[3]/2,t[1]+t[4]/2,t[2]+t[5]/2]},t.union=function(t,e){var n=[t[0],t[1],t[2]],r=[e[0],e[1],e[2]],i=[t[0]+t[3],t[1]+t[4],t[2]+t[5]],a=[e[0]+e[3],e[1]+e[4],e[2]+e[5]],o=[Math.min(n[0],r[0]),Math.min(n[1],r[1]),Math.min(n[2],r[2])],s=[Math.max(i[0],a[0]),Math.max(i[1],a[1]),Math.max(i[2],a[2])];return[o[0],o[1],o[2],s[0]-o[0],s[1]-o[1],s[2]-o[2]]},t.intersection=function(e,n){if(null==e||null==n||t.areDisjoint(e,n))return null;var r=[e[0],e[1],e[2]],i=[n[0],n[1],n[2]],a=[e[0]+e[3],e[1]+e[4],e[2]+e[5]],o=[n[0]+n[3],n[1]+n[4],n[2]+n[5]],s=[Math.max(r[0],i[0]),Math.max(r[1],i[1]),Math.max(r[2],i[2])],l=[Math.min(a[0],o[0]),Math.min(a[1],o[1]),Math.min(a[2],o[2])];return[s[0],s[1],s[2],l[0]-s[0],l[1]-s[1],l[2]-s[2]]},t.areDisjoint=function(t,e){if(null==t||null==e)throw new Error("Bounding box is not defined");var n=[t[0],t[1],t[2]],r=[e[0],e[1],e[2]],i=[t[0]+t[3],t[1]+t[4],t[2]+t[5]],a=[e[0]+e[3],e[1]+e[4],e[2]+e[5]];return n[0]>a[0]||n[1]>a[1]||n[2]>a[2]||r[0]>i[0]||r[1]>i[1]||r[2]>i[2]},t.getSizeInView=function(t,e,n){e=r.vec3.normalize(r.vec3.create(),e),n=r.vec3.normalize(r.vec3.create(),n);var i=r.vec3.negate(r.vec3.create(),e),a=Math.max(t[3],t[4],t[5]),o=r.vec3.fromValues(t[0]+t[3]/2,t[1]+t[4]/2,t[2]+t[5]/2),s=r.vec3.scale(r.vec3.create(),i,a),l=r.vec3.add(r.vec3.create(),o,s),c=r.mat4.lookAt(r.mat4.create(),l,o,n),u=Array.prototype.slice.call(c.slice(0,3)),d=Array.prototype.slice.call(c.slice(4,7)),h=Array.prototype.slice.call(c.slice(8,11)),A=r.vec3.scale(r.vec3.create(),u,t[0]),f=r.vec3.scale(r.vec3.create(),u,t[0]+t[3]),p=r.vec3.scale(r.vec3.create(),d,t[1]),I=r.vec3.scale(r.vec3.create(),d,t[1]+t[4]),m=r.vec3.scale(r.vec3.create(),h,t[2]),g=r.vec3.scale(r.vec3.create(),h,t[2]+t[5]),v=r.vec3.min(r.vec3.create(),A,f),E=r.vec3.min(r.vec3.create(),p,I),T=r.vec3.min(r.vec3.create(),m,g),C=r.vec3.max(r.vec3.create(),A,f),b=r.vec3.max(r.vec3.create(),p,I),R=r.vec3.max(r.vec3.create(),m,g),M=[v[0]+E[0]+T[0],v[1]+E[1]+T[1],v[2]+E[2]+T[2]],y=[C[0]+b[0]+R[0],C[1]+b[1]+R[1],C[2]+b[2]+R[2]],F=r.vec3.sub(r.vec3.create(),y,M);return{width:1*F[0],height:1*F[1],depth:F[2]}},t.none=[Number.MAX_VALUE/2,Number.MAX_VALUE/2,Number.MAX_VALUE/2,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE],t}();e.BBox=i},1275:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CheckResult=void 0,e.CheckResult=function(){this.warnings=[],this.errors=[],this.noErrors=!1,this.noWarnings=!1}},6920:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageType=e.Message=void 0,e.Message=function(){},(n=e.MessageType||(e.MessageType={}))[n.PROGRESS=0]="PROGRESS",n[n.COMPLETED=1]="COMPLETED",n[n.FAILED=2]="FAILED"},3753:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductMap=void 0;var r=n(8194),i=function(){function t(){this.states=[]}return t.clone=function(e){var n=new t;return n.productID=e.productID,n.renderId=e.renderId,n.type=e.type,n.bBox=new Float32Array(e.bBox),n.spans=e.spans,n.states=e.states.slice(0),n},t.addState=function(t,e){null==t.states.find((function(t){return t===e}))&&t.states.push(e)},t.removeState=function(t,e){var n=t.states.indexOf(e);n<0||t.states.splice(n,1)},t.getState=function(t){return null==t.states||0===t.states.length?r.State.UNDEFINED:r.StatePriorities.getHighestPriority(t.states)},t}();e.ProductMap=i},8194:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.StatePriorities=e.State=void 0,function(t){t[t.UNDEFINED=255]="UNDEFINED",t[t.HIDDEN=254]="HIDDEN",t[t.HIGHLIGHTED=253]="HIGHLIGHTED",t[t.XRAYVISIBLE=252]="XRAYVISIBLE",t[t.PICKING_ONLY=251]="PICKING_ONLY",t[t.UNSTYLED=225]="UNSTYLED"}(n=e.State||(e.State={}));var r=function(){function t(){}return t.getPriority=function(t){switch(t){case n.HIGHLIGHTED:return 1;case n.PICKING_ONLY:return 2;case n.HIDDEN:return 3;case n.XRAYVISIBLE:return 4;default:return 100}},t.getHighestPriority=function(t){var e=this;if(null==t||0===t.length)return null;if(1===t.length)return t[0];var r=t.map((function(t){return{state:t,priority:e.getPriority(t)}}));r.sort((function(t,e){return t.priority-e.priority}));var i=r[0];return i.priority>50?n.UNDEFINED:i.state},t}();e.StatePriorities=r},4469:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},7997:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUtils=void 0;var n=function(){function t(){}return t.makeFailHTML=function(t){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>"},t.setupWebGL=function(e,n,r,i){i=i||function(n){var r=e.parentNode;if(r){var i="undefined"!=typeof WebGLRenderingContext?t.OTHER_PROBLEM:t.GET_A_WEBGL_BROWSER;n&&(i+="<br/><br/>Status: "+n),r.innerHTML=t.makeFailHTML(i)}},e.addEventListener&&e.addEventListener("webglcontextcreationerror",(function(t){i(t.statusMessage)}),!1),t.create3DContext(e,n,r)},t.create3DContext=function(t,e,n){var r=null;try{if(null!=(r=t.getContext("webgl2",n)))return void e(r,2)}catch(t){}["webgl","experimental-webgl","webkit-3d","moz-webgl"].forEach((function(e){if(null==r)try{r=t.getContext(e,n)}catch(t){}})),e(r,1)},t.GET_A_WEBGL_BROWSER='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',t.OTHER_PROBLEM='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>',t}();e.WebGLUtils=n},9499:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Framebuffer=void 0;var r=n(1205),i=n(887),a=function(){function t(t,e,n,r,i){if(this.gl=t,this.width=e,this.height=n,this.withDepth=r,this.glVersion=i,this.isReady=!0,this._disposed=!1,this._glVersion=1,this.width=e=Math.floor(e),this.height=n=Math.floor(n),0!==e&&0!==n){if(this._glVersion=i,this.framebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderbuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e,n),this.texture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),r&&(this.depthTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.depthTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),1===this._glVersion?t.texImage2D(t.TEXTURE_2D,0,t.DEPTH_COMPONENT,e,n,0,t.DEPTH_COMPONENT,t.UNSIGNED_SHORT,null):t.texImage2D(t.TEXTURE_2D,0,t.DEPTH_COMPONENT16,e,n,0,t.DEPTH_COMPONENT,t.UNSIGNED_SHORT,null)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),r?t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.depthTexture,0):t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.renderbuffer),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE)throw new Error("this combination of attachments does not work")}else this.isReady=!1}return Object.defineProperty(t.prototype,"depthReader",{get:function(){return null!=this._depthReader||(this._depthReader=new r.DepthReader(this.gl,this.glVersion)),this._depthReader},enumerable:!1,configurable:!0}),t.prototype.bind=function(){if(this.isReady){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindRenderbuffer(t.RENDERBUFFER,this.renderbuffer)}},t.prototype.getPixel=function(t,e){if(!this.isReady)return null;var n=new Uint8Array(4);return this.gl.readPixels(t,e,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),n},t.prototype.getDepth=function(t,e){return this.isReady?this.withDepth?this.depthReader.getDepth(t,e,this.depthTexture,this.width,this.height):-1:null},t.prototype.getDepths=function(t){return this.withDepth&&this.isReady?this.depthReader.getDepths(t,this.depthTexture,this.width,this.height):null},t.prototype.getXYZArray=function(t){var e=this;return this.withDepth&&this.isReady?this.getDepths(t).map((function(n,r){if(255===n)return null;var a=t[r],o=a.x/e.width*2-1,s=a.y/e.height*2-1,l=2*(n/255-.5);return i.vec3.fromValues(o,s,l)})):null},t.prototype.getXYZ=function(t,e){return this.withDepth&&this.isReady?this.getXYZArray([{x:t,y:e}])[0]:null},t.prototype.getXYZRange=function(t,e){if(!this.withDepth||!this.isReady)return null;var n=this.getDepth(t,e);if(255===n)return null;var r=t/this.width*2-1,a=e/this.height*2-1,o=2*(n/255-.5),s=2*(Math.max(n-1,0)/255-.5),l=2*(Math.min(n+1,255)/255-.5);return{far:i.vec3.fromValues(r,a,l),near:i.vec3.fromValues(r,a,s),middle:i.vec3.fromValues(r,a,o)}},t.prototype.getId=function(t,e){if(!this.isReady)return null;var n=this.getPixel(t,e);return 0!==n[3]?n[0]+256*n[1]+256*n[2]*256:null},t.prototype.getIds=function(t){var e=this;return this.isReady?t.map((function(t){var n=e.getPixel(t.x,t.y);return 0!==n[3]?n[0]+256*n[1]+256*n[2]*256:null})):null},t.prototype.getImageDataArray=function(){if(!this.isReady)return null;var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindRenderbuffer(t.RENDERBUFFER,this.renderbuffer);var e=new Uint8Array(this.width*this.height*4);t.readPixels(0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,e);for(var n=new Uint8ClampedArray(this.width*this.height*4),r=0;r<this.height;r++){var i=e.subarray(r*this.width*4,(r+1)*this.width*4),a=this.height-r-1;n.set(new Uint8ClampedArray(i),a*this.width*4)}return n},t.prototype.get2DCanvas=function(){if(!this.isReady)return document.createElement("canvas");var t=this.getImageDataArray(),e=document.createElement("canvas");e.width=this.width,e.height=this.height;var n=e.getContext("2d"),r=n.createImageData(this.width,this.height);return r.data.set(new Uint8ClampedArray(t)),n.putImageData(r,0,0),e},t.prototype.getImageDataUrl=function(t){return void 0===t&&(t="png"),this.isReady?this.get2DCanvas().toDataURL("image/"+t):null},t.prototype.getImageDataBlob=function(t,e){void 0===e&&(e="png"),this.isReady&&this.get2DCanvas().toBlob(t,"image/"+e)},t.prototype.delete=function(){if(!this._disposed&&this.isReady){var t=this.gl;"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext&&t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0,t.DEPTH_ATTACHMENT]),t.deleteFramebuffer(this.framebuffer),t.deleteRenderbuffer(this.renderbuffer),t.deleteTexture(this.texture),t.deleteTexture(this.depthTexture),null!=this._depthReader&&this._depthReader.delete(),this._disposed=!0}},t}();e.Framebuffer=a},4932:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DrawMode=e.ModelHandle=void 0;var r,i=n(3948),a=n(8194),o=n(9438),s=n(6920),l=n(887),c=n(3753),u=n(5460),d=function(){function t(e,n,r){if(this._gl=e,this._model=n,this.tag=null,this.wcs=l.vec3.create(),this._stopped=!1,this.pickable=!0,this.clippable=!0,this._changed=!1,this._empty=!1,this._drawProductIds=null,this._clippingPlaneA=null,this._clippingPlaneB=null,this._clippingA=!1,this._clippingB=!1,this._glVersion=1,void 0===e||void 0===n)throw new Error("WebGL context and geometry model must be specified");if("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext&&(this._glVersion=2),r=r||function(t){},this.id=t._instancesNum++,this.meter=n.meter,this.wcs=this.getVec3(n.wcs),0===n.indices.length)return this._empty=!0,void(this._changed=!1);this.InitGlBuffersAndTextures(e),this.InitRegions(n.regions),this.InitGPU(e,n,r),this._changed=!0}return Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){this._stopped=t,this._changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isolatedProducts",{get:function(){return this._drawProductIds},set:function(t){this._drawProductIds=t,this._changed=!0},enumerable:!1,configurable:!0}),t.prototype.getRegion=function(t){var e=this,n=null;if(null!=this.isolatedProducts){var r=[];if(this.isolatedProducts.forEach((function(n){var i=e.getProductMap(n,t);i&&r.push(i)})),0===r.length)return null;var a=r.reduce((function(t,e){return null==t?e.bBox:u.BBox.union(t,e.bBox)}),null);return(n=new i.Region).population=r.length,n.bbox=new Float32Array(a),n.centre=new Float32Array([a[0]+a[3]/2,a[1]+a[4]/2,a[2]+a[5]/2]),n}n=i.Region.clone(this._region);var o=l.vec3.subtract(l.vec3.create(),this.wcs,t);n.centre=l.vec3.add(l.vec3.create(),o,this.getVec3(n.centre));var s=l.vec3.add(l.vec3.create(),o,this.getVec3(n.bbox.subarray(0,3)));return n.bbox.set(new Float32Array(s),0),n},Object.defineProperty(t.prototype,"changed",{get:function(){return this._changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gl1",{get:function(){return 1===this._glVersion?this._gl:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gl2",{get:function(){return 2===this._glVersion?this._gl:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clippingPlaneA",{get:function(){return this._clippingPlaneA},set:function(t){this._clippingPlaneA=t,this._clippingA=null!=t,this._changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clippingPlaneB",{get:function(){return this._clippingPlaneB},set:function(t){this._clippingPlaneB=t,this._clippingB=null!=t,this._changed=!0},enumerable:!1,configurable:!0}),t.prototype.InitRegions=function(t){var e=this;this.empty||(this._region=t[0],t.forEach((function(t){t.population>e._region.population&&(e._region=t)})),null==this._region&&(this._region=new i.Region,this._region.population=0,this._region.centre=new Float32Array([0,0,0]),this._region.bbox=new Float32Array([0,0,0,0,0,0])))},t.prototype.InitGlBuffersAndTextures=function(t){this.empty||(this._vertexTexture=t.createTexture(),this._matrixTexture=t.createTexture(),this._styleTexture=t.createTexture(),this._vertexTextureSize=0,this._matrixTextureSize=0,this._styleTextureSize=0,this._normalBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._productBuffer=t.createBuffer(),this._styleBuffer=t.createBuffer(),this._stateBuffer=t.createBuffer(),this._transformationBuffer=t.createBuffer())},t.prototype.setActive=function(t,e){if(!this.stopped&&!this.empty){var n=1===this._glVersion?this.gl1:this.gl2;this._vertexTextureSize>0&&(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this._vertexTexture),n.uniform1i(t.VertexSamplerUniform,1)),this._matrixTextureSize>0&&(n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,this._matrixTexture),n.uniform1i(t.MatrixSamplerUniform,2)),this._styleTextureSize>0&&(n.activeTexture(n.TEXTURE3),n.bindTexture(n.TEXTURE_2D,this._styleTexture),n.uniform1i(t.StyleSamplerUniform,3)),n.bindBuffer(n.ARRAY_BUFFER,this._normalBuffer),n.vertexAttribPointer(t.NormalAttrPointer,2,n.UNSIGNED_BYTE,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._indexBuffer),n.vertexAttribPointer(t.IndexlAttrPointer,1,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._productBuffer),n.vertexAttribPointer(t.ProductAttrPointer,1,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._stateBuffer),n.vertexAttribPointer(t.StateAttrPointer,2,n.UNSIGNED_BYTE,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._styleBuffer),n.vertexAttribPointer(t.StyleAttrPointer,1,n.UNSIGNED_SHORT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._transformationBuffer),n.vertexAttribPointer(t.TransformationAttrPointer,1,n.FLOAT,!1,0,0),n.uniform1f(t.VertexTextureSizeUniform,this._vertexTextureSize),n.uniform1f(t.MatrixTextureSizeUniform,this._matrixTextureSize),n.uniform1f(t.StyleTextureSizeUniform,this._styleTextureSize),n.uniform1f(t.MeterUniform,this.meter);var r=l.vec3.subtract(l.vec3.create(),this.wcs,e);if(n.uniform3fv(t.WcsUniform,r),n.uniform1i(t.ClippingAUniform,this._clippingA?1:0),n.uniform1i(t.ClippingBUniform,this._clippingB?1:0),this._clippingA){var i=this.transformPlane(this._clippingPlaneA,e);n.uniform4fv(t.ClippingPlaneAUniform,i)}this._clippingB&&(i=this.transformPlane(this._clippingPlaneB,e),n.uniform4fv(t.ClippingPlaneBUniform,i))}},t.prototype.transformPlane=function(t,e){var n=l.vec3.len(t),r=t[0],i=t[1],a=t[2],o=t[3],s=r*-o/n,c=i*-o/n,u=a*-o/n;return o=0-r*(s-=e[0])-i*(c-=e[1])-a*(u-=e[2]),new Float32Array([r,i,a,o])},t.prototype.draw=function(t,e){var n=this;if(this._changed=!1,!this.stopped&&!this.empty){var i=this._gl,a=this.isolatedProducts&&this.isolatedProducts.length>0?this.isolatedProducts.reduce((function(t,e){var r=n.getProductMap(e);return r&&t.push(r),t}),new Array):null;if(null==a||0!==a.length)if(null!=t)if(t===r.SOLID&&this._model.transparentIndex>0)if(null==a)if(null==e||100===e||null==this._model.breaks[e])i.drawArrays(i.TRIANGLES,0,this._model.transparentIndex);else{var o=this._model.breaks[e];i.drawArrays(i.TRIANGLES,0,o[0]+1)}else a.forEach((function(t){t.spans.filter((function(t){return t[1]<=n._model.transparentIndex})).forEach((function(t){i.drawArrays(i.TRIANGLES,t[0],t[1]-t[0])}))}));else t===r.TRANSPARENT&&this._model.transparentIndex<this._numberOfIndices&&(i.depthMask(!1),null==a?null==e||100===e||null==this._model.breaks[e]?i.drawArrays(i.TRIANGLES,this._model.transparentIndex,this._numberOfIndices-this._model.transparentIndex):(o=this._model.breaks[e],i.drawArrays(i.TRIANGLES,o[1],this._numberOfIndices-o[1])):a.forEach((function(t){t.spans.filter((function(t){return t[0]>=n._model.transparentIndex})).forEach((function(t){i.drawArrays(i.TRIANGLES,t[0],t[1]-t[0])}))})),i.depthMask(!0));else null==a?i.drawArrays(i.TRIANGLES,0,this._numberOfIndices):a.forEach((function(t){t.spans.forEach((function(t){i.drawArrays(i.TRIANGLES,t[0],t[1]-t[0])}))}))}},t.prototype.getProductId=function(t){return this.empty?null:this._model.productIdLookup[t]},t.prototype.getProductMap=function(t,e){if(this.empty)return null;var n=this._model.productMaps[t];if(null!=n){if(null!=e){n=c.ProductMap.clone(n);var r=this.getVec3(n.bBox.subarray(0,3)),i=l.vec3.subtract(l.vec3.create(),this.wcs,e),a=l.vec3.add(l.vec3.create(),r,i);n.bBox.set(a,0)}return n}return null},t.prototype.getProductMaps=function(t){var e=this,n=new Array;return this.empty||t.forEach((function(t){var r=e._model.productMaps[t];null!=r&&n.push(r)})),n},t.prototype.getProductsOfType=function(t){var e=this,n=[];if(this.empty)return n;var r=o.Product.getAllSubTypes(t);return Object.getOwnPropertyNames(this._model.productMaps).forEach((function(t){var i=e._model.productMaps[t];r[i.type]&&n.push(i)})),n},t.prototype.unload=function(){if(this.empty)return null;var t=this._gl;t.deleteTexture(this._vertexTexture),t.deleteTexture(this._matrixTexture),t.deleteTexture(this._styleTexture),t.deleteBuffer(this._normalBuffer),t.deleteBuffer(this._indexBuffer),t.deleteBuffer(this._productBuffer),t.deleteBuffer(this._styleBuffer),t.deleteBuffer(this._stateBuffer),t.deleteBuffer(this._transformationBuffer)},t.prototype.InitGPU=function(e,n,r){if(this.empty)return null;var i=function(t){var e={message:"Loading data into GPU",percent:t,type:s.MessageType.PROGRESS};r(e)};this._numberOfIndices=n.indices.length,this.bufferData(this._normalBuffer,n.normals),i(10),this.bufferData(this._indexBuffer,n.indices),i(30),this.bufferData(this._productBuffer,n.products),i(40),this.bufferData(this._stateBuffer,n.states),i(50),this.bufferData(this._transformationBuffer,n.transformations),i(60),this.bufferData(this._styleBuffer,n.styleIndices),this._vertexTextureSize=t.bufferTexture(e,this._vertexTexture,n.vertices,3),i(80),this._matrixTextureSize=t.bufferTexture(e,this._matrixTexture,n.matrices,4),i(90),this._styleTextureSize=t.bufferTexture(e,this._styleTexture,n.styles),i(100),n.normals=null,n.indices=null,n.products=null,n.transformations=null,n.styleIndices=null,n.vertices=null,n.matrices=null;var a={message:"Loading data into GPU",percent:100,type:s.MessageType.COMPLETED};r(a)},t.prototype.bufferData=function(t,e){var n;1===this._glVersion&&((n=this.gl1).bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),2===this._glVersion&&((n=this.gl2).bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW))},t.prototype.getVec3=function(t){return l.vec3.fromValues(t[0],t[1],t[2])},t.bufferTexture=function(t,e,n,r){if(0===n.length){t.bindTexture(t.TEXTURE_2D,e);var i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.UNSIGNED_BYTE,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),2}var a=n instanceof Float32Array,o=0,s=t.getParameter(t.MAX_TEXTURE_SIZE);if(a)o=Math.ceil(Math.sqrt(Math.ceil(n.length/r)))+1;else{var l=Math.sqrt(n.byteLength/4);o=Math.ceil(l)}if(0===o)return 0;if(o>s)throw new Error("Too much data! It cannot fit into the texture.");if(t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),n instanceof Float32Array){if(i=null,o*o*r!==n.length?(i=new Float32Array(o*o*r)).set(n):i=n,t instanceof WebGLRenderingContext){var c=null;switch(r){case 1:c=t.ALPHA;break;case 3:c=t.RGB;break;case 4:c=t.RGBA}t.texImage2D(t.TEXTURE_2D,0,c,o,o,0,c,t.FLOAT,i)}if("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext){var u=t,d=null,h=null;switch(r){case 1:h=u.RED,d=u.R32F;break;case 3:h=u.RGB,d=u.RGB32F;break;case 4:h=u.RGBA,d=u.RGBA32F}u.texImage2D(u.TEXTURE_2D,0,d,o,o,0,h,u.FLOAT,i)}}else t.texImage2D(t.TEXTURE_2D,0,t.RGBA,o,o,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(n.buffer));return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o},t.prototype.getState=function(t){var e=this.getFirstSpan(t);return null==e?null:this._model.states[2*e[0]]},t.prototype.getStates=function(){var t=this,e=[];return Object.getOwnPropertyNames(this._model.productMaps).forEach((function(n){var r=t._model.productMaps[+n];null!=r.states&&0!==r.states.length&&(1===r.states.length&&r.states[0]===a.State.UNDEFINED||e.push({id:r.productID,states:r.states.slice(0)}))})),e},t.prototype.getStyle=function(t){var e=this.getFirstSpan(t);return null==e?null:this._model.states[2*e[0]+1]},t.prototype.getFirstSpan=function(t){if(this.empty)return null;if(void 0===t)throw new Error("id must be defined");var e=this.getProductMap(t);if(null===e)return null;var n=e.spans[0];return void 0===n?null:n},t.prototype.addState=function(t,e){var n=this;this.empty||(this.checkStateArgs(t,e),this.getMaps(e).forEach((function(e){c.ProductMap.addState(e,t);var r=c.ProductMap.getState(e);e.spans.forEach((function(t){for(var e=t[0];e<t[1];e++)n._model.states[2*e]=r}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0)},t.prototype.setState=function(t,e){var n=this;this.empty||(this.checkStateArgs(t,e),this.getMaps(e).forEach((function(e){e.states=[t],e.spans.forEach((function(e){for(var r=e[0];r<e[1];r++)n._model.states[2*r]=t}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0)},t.prototype.clearHighlighting=function(){var t=this;Object.getOwnPropertyNames(this._model.productMaps).forEach((function(e){var n=t._model.productMaps[+e];c.ProductMap.removeState(n,a.State.HIGHLIGHTED);var r=c.ProductMap.getState(n);n.spans.forEach((function(e){for(var n=e[0];n<e[1];n++)t._model.states[2*n]=r}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.removeState=function(t,e){var n=this;this.empty||(this.checkStateArgs(t,e),this.getMaps(e).forEach((function(e){c.ProductMap.removeState(e,t);var r=c.ProductMap.getState(e);e.spans.forEach((function(t){for(var e=t[0];e<t[1];e++)n._model.states[2*e]=r}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0)},t.prototype.checkStateArgs=function(t,e){if("number"!=typeof t||t<0||t>255)throw new Error("You have to specify state as an ID of state or index in style pallete.");if(void 0===e)throw new Error("You have to specify products as an array of product IDs or as a product type ID")},t.prototype.resetState=function(t){var e=this;if(this.empty)return null;if(null==t){Object.getOwnPropertyNames(this._model.productMaps).forEach((function(t){e._model.productMaps[+t].states=[]}));for(var n=0;n<this._model.states.length;n+=2)this._model.states[n]=a.State.UNDEFINED}else this.getMaps(t).forEach((function(t){t.states=[],t.spans.forEach((function(t){for(var n=t[0];n<t[1];n++)e._model.states[2*n]=a.State.UNDEFINED}))}));this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.getProductsWithState=function(t){var e=this,n=[],r={},i=null!=this.isolatedProducts&&this.isolatedProducts.length>0;return i&&this.isolatedProducts.forEach((function(t){return r[t]=!0})),Object.getOwnPropertyNames(this._model.productMaps).forEach((function(a){var o=e._model.productMaps[a];-1!==o.states.indexOf(t)&&(i&&!r[o.productID]||n.push({id:o.productID,model:e.id}))})),n},t.prototype.setStyle=function(t,e){var n=this;if(this.empty)return null;if("number"!=typeof t&&t<0&&t>255)throw new Error("You have to specify state as an ID of state or index in style pallete.");if(void 0===e)throw new Error("You have to specify products as an array of product IDs or as a product type ID");this.getMaps(e).forEach((function(e){e.spans.forEach((function(e){for(var r=e[0];r<e[1];r++)n._model.states[2*r+1]=t}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.getMaps=function(t){var e=this,n=[];if("number"==typeof t){var r=o.Product.getAllSubTypes(t);Object.getOwnPropertyNames(this._model.productMaps).forEach((function(t){var i=e._model.productMaps[t];r[i.type]&&n.push(i)}))}else t.forEach((function(t){var r=e.getProductMap(t);null!=r&&n.push(r)}));return n},t.prototype.resetStyles=function(){if(this.empty)return null;for(var t=0;t<this._model.states.length;t+=2)this._model.states[t+1]=a.State.UNSTYLED;this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.getModelState=function(){var t=[];if(this.empty)return t;var e=this._model.productMaps;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=r.spans[0];if(void 0!==i){var a=this._model.states[2*i[0]],o=this._model.states[2*i[0]+1];t.push([r.productID,a+(o<<8)])}}return t},t.prototype.restoreModelState=function(t){var e=this;if(this.empty)return null;t.forEach((function(t){var n=t[0],r=t[1]>>8,i=t[1]-(r<<8),a=e.getProductMap(n);null!=a&&a.spans.forEach((function(t){for(var n=t[0];n<t[1];n++)e._model.states[2*n]=i,e._model.states[2*n+1]=r}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t._instancesNum=1,t}();e.ModelHandle=d,function(t){t[t.SOLID=0]="SOLID",t[t.TRANSPARENT=1]="TRANSPARENT"}(r=e.DrawMode||(e.DrawMode={}))},2067:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ModelPointers=void 0,e.ModelPointers=function(t,e){this.NormalAttrPointer=t.getAttribLocation(e,"aNormal"),this.IndexlAttrPointer=t.getAttribLocation(e,"aVertexIndex"),this.ProductAttrPointer=t.getAttribLocation(e,"aProduct"),this.StateAttrPointer=t.getAttribLocation(e,"aState"),this.StyleAttrPointer=t.getAttribLocation(e,"aStyleIndex"),this.TransformationAttrPointer=t.getAttribLocation(e,"aTransformationIndex"),this.VertexSamplerUniform=t.getUniformLocation(e,"uVertexSampler"),this.MatrixSamplerUniform=t.getUniformLocation(e,"uMatrixSampler"),this.StyleSamplerUniform=t.getUniformLocation(e,"uStyleSampler"),this.VertexTextureSizeUniform=t.getUniformLocation(e,"uVertexTextureSize"),this.MatrixTextureSizeUniform=t.getUniformLocation(e,"uMatrixTextureSize"),this.StyleTextureSizeUniform=t.getUniformLocation(e,"uStyleTextureSize"),this.ClippingPlaneAUniform=t.getUniformLocation(e,"uClippingPlaneA"),this.ClippingAUniform=t.getUniformLocation(e,"uClippingA"),this.ClippingPlaneBUniform=t.getUniformLocation(e,"uClippingPlaneB"),this.ClippingBUniform=t.getUniformLocation(e,"uClippingB"),this.MeterUniform=t.getUniformLocation(e,"uMeter"),this.WcsUniform=t.getUniformLocation(e,"uWcs"),t.enableVertexAttribArray(this.NormalAttrPointer),t.enableVertexAttribArray(this.IndexlAttrPointer),t.enableVertexAttribArray(this.ProductAttrPointer),t.enableVertexAttribArray(this.StateAttrPointer),t.enableVertexAttribArray(this.StyleAttrPointer),t.enableVertexAttribArray(this.TransformationAttrPointer)}},9549:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Animations=e.EasingType=void 0;var r,i=n(887);!function(t){t[t.LINEAR=0]="LINEAR",t[t.SINUS=1]="SINUS",t[t.SINUS2=2]="SINUS2",t[t.CIRCLE=3]="CIRCLE"}(r=e.EasingType||(e.EasingType={}));var a=function(){function t(t){var e=this;this.viewer=t,this._rotationOn=!1,this.setTimeout=window.setTimeout.bind(window),this.requestAnimationFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window),t.canvas.addEventListener("mousedown",(function(){return e.clear()})),t.canvas.addEventListener("touchstart",(function(){return e.clear()}))}return t.prototype.clear=function(){t.viewQueue=[],t.zoomQueue=[],this._rotationOn=!1},t.prototype.startRotation=function(){var t=this;return this._rotationOn?new Promise((function(t,e){t()})):(this._rotationOn=!0,new Promise((function(e,n){var r=function(){t._rotationOn?(t.viewer.mvMatrix=i.mat4.rotateZ(i.mat4.create(),t.viewer.mvMatrix,.2*Math.PI/180),t.requestAnimationFrame(r)):e()};r()})))},t.prototype.stopRotation=function(){this._rotationOn=!1},t.prototype.viewTo=function(e,n,a){var o=this;return void 0===a&&(a=r.SINUS2),new Promise((function(s,l){if(n<=0)return o.viewer.mvMatrix=e.mv,o.viewer.cameraProperties.height=e.height,void s();var c;if(c=t.viewQueue.length>0?t.viewQueue[t.viewQueue.length-1]:{mv:i.mat4.copy(i.mat4.create(),o.viewer.mvMatrix),height:o.viewer.cameraProperties.height},i.mat4.equals(c.mv,e.mv)&&Math.abs(c.height-e.height)<1e-6)s();else{var u=i.mat4.getRotation(i.quat.create(),c.mv),d=i.mat4.getScaling(i.vec3.create(),c.mv),h=i.mat4.getTranslation(i.vec3.create(),c.mv),A=null,f=i.mat4.getRotation(i.quat.create(),e.mv),p=i.mat4.getScaling(i.vec3.create(),e.mv),I=i.mat4.getTranslation(i.vec3.create(),e.mv);t.viewQueue.push(e);var m=function(){if(t.viewQueue[0]!==e)return null!=t.viewQueue.filter((function(t){return t===e})).pop()?void o.requestAnimationFrame(m):void s();null==A&&(A=Date.now());var l=Date.now();if(!(l<A+n))return o.viewer.mvMatrix=e.mv,o.viewer.cameraProperties.height=e.height,t.viewQueue.shift(),void s();var g=(l-A)/n;switch(a){case r.LINEAR:break;case r.CIRCLE:g=o.getCircleEasing(g);break;case r.SINUS:g=o.getSinEasing(g);break;case r.SINUS2:g=o.getSinEasing(g),g=o.getSinEasing(g)}var v=i.quat.slerp(i.quat.create(),u,f,g),E=i.vec3.lerp(i.vec3.create(),d,p,g),T=i.vec3.lerp(i.vec3.create(),h,I,g),C=(e.height-c.height)*g,b=i.mat4.fromRotationTranslationScaleOrigin(i.mat4.create(),v,T,E,i.vec3.create());o.viewer.mvMatrix=b,o.viewer.cameraProperties.height=c.height+C,o.requestAnimationFrame(m)};m()}}))},t.prototype.addZoom=function(e,n,r){var a=this,o=i.mat4.copy(i.mat4.create(),this.viewer.mvMatrix),s=this.viewer.cameraProperties.height;if(t.zoomQueue.length>0){var l=t.zoomQueue[t.zoomQueue.length-1];o=l.mv,s=l.height}var c=i.vec3.create();if(r)r=i.vec3.normalize(i.vec3.create(),r),i.vec3.negate(c,r);else{var u=i.mat4.invert(i.mat4.create(),o),d=i.mat4.getRotation(i.quat.create(),u),h=i.vec3.transformQuat(i.vec3.create(),i.vec3.fromValues(0,0,-1),d);i.vec3.negate(c,h)}var A=i.vec3.scale(i.vec3.create(),c,e),f=this.viewer.cameraProperties.fov*Math.PI/180,p=2*e*Math.tan(f/2),I=2*this.viewer.cameraProperties.near*Math.tan(f/2);s-p<I&&(p=0);var m={mv:i.mat4.translate(i.mat4.create(),o,A),height:s-p};return new Promise((function(e,r){if(n<=0)return t.zoomQueue=[],a.viewer.mvMatrix=m.mv,a.viewer.cameraProperties.height=m.height,void e();var l=null,c=A;t.zoomQueue.push(m);var u=function(){if(t.zoomQueue[0]!==m)return null!=t.zoomQueue.filter((function(t){return t===m})).pop()?void a.requestAnimationFrame(u):void e();null==l&&(l=Date.now());var r=Date.now();if(!(r<l+n))return a.viewer.mvMatrix=m.mv,a.viewer.cameraProperties.height=m.height,t.zoomQueue.shift(),void e();var d=(r-l)/n,h=i.vec3.lerp(i.vec3.create(),i.vec3.create(),c,d),A=p*d;a.viewer.mvMatrix=i.mat4.translate(i.mat4.create(),o,h),a.viewer.cameraProperties.height=s-A,a.requestAnimationFrame(u)};u()}))},t.prototype.getCircleEasing=function(t){if(t<=.5){var e=2*t;return(1-Math.sqrt(1-e*e))/2}return e=2*t-2,(1+Math.sqrt(1-e*e))/2},t.prototype.getSinEasing=function(t){var e=t*Math.PI-Math.PI/2;return.5*Math.sin(e)+.5},t.viewQueue=[],t.zoomQueue=[],t}();e.Animations=a},6235:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CameraAdjustment=void 0;var r=n(9499),i=n(887),a=n(6413),o=function(){function t(t,e,n){this.viewer=t,this.request=e,this.density=n,this.lastMvChange=0,this.dirty=!0,this.stopped=!0}return t.prototype.stop=function(){this.stopped=!0},t.prototype.watch=function(t){var e=this;if(void 0===t&&(t=500),this.viewer.hasDepthSupport){var n=this.request,r=this.viewer;this.stopped=!1;var i=function(){if(!e.stopped){if(!(Date.now()-e.lastMvChange<t+20))return r.mvMatrixAge<t?(e.dirty=!0,void n(i)):void(r.mvMatrixAge>t&&!e.dirty?n(i):r.height?(e.adjust(),e.dirty=!1,n(i)):n(i));n(i)}};n(i)}},t.prototype.adjust=function(t){void 0===t&&(t=null);var e=this.viewer;if(t=t||this.density,e.hasDepthSupport&&e.isRunning&&0!==e.activeHandles.length){var n=e.width/4,o=e.height/4;if(0!==n&&0!==o){var s=new r.Framebuffer(e.gl,n,o,!0,this.viewer.glVersion);e.draw(s,!0);for(var l=[],c=n/(t+1),u=o/(t+1),d=1;d<t+1;d++)for(var h=d*c,A=1;A<t+1;A++){var f=A*u;l.push({x:h,y:f})}var p=l.map((function(t){return 1})),I=s.getXYZArray(l).map((function(t,e){return null==t?null:{point:t,weight:p[e]}})).filter((function(t){return null!=t}));if(0!==I.length){var m=e.cameraProperties.getProjectionMatrix(n,o),g=i.mat4.invert(i.mat4.create(),m),v=I.map((function(t){return{point:i.vec3.transformMat4(i.vec3.create(),t.point,g),weight:t.weight}})).map((function(t){return{distance:-t.point[2],weight:t.weight}})),E=this.trimmedMean(v),T=e.cameraProperties.fov*Math.PI/180;if(e.camera===a.CameraType.PERSPECTIVE){var C=2*E*Math.tan(T/2);e.cameraProperties.height=C}if(e.camera===a.CameraType.ORTHOGONAL){var b=i.vec3.normalize(i.vec3.create(),e.getCameraDirection()),R=e.cameraProperties.height/(2*Math.tan(T/2)),M=R/E;if(M>1.1||M<.9){var y=R-E,F=i.vec3.scale(i.vec3.create(),b,y);e.mvMatrix=i.mat4.translate(i.mat4.create(),e.mvMatrix,F),this.lastMvChange=Date.now()}}}}}},t.prototype.trimmedMean=function(t){if(t.length>100){t.sort((function(t,e){return t.distance-e.distance}));var e=Math.floor(t.length/10);t=t.slice(e,t.length-e)}return t.reduce((function(t,e){return t+e.distance*e.weight}),0)/t.reduce((function(t,e){return t+e.weight}),0)},t}();e.CameraAdjustment=o},810:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardNavigation=void 0;var r=n(887),i=function(){function t(){}return t.initKeyboardEvents=function(t){document.addEventListener("keydown",(function(e){if("walk"===t.navigationMode){var n=function(){var e=t.getCameraDirection(),n=t.getCameraPosition(),i=10*t.unitsInMeter;return r.vec3.add(r.vec3.create(),n,r.vec3.scale(r.vec3.create(),e,i))},i=!0===e.shiftKey?3:1;switch(e.code){case"KeyW":t.navigate("walk",0,2*i,r.vec3.create());break;case"KeyS":t.navigate("walk",0,-2*i,r.vec3.create());break;case"KeyA":t.navigate("pan",4*i,0,n());break;case"KeyD":t.navigate("pan",-4*i,0,n());break;case"KeyR":case"ArrowUp":t.navigate("pan",0,4*i,n());break;case"KeyF":case"ArrowDown":t.navigate("pan",0,-4*i,n());break;case"KeyQ":case"ArrowLeft":t.navigate("look-around",2,0,t.getCameraPosition());break;case"KeyE":case"ArrowRight":t.navigate("look-around",-2,0,t.getCameraPosition())}}}),!1)},t}();e.KeyboardNavigation=i},4802:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MouseNavigation=void 0;var r=n(887),i=function(){function t(){}return t.initMouseEvents=function(t){var e=!1,n=null,i=null,a=null,o=null,s="L",l=-1,c=-1,u=null,d=!1,h=r.vec3.create(),A=function(e){"walk"===t.navigationMode&&t.navigate("look-at",.5*e.movementX,.5*e.movementY,h)},f=null,p=null,I=0,m=t.canvas.requestPointerLock;null!=m&&(m=m.bind(t.canvas),t.canvas.onclick=function(){"walk"!==t.navigationMode||d||m()}),document.addEventListener("pointerlockchange",(function(e){document.pointerLockElement===t.canvas?d||(d=!0,t.canvas.addEventListener("mousemove",A,!1)):(d=!1,t.canvas.removeEventListener("mousemove",A,!1))}),!1);var g=0;t.canvas.addEventListener("mousedown",(function(d){return function(d){e=!0,n=d.clientX,i=d.clientY,a=d.clientX,o=d.clientY;var A=t.canvas.getBoundingClientRect(),f=a-A.left,p=t.height-(o-A.top),I=t.getEventData(f,p);if(null!=I){if(l=I.id,c=I.model,u=I.xyz,null==I||null==I.id||null==I.model){var m=t.getMergedRegion();if(null==m||null==m.centre)return void(e=!1);h=r.vec3.fromValues(m.centre[0],m.centre[1],m.centre[2])}else if(null==I.xyz){var g=t.getTargetBoundingBox(I.id,I.model);h=r.vec3.fromValues(g[0]+g[3]/2,g[1]+g[4]/2,g[2]+g[5]/2)}else h=I.xyz;switch(d.button){case 0:s="left";break;case 1:s="middle";break;case 2:s="right";break;default:s="left"}t.disableTextSelection()}else e=!1}(d)}),!0),t.canvas.addEventListener("wheel",(function(e){return function(e){if("none"!==t.navigationMode){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),I++;var n=r.vec2.fromValues(e.clientX,e.clientY);if(null==p||r.vec2.dist(p,n)>5||I>10){if(null==(f=t.getInteractionOrigin(e))){var i=t.getMergedRegion(),a=r.vec3.fromValues(i.centre[0],i.centre[1],i.centre[2]),o=t.getCameraPosition(),s=r.vec3.distance(a,o),l=r.mat4.invert(r.mat4.create(),t.mvMatrix),c=r.mat4.getRotation(r.quat.create(),l),u=r.vec3.normalize(r.vec3.create(),r.vec3.transformQuat(r.vec3.create(),[0,0,-1],c)),d=r.vec3.scale(r.vec3.create(),u,s);f=r.vec3.add(r.vec3.create(),d,o)}p=n,I=0}var h=function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1};t.navigate("zoom",-1*h(e.deltaX),-1*h(e.deltaY),f)}}(e)}),!0),window.addEventListener("mouseup",(function(n){return function(n){if(e){e=!1;var r=n.clientX,i=n.clientY,d=Math.abs(r-a),h=Math.abs(i-o);if(d<3&&h<3&&"left"===s){t.fire("pick",{id:l,model:c,event:n,xyz:u});var A=(new Date).getTime();A-g<250&&t.fire("dblclick",{id:l,model:c,event:n,xyz:u}),g=A}t.enableTextSelection()}}(n)}),!0),window.addEventListener("mousemove",(function(r){return function(r){if(e&&"none"!==t.navigationMode){var a=r.clientX,o=r.clientY,l=a-n,c=o-i;if(n=a,i=o,"left"===s)if(r.shiftKey)t.navigate("pan",l,c,h);else switch(t.navigationMode){case"free-orbit":t.navigate("free-orbit",l,c,h);break;case"fixed-orbit":case"orbit":t.navigate("orbit",l,c,h);break;case"pan":t.navigate("pan",l,c,h);break;case"zoom":t.navigate("zoom",l,c,h);break;case"look-around":t.navigate("look-around",l,c,h)}"middle"!==s&&"right"!==s||t.navigate("pan",l,c,h)}}(r)}),!0)},t}();e.MouseNavigation=i},8948:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PreflightCheck=void 0;var r=n(887),i=function(){function t(){}return t.findView=function(t,e,n){if(null==e||0===e.length)return null;var i=t.getTargetsBoundingBox(e),a=[{dir:[1,0,0],up:[0,0,1]},{dir:[0,1,0],up:[0,0,1]},{dir:[-1,0,0],up:[0,0,1]},{dir:[0,-1,0],up:[0,0,1]},{dir:[1,1,0],up:[0,0,1]},{dir:[-1,-1,0],up:[0,0,1]},{dir:[-1,1,0],up:[0,0,1]},{dir:[1,-1,0],up:[0,0,1]}].map((function(t){return{dir:r.vec3.normalize(r.vec3.create(),t.dir),up:r.vec3.normalize(r.vec3.create(),t.up)}})),o=i[3]*i[4],s=i[3]*i[5],l=i[4]*i[5];o>s&&o>l&&(a.push({dir:r.vec3.fromValues(0,0,-1),up:r.vec3.fromValues(0,1,0)}),a.push({dir:r.vec3.fromValues(0,0,-1),up:r.vec3.fromValues(1,0,0)}));for(var c=t.width/n,u=t.height/n,d=[],h=1;h<n;h++)for(var A=1;A<10;A++)d.push({x:h*c,y:A*u});var f=e.reduce((function(t,e){return t[e.model+"."+e.id]=!0,t}),{}),p=t.isRunning;t.stop();var I=t.mvMatrix,m=t.cameraProperties.height;try{var g=r.vec3.fromValues(i[0]+i[3]/2,i[1]+i[4]/2,i[2]+i[5]/2),v=a.map((function(e){return t.getDistanceAndHeight(i,e.dir,e.up)})),E=v.map((function(t,e){var n=r.vec3.negate(r.vec3.create(),a[e].dir),i=r.vec3.scale(r.vec3.create(),n,t.distance),o=r.vec3.add(r.vec3.create(),i,g);return r.mat4.lookAt(r.mat4.create(),o,g,a[e].up)})),T=E.map((function(e,n){return t.mvMatrix=e,t.cameraProperties.height=v[n].height,t.getData(d).map((function(t){return null!=t?t.model+"."+t.id:null}))})).map((function(t){return t.reduce((function(t,e){return null==e||!0===f[e]&&(t.count++,null==t.types[e]?t.types[e]=1:t.types[e]=t.types[e]+1),t}),{count:0,types:{}})})).map((function(t){return t.count*Math.pow(Object.getOwnPropertyNames(t.types).length,2)})),C=0,b=0;return T.forEach((function(t,e){t>b&&(b=t,C=e)})),b>0?{mv:E[C],height:v[C].height}:null}finally{t.mvMatrix=I,t.cameraProperties.height=m,p&&t.start()}},t}();e.PreflightCheck=i},5771:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TouchNavigation=void 0;var r=n(887),i=function(){function t(){}return t.initTouchNavigationEvents=function(t){var e,n,i,a,o=r.vec3.create();t.canvas.addEventListener("touchstart",(function(s){return function(s){s.cancelable&&s.preventDefault(),s.touches.length>=1&&(e=s.touches[0].clientX,n=s.touches[0].clientY),s.touches.length>=2&&(i=s.touches[1].clientX,a=s.touches[1].clientY);var l=t.getEventDataFromEvent(s.touches[0]);if(null==l||null==l.id||null==l.model){var c=t.getMergedRegion();o=r.vec3.fromValues(c.centre[0],c.centre[1],c.centre[2])}else if(null==l.xyz){var u=t.getTargetBoundingBox(l.id,l.model);o=r.vec3.fromValues(u[0]+u[3]/2,u[1]+u[4]/2,u[2]+u[5]/2)}else o=l.xyz}(s)}),!0),t.canvas.addEventListener("touchmove",(function(r){return function(r){if(r.cancelable&&r.preventDefault(),"none"!==t.navigationMode&&r.touches)if(1===r.touches.length){var s=r.touches[0].clientX-e,l=r.touches[0].clientY-n;e=r.touches[0].clientX,n=r.touches[0].clientY,t.navigate("orbit",s/1.5,l/1.5,o)}else if(r.touches.length>=2){var c=Math.sqrt((e-i)*(e-i)+(n-a)*(n-a)),u=[(e+i)/2,(n+a)/2];e=r.touches[0].clientX,n=r.touches[0].clientY,i=r.touches[1].clientX,a=r.touches[1].clientY;var d=Math.sqrt((e-i)*(e-i)+(n-a)*(n-a)),h=[(e+i)/2,(n+a)/2];if(2===r.touches.length){var A=c-d;A>10?t.navigate("zoom",-1.5,-1.5,o):A<-10&&t.navigate("zoom",1.5,1.5,o)}var f=h[0]-u[0],p=h[1]-u[1];t.navigate("pan",f,p,o)}}(r)}),!0)},t.initTouchTapEvents=function(t){var e,n,r=!1,i=new Date,a={id:null,model:null,xyz:null};t.canvas.addEventListener("touchstart",(function(o){return function(o){if(1===o.touches.length){r=!0,e=o.touches[0].clientX,n=o.touches[0].clientY;var s=t.canvas.getBoundingClientRect(),l=e-s.left,c=t.height-(n-s.top);a=t.getEventData(l,c);var u=new Date;u.getTime()-i.getTime()<200&&t.fire("dblclick",{id:a.id,model:a.model,event:o,xyz:a.xyz}),i=u,t.fire("mousedown",{id:a.id,model:a.model,event:o,xyz:a.xyz}),t.disableTextSelection()}}(o)}),!0),t.canvas.addEventListener("touchend",(function(i){return function(i){if(r){r=!1;var o=i.changedTouches[0].clientX,s=i.changedTouches[0].clientY,l=Math.abs(o-e),c=Math.abs(s-n);l<3&&c<3&&t.fire("pick",{id:a.id,model:a.model,event:i,xyz:a.xyz}),t.enableTextSelection()}}(i)}),!0)},t}();e.TouchNavigation=i},1675:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.PerformanceRating=void 0,(n=e.PerformanceRating||(e.PerformanceRating={}))[n.VERY_LOW=0]="VERY_LOW",n[n.LOW=1]="LOW",n[n.MEDIUM=2]="MEDIUM",n[n.HIGH=3]="HIGH"},5637:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=void 0;var r=n(5585),i=function(){function t(){this.initialized=!1,this.factor=1.5,this.zFactor=5,this.numberOfLines=10,this.colour=[0,0,0,.6],this._stopped=!1}return Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){this._stopped=t,this.viewer&&this.viewer.draw()},enumerable:!1,configurable:!0}),t.prototype.init=function(t){this.viewer=t;var e=t.gl;this._initShader(),e.useProgram(this.program),this.vertex_buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertex_buffer),this.coordinatesAttributePointer=e.getAttribLocation(this.program,"coordinates"),e.vertexAttribPointer(this.coordinatesAttributePointer,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.coordinatesAttributePointer),this.colourUniformPointer=e.getUniformLocation(this.program,"uColour"),this.pUniformPointer=e.getUniformLocation(this.program,"uPMatrix"),this.mvUniformPointer=e.getUniformLocation(this.program,"uMvMatrix"),this.initialized=!0},t.prototype._initShader=function(){var t=this.viewer.gl,e=this.viewer,n=function(n,r){if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(n);return e.error(i),null}},i=t.createShader(t.FRAGMENT_SHADER);n(i,"precision mediump float; uniform vec4 uColour;void main(void) {gl_FragColor = uColour;}");var a=t.createShader(t.VERTEX_SHADER);n(a,r.vshader),this.program=t.createProgram(),t.attachShader(this.program,a),t.attachShader(this.program,i),t.linkProgram(this.program),t.getProgramParameter(this.program,t.LINK_STATUS)||e.error("Could not initialise shaders for a navigation cube plugin")},t.prototype.onAfterDraw=function(t,e){if(this.initialized&&!this.stopped){var n=this.viewer.getMergedRegion();if(n&&!(n.population<1)){var r=Math.max(n.bbox[3],n.bbox[4])*this.factor;if(!(r<.1)){for(var i=r/(this.numberOfLines+1),a=n.bbox[0]+n.bbox[3]/2-r/2,o=n.bbox[1]+n.bbox[4]/2-r/2,s=n.bbox[2]-n.bbox[5]/this.zFactor,l=[],c=1;c<this.numberOfLines+1;c++)l.push(a),l.push(o+c*i),l.push(s),l.push(a+r),l.push(o+c*i),l.push(s);for(c=1;c<this.numberOfLines+1;c++)l.push(a+c*i),l.push(o),l.push(s),l.push(a+c*i),l.push(o+r),l.push(s);var u=this.viewer.gl;u.useProgram(this.program),u.uniformMatrix4fv(this.pUniformPointer,!1,this.viewer.pMatrix),u.uniformMatrix4fv(this.mvUniformPointer,!1,this.viewer.mvMatrix),u.uniform4fv(this.colourUniformPointer,this.colour),u.bindBuffer(u.ARRAY_BUFFER,this.vertex_buffer),u.bufferData(u.ARRAY_BUFFER,new Float32Array(l),u.STATIC_DRAW),u.bindBuffer(u.ARRAY_BUFFER,this.vertex_buffer),u.vertexAttribPointer(this.coordinatesAttributePointer,3,u.FLOAT,!1,0,0),u.enable(u.BLEND),u.enable(u.DEPTH_TEST),u.blendFunc(u.ONE_MINUS_DST_ALPHA,u.ONE_MINUS_SRC_ALPHA),u.drawArrays(u.LINES,0,l.length/3)}}}},t.prototype.onBeforeDraw=function(t,e){},t.prototype.onBeforeDrawId=function(){},t.prototype.onAfterDrawId=function(){},t.prototype.onAfterDrawModelId=function(){},t}();e.Grid=i},5585:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vshader=void 0,e.vshader="attribute vec3 coordinates;\n\n\nuniform mat4 uMvMatrix;\nuniform mat4 uPMatrix;\n\nvoid main(void) {\n gl_Position = uPMatrix * uMvMatrix * vec4(coordinates, 1.0);\n}"},1906:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoaderOverlay=void 0;var n=function(){function t(){var t=document.createElement("style");t.innerText="\n        .xbim-viewer-loader {\n            border: 32px solid #eee; /* Light grey */\n            border-top: 32px solid #aaa; /* Dark gray */\n            border-radius: 50%;\n            width: 120px;\n            height: 120px;\n            animation: xbim-viewer-loader-spin 2s linear infinite;\n          }\n          \n          @keyframes xbim-viewer-loader-spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }",document.body.appendChild(t)}return t.prototype.init=function(t){this.viewer=t},t.prototype.onBeforeDraw=function(t,e){},t.prototype.onAfterDraw=function(t,e){},t.prototype.onBeforeDrawId=function(){},t.prototype.onAfterDrawId=function(){},t.prototype.onAfterDrawModelId=function(){},t.prototype.show=function(t){if(!this.overlay){var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.zIndex="1000",e.style.overflow="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0";var n=document.createElement("div");if(n.style.height="100%",n.style.width="100%",n.style.backgroundColor="rgb(200,200,200)",n.style.opacity="0.5",e.appendChild(n),null!=t){var r=document.createElement("div");r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.height="100%",r.style.width="100%",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",e.appendChild(r),t.style.height="100%",t.style.filter="blur(15px)",r.appendChild(t)}var i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.height="100%",i.style.width="100%",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center";var a=document.createElement("div");a.className="xbim-viewer-loader",i.appendChild(a),e.appendChild(i),this.overlay=e;var o=this.viewer.canvas.parentElement;"relative"!==o.style.position&&"absolute"!==o.style.position&&(o.style.position="relative");var s=this.viewer.canvas.nextElementSibling;null!=s?o.insertBefore(e,s):o.appendChild(e)}},t.prototype.hide=function(){null!=this.overlay&&(null!=this.overlay.parentElement&&this.overlay.parentElement.removeChild(this.overlay),this.overlay=null)},t}();e.LoaderOverlay=n},9706:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cube_fshader=void 0,e.cube_fshader="precision mediump float;\n\nuniform float uAlpha;\nuniform sampler2D uTexture;\nuniform mediump float uColorCoding;\nuniform float uHighlighting;\n\nvarying vec2 vTexCoord;\nvarying vec4 vIdColor;\n\n\nvoid main(void) {\n if (uColorCoding > 0.0)\n {\n gl_FragColor = vIdColor;\n }\n else\n {\n vec4 pixel = texture2D(uTexture, vTexCoord);\n if (vIdColor.x < 0.0)\n {\n \n gl_FragColor = vec4(pixel.rgb * uHighlighting, uAlpha);\n }\n else\n {\n \n gl_FragColor = vec4(pixel.rgb, uAlpha);\n }\n }\n}"},1524:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cube_vshader=void 0,e.cube_vshader="attribute highp vec3 aVertex;\nattribute highp vec2 aTexCoord;\nattribute highp float aId;\n\n\nuniform mat3 uRotation;\nuniform mat4 uPMatrix;\n\n\n\nuniform mediump float uColorCoding; \nuniform float uSelection;\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vIdColor;\n\nvec4 getIdColor(float id){\n float product = floor(id + 0.5);\n float B = floor(product / (256.0*256.0));\n float G = floor((product - B * 256.0*256.0) / 256.0);\n float R = mod(product, 256.0);\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n}\n\nvoid main(void) {\n vec4 point = vec4(uRotation * aVertex, 1.0);\n gl_Position = uPMatrix * point;\n vTexCoord = aTexCoord;\n\n if (uColorCoding == 1.0)\n {\n vIdColor = getIdColor(aId);\n return;\n }\n\n if (uColorCoding > 1.0)\n {\n vIdColor = getIdColor(float(uColorCoding));\n return;\n }\n \n bool isSelected = abs(uSelection - aId) < 0.1;\n if (isSelected){\n vIdColor = vec4(-1.0, -1.0, -1.0, -1.0);\n }\n else{\n vIdColor = vec4(1.0, 1.0, 1.0, 1.0);\n }\n}"},5715:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CubeTextures=void 0,e.CubeTextures={en:"data:image/png;base64,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"}},5819:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationCube=void 0;var r=n(9706),i=n(1524),a=n(5715),o=n(887),s=n(9499),l=function(){function t(t){this.TOP=1,this.BOTTOM=2,this.LEFT=3,this.RIGHT=4,this.FRONT=5,this.BACK=6,this.TOP_LEFT_FRONT=7,this.TOP_RIGHT_FRONT=8,this.TOP_LEFT_BACK=9,this.TOP_RIGHT_BACK=10,this.BOTTOM_LEFT_FRONT=11,this.BOTTOM_RIGHT_FRONT=12,this.BOTTOM_LEFT_BACK=13,this.BOTTOM_RIGHT_BACK=14,this.TOP_LEFT=15,this.TOP_RIGHT=16,this.TOP_FRONT=17,this.TOP_BACK=18,this.BOTTOM_LEFT=19,this.BOTTOM_RIGHT=20,this.BOTTOM_FRONT=21,this.BOTTOM_BACK=22,this.FRONT_RIGHT=23,this.FRONT_LEFT=24,this.BACK_RIGHT=25,this.BACK_LEFT=26,this._initialized=!1,this._modelId=1000001,this.ratio=.15,this.minSize=50,this.maxSize=200,this.highlighting=1.2,this.activeAlpha=1,this.passiveAlpha=.7,this.position=this.BOTTOM_RIGHT,this.trueNorth=0,this._stopped=!1,this.vertices=new Float32Array([-.3,-.5,-.3,.3,-.5,-.3,.3,-.5,.3,-.3,-.5,.3,-.3,.5,-.3,-.3,.5,.3,.3,.5,.3,.3,.5,-.3,-.3,-.3,.5,.3,-.3,.5,.3,.3,.5,-.3,.3,.5,-.3,-.3,-.5,-.3,.3,-.5,.3,.3,-.5,.3,-.3,-.5,.5,-.3,-.3,.5,.3,-.3,.5,.3,.3,.5,-.3,.3,-.5,-.3,-.3,-.5,-.3,.3,-.5,.3,.3,-.5,.3,-.3,-.5,-.5,.5,-.3,-.5,.5,-.3,-.3,.5,-.5,-.3,.5,-.5,-.5,.3,-.5,-.5,.5,-.5,-.3,.5,-.5,-.3,.3,-.5,-.5,.3,-.3,-.5,.3,-.3,-.5,.5,-.5,-.5,.5,.3,-.5,.5,.5,-.5,.5,.5,-.3,.5,.3,-.3,.5,.5,-.5,.3,.5,-.3,.3,.5,-.3,.5,.5,-.5,.5,.3,-.5,.3,.5,-.5,.3,.5,-.5,.5,.3,-.5,.5,-.5,.3,.5,-.3,.3,.5,-.3,.5,.5,-.5,.5,.5,-.5,.3,.3,-.5,.3,.5,-.5,.5,.5,-.5,.5,.3,-.5,.5,.3,-.5,.5,.5,-.3,.5,.5,-.3,.5,.3,.3,.3,.5,.5,.3,.5,.5,.5,.5,.3,.5,.5,.5,.3,.3,.5,.5,.3,.5,.5,.5,.5,.3,.5,.3,.5,.3,.3,.5,.5,.5,.5,.5,.5,.5,.3,-.5,-.5,-.5,-.3,-.5,-.5,-.3,-.3,-.5,-.5,-.3,-.5,-.5,-.5,-.5,-.5,-.5,-.3,-.5,-.3,-.3,-.5,-.3,-.5,-.5,-.5,-.5,-.3,-.5,-.5,-.3,-.5,-.3,-.5,-.5,-.3,.3,-.5,-.5,.5,-.5,-.5,.5,-.3,-.5,.3,-.3,-.5,.5,-.5,-.5,.5,-.3,-.5,.5,-.3,-.3,.5,-.5,-.3,.3,-.5,-.5,.5,-.5,-.5,.5,-.5,-.3,.3,-.5,-.3,-.5,.3,-.5,-.3,.3,-.5,-.3,.5,-.5,-.5,.5,-.5,-.5,.3,-.5,-.5,.3,-.3,-.5,.5,-.3,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.3,-.3,.5,-.3,-.3,.5,-.5,.3,.3,-.5,.5,.3,-.5,.5,.5,-.5,.3,.5,-.5,.5,.3,-.5,.5,.5,-.5,.5,.5,-.3,.5,.3,-.3,.3,.5,-.5,.3,.5,-.3,.5,.5,-.3,.5,.5,-.5,.3,-.3,.5,.5,-.3,.5,.5,.3,.5,.3,.3,.5,.5,-.3,.3,.5,.3,.3,.5,.3,.5,.5,-.3,.5,-.5,-.3,.5,-.3,-.3,.5,-.3,.3,.5,-.5,.3,.5,-.5,-.3,.3,-.5,-.3,.5,-.5,.3,.5,-.5,.3,.3,-.3,-.5,.5,.3,-.5,.5,.3,-.3,.5,-.3,-.3,.5,-.3,-.5,.3,.3,-.5,.3,.3,-.5,.5,-.3,-.5,.5,-.3,.3,.5,.3,.3,.5,.3,.5,.5,-.3,.5,.5,-.3,.5,.3,-.3,.5,.5,.3,.5,.5,.3,.5,.3,.3,-.3,-.5,.5,-.3,-.5,.5,.3,-.5,.3,.3,-.5,.5,-.3,-.5,.5,.3,-.5,.5,.3,-.3,.5,-.3,-.3,-.5,-.3,-.5,-.5,.3,-.5,-.3,.3,-.5,-.3,-.3,-.5,-.5,-.3,-.5,-.5,-.3,-.3,-.5,.3,-.3,-.5,.3,-.5,-.3,-.5,-.5,.3,-.5,-.5,.3,-.3,-.5,-.3,-.3,-.5,-.3,-.5,-.5,.3,-.5,-.5,.3,-.5,-.3,-.3,-.5,-.3,-.3,.3,-.5,.3,.3,-.5,.3,.5,-.5,-.3,.5,-.5,-.3,.5,-.5,-.3,.5,-.3,.3,.5,-.3,.3,.5,-.5,.3,-.5,-.3,.5,-.5,-.3,.5,-.5,.3,.3,-.5,.3,.5,-.5,-.3,.5,-.3,-.3,.5,-.3,.3,.5,-.5,.3,-.5,-.5,-.3,-.3,-.5,-.3,-.3,-.5,.3,-.5,-.5,.3,-.5,-.5,-.3,-.5,-.5,.3,-.5,-.3,.3,-.5,-.3,-.3,.3,.5,-.3,.3,.5,.3,.5,.5,.3,.5,.5,-.3,.5,.3,-.3,.5,.5,-.3,.5,.5,.3,.5,.3,.3,-.5,.5,-.3,-.5,.5,.3,-.3,.5,.3,-.3,.5,-.3,-.5,.3,-.3,-.5,.3,.3,-.5,.5,.3,-.5,.5,-.3]),this.indices=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35,36,37,38,36,38,39,40,41,42,40,42,43,44,45,46,44,46,47,48,49,50,48,50,51,52,53,54,52,54,55,56,57,58,56,58,59,60,61,62,60,62,63,64,65,66,64,66,67,68,69,70,68,70,71,72,74,73,72,75,74,76,77,78,76,78,79,80,81,82,80,82,83,84,86,85,84,87,86,88,89,90,88,90,91,92,93,94,92,94,95,96,98,97,96,99,98,100,101,102,100,102,103,104,105,106,104,106,107,108,110,109,108,111,110,112,113,114,112,114,115,116,117,118,116,118,119,120,121,122,120,122,123,124,125,126,124,126,127,128,129,130,128,130,131,132,133,134,132,134,135,136,137,138,136,138,139,140,141,142,140,142,143,144,145,146,144,146,147,148,149,150,148,150,151,152,154,153,152,155,154,156,157,158,156,158,159,160,161,162,160,162,163,164,165,166,164,166,167,168,170,169,168,171,170,172,173,174,172,174,175,176,178,177,176,179,178,180,181,182,180,182,183,184,185,186,184,186,187,188,189,190,188,190,191,192,193,194,192,194,195,196,197,198,196,198,199,200,201,202,200,202,203,204,205,206,204,206,207,208,209,210,208,210,211,212,213,214,212,214,215]),this.txtCoords=new Float32Array([1/3+1/15,0+1/15,.6,0+1/15,.6,1/3-1/15,1/3+1/15,1/3-1/15,1-1/15,0+1/15,1-1/15,1/3-1/15,2/3+1/15,1/3-1/15,2/3+1/15,0+1/15,2/3+1/15,1/3+1/15,1-1/15,1/3+1/15,1-1/15,.6,2/3+1/15,.6,0+1/15,1/3-1/15,0+1/15,0+1/15,1/3-1/15,0+1/15,1/3-1/15,1/3-1/15,0+1/15,1/3+1/15,1/3-1/15,1/3+1/15,1/3-1/15,.6,0+1/15,.6,.6,1/3+1/15,.6,.6,1/3+1/15,.6,1/3+1/15,1/3+1/15,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30]),this.ids=new Float32Array([this.FRONT,this.FRONT,this.FRONT,this.FRONT,this.BACK,this.BACK,this.BACK,this.BACK,this.TOP,this.TOP,this.TOP,this.TOP,this.BOTTOM,this.BOTTOM,this.BOTTOM,this.BOTTOM,this.RIGHT,this.RIGHT,this.RIGHT,this.RIGHT,this.LEFT,this.LEFT,this.LEFT,this.LEFT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT]),this._image=t}return Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){this._stopped=t,this.viewer&&this.viewer.draw()},enumerable:!1,configurable:!0}),t.prototype.init=function(t){var e=this;this.viewer=t;var n=this.viewer.gl;this._shader=null,this._initShader(),this._alpha=this.passiveAlpha,this._selection=0,n.useProgram(this._shader),this._pMatrixUniformPointer=n.getUniformLocation(this._shader,"uPMatrix"),this._rotationUniformPointer=n.getUniformLocation(this._shader,"uRotation"),this._colourCodingUniformPointer=n.getUniformLocation(this._shader,"uColorCoding"),this._alphaUniformPointer=n.getUniformLocation(this._shader,"uAlpha"),this._selectionUniformPointer=n.getUniformLocation(this._shader,"uSelection"),this._textureUniformPointer=n.getUniformLocation(this._shader,"uTexture"),this._highlightingUniformPointer=n.getUniformLocation(this._shader,"uHighlighting"),this._vertexAttrPointer=n.getAttribLocation(this._shader,"aVertex"),this._texCoordAttrPointer=n.getAttribLocation(this._shader,"aTexCoord"),this._idAttrPointer=n.getAttribLocation(this._shader,"aId"),n.enableVertexAttribArray(this._vertexAttrPointer),n.enableVertexAttribArray(this._texCoordAttrPointer),n.enableVertexAttribArray(this._idAttrPointer),this._indexBuffer=n.createBuffer(),this._vertexBuffer=n.createBuffer(),this._texCoordBuffer=n.createBuffer(),this._idBuffer=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,this.indices,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,this.vertices,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,this._texCoordBuffer),n.bufferData(n.ARRAY_BUFFER,this.txtCoords,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,this._idBuffer),n.bufferData(n.ARRAY_BUFFER,this.ids,n.STATIC_DRAW);var r=this;if(this._texture=n.createTexture(),void 0===this._image){var i=a.CubeTextures.en,s=new Image;r._image=s,s.addEventListener("load",(function(){n.bindTexture(n.TEXTURE_2D,r._texture),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r._image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_NEAREST),n.generateMipmap(n.TEXTURE_2D)})),s.src=i}else n.bindTexture(n.TEXTURE_2D,r._texture),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r._image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_NEAREST),n.generateMipmap(n.TEXTURE_2D);t.canvas.addEventListener("mousemove",(function(n){if(!(e.stopped||t.plugins.indexOf(e)<0)){var i=n.clientX,a=n.clientY,o=t.canvas.getBoundingClientRect(),s=i-o.left,l=t.height-(a-o.top);if(r._region){if(!r.isInRegion(s,l))return r._alpha=r.passiveAlpha,void(r._selection=0);var c=e.getId(n);null==c?(r._alpha=r.passiveAlpha,r._selection=0):c>=r.TOP&&c<=r.BACK_LEFT&&(r._alpha=r.activeAlpha,r._selection=c),e.onAfterDraw(t.width,t.height)}}}),!0),r._drag=!1,t.canvas.addEventListener("mousedown",(function(n){if(!(e.stopped||t.plugins.indexOf(e)<0)){var i=n.clientX,a=n.clientY,o=t.canvas.getBoundingClientRect(),s=i-o.left,l=t.height-(a-o.top);if(e._region&&r.isInRegion(s,l)){var c=e.getId(n);null!=c&&c>=r.TOP&&c<=r.BACK_LEFT&&(r._drag=!0,r._originalNavigation=t.navigationMode,t.navigationMode="orbit")}}}),!0),window.addEventListener("mouseup",(function(n){e.stopped||t.plugins.indexOf(e)<0||!0===r._drag&&(t.navigationMode=r._originalNavigation),r._drag=!1}),!0),t.on("pick",(function(n){if(null==n.model){var r=n.event;if(r instanceof MouseEvent||r instanceof TouchEvent){var i;i=r instanceof MouseEvent?r:r.changedTouches[0];var a=e.getId(i),s=o.vec3.create(),l=o.vec3.fromValues(0,0,1);switch(a){case e.TOP:s=o.vec3.fromValues(0,0,1),l=o.vec3.fromValues(0,1,0);break;case e.BOTTOM:s=o.vec3.fromValues(0,0,-1),l=o.vec3.fromValues(0,-1,0);break;case e.FRONT:s=o.vec3.fromValues(0,-1,0);break;case e.BACK:s=o.vec3.fromValues(0,1,0);break;case e.LEFT:s=o.vec3.fromValues(-1,0,0);break;case e.RIGHT:s=o.vec3.fromValues(1,0,0);break;case e.TOP_LEFT_FRONT:s=o.vec3.fromValues(-1,-1,1);break;case e.TOP_RIGHT_FRONT:s=o.vec3.fromValues(1,-1,1);break;case e.TOP_LEFT_BACK:s=o.vec3.fromValues(-1,1,1);break;case e.TOP_RIGHT_BACK:s=o.vec3.fromValues(1,1,1);break;case e.BOTTOM_LEFT_FRONT:s=o.vec3.fromValues(-1,-1,-1);break;case e.BOTTOM_RIGHT_FRONT:s=o.vec3.fromValues(1,-1,-1);break;case e.BOTTOM_LEFT_BACK:s=o.vec3.fromValues(-1,1,-1);break;case e.BOTTOM_RIGHT_BACK:s=o.vec3.fromValues(1,1,-1);break;case e.TOP_LEFT:s=o.vec3.fromValues(-1,0,1);break;case e.TOP_RIGHT:s=o.vec3.fromValues(1,0,1);break;case e.TOP_FRONT:s=o.vec3.fromValues(0,-1,1);break;case e.TOP_BACK:s=o.vec3.fromValues(0,1,1);break;case e.BOTTOM_LEFT:s=o.vec3.fromValues(-1,0,-1);break;case e.BOTTOM_RIGHT:s=o.vec3.fromValues(1,0,-1);break;case e.BOTTOM_FRONT:s=o.vec3.fromValues(0,-1,-1);break;case e.BOTTOM_BACK:s=o.vec3.fromValues(0,1,-1);break;case e.FRONT_RIGHT:s=o.vec3.fromValues(1,-1,0);break;case e.FRONT_LEFT:s=o.vec3.fromValues(-1,-1,0);break;case e.BACK_RIGHT:s=o.vec3.fromValues(1,1,0);break;case e.BACK_LEFT:s=o.vec3.fromValues(-1,1,0);break;default:return!1}var c=t.getTargetBoundingBox(),u=o.vec3.fromValues(c[0]+c[3]/2,c[1]+c[4]/2,c[2]+c[5]/2);if(s=o.vec3.normalize(o.vec3.create(),s),0!==e.trueNorth){var d=-e.trueNorth*Math.PI/180,h=o.quat.rotateZ(o.quat.create(),o.quat.create(),d);s=o.vec3.transformQuat(o.vec3.create(),s,h),l=o.vec3.transformQuat(o.vec3.create(),l,h)}var A=t.getDistanceAndHeight(c,s,l),f=o.vec3.scale(o.vec3.create(),s,A.distance),p=o.vec3.add(o.vec3.create(),u,f),I=o.mat4.lookAt(o.mat4.create(),p,u,l);e.viewer.animations.viewTo({mv:I,height:A.height},e.viewer.zoomDuration)}}})),this._initialized=!0},t.prototype.onBeforeDraw=function(t,e){},t.prototype.onBeforePick=function(t){return t.model===this._modelId&&null!=t.id},t.prototype.onAfterDraw=function(t,e){if(!this.stopped){var n=this.setActive();n.disable(n.BLEND),n.disable(n.DEPTH_TEST),n.uniform1f(this._colourCodingUniformPointer,0),this.draw(t,e)}},t.prototype.onBeforeDrawId=function(){},t.prototype.onAfterDrawId=function(){this.stopped||(this.setActive().uniform1f(this._colourCodingUniformPointer,1),this.draw(this.viewer.width,this.viewer.height))},t.prototype.onAfterDrawModelId=function(){this.stopped||(this.setActive().uniform1f(this._colourCodingUniformPointer,this._modelId),this.draw(this.viewer.width,this.viewer.height))},t.prototype.getId=function(t){var e=t.clientX,n=t.clientY,r=this.viewer.canvas.getBoundingClientRect(),i=e-r.left,a=this.viewer.height-(n-r.top),o=this.viewer.gl,l=new s.Framebuffer(o,this.viewer.width,this.viewer.height,this.viewer.hasDepthSupport,this.viewer.glVersion);o.viewport(0,0,this.viewer.width,this.viewer.height),o.enable(o.DEPTH_TEST),o.disable(o.BLEND),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),this.onAfterDrawId();var c=l.getId(i,a);return l.delete(),c},t.prototype.setActive=function(){var t=this.viewer.gl;return t.useProgram(this._shader),t},t.prototype.isInRegion=function(t,e){var n=this._region[0]*this.viewer.width,r=this._region[2]*this.viewer.width,i=this._region[1]*this.viewer.height,a=this._region[3]*this.viewer.height;return!(t<n||t>r||e<i||e>a)},t.prototype.draw=function(t,e){if(!this.stopped&&this._initialized){var n=this.viewer.gl,r=Math.min(t,e),i=this.minSize/r,a=this.maxSize/r,s=this.ratio;s<i?s=i:s>a&&(s=a);var l=o.mat4.create(),c=1/s,u=c/e*t;e>t&&(c=(u=1/s)/t*e);var d=s*e/t*2,h=2*s;switch(this.position){case this.BOTTOM_RIGHT:o.mat4.ortho(l,1-u,1,-1,c-1,-1,1),this._region=[1-d,0,1,h];break;case this.BOTTOM_LEFT:o.mat4.ortho(l,-1,u-1,-1,c-1,-1,1),this._region=[0,0,d,h];break;case this.TOP_LEFT:o.mat4.ortho(l,-1,u-1,1-c,1,-1,1),this._region=[0,1-h,d,1];break;case this.TOP_RIGHT:o.mat4.ortho(l,1-u,1,1-c,1,-1,1),this._region=[1-d,1-h,1,1]}var A=o.mat3.fromMat4(o.mat3.create(),this.viewer.mvMatrix);if(0!==this.trueNorth){var f=-this.trueNorth*Math.PI/180,p=o.mat3.fromRotation(o.mat3.create(),f);A=o.mat3.multiply(o.mat3.create(),A,p)}n.uniformMatrix4fv(this._pMatrixUniformPointer,!1,l),n.uniformMatrix3fv(this._rotationUniformPointer,!1,A),n.uniform1f(this._alphaUniformPointer,this._alpha),n.uniform1f(this._highlightingUniformPointer,this.highlighting),n.uniform1f(this._selectionUniformPointer,this._selection),n.bindBuffer(n.ARRAY_BUFFER,this._vertexBuffer),n.vertexAttribPointer(this._vertexAttrPointer,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._idBuffer),n.vertexAttribPointer(this._idAttrPointer,1,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this._texCoordBuffer),n.vertexAttribPointer(this._texCoordAttrPointer,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this._texture),n.uniform1i(this._textureUniformPointer,1);var I=n.getParameter(n.CULL_FACE);I||n.enable(n.CULL_FACE),n.disable(n.BLEND),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.drawElements(n.TRIANGLES,this.indices.length,n.UNSIGNED_SHORT,0),I||n.disable(n.CULL_FACE)}},t.prototype._initShader=function(){var t=this.viewer.gl,e=this.viewer,n=function(n,r){if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(n);return e.error(i),null}},a=t.createShader(t.FRAGMENT_SHADER);n(a,r.cube_fshader);var o=t.createShader(t.VERTEX_SHADER);n(o,i.cube_vshader),this._shader=t.createProgram(),t.attachShader(this._shader,o),t.attachShader(this._shader,a),t.linkProgram(this._shader),t.getProgramParameter(this._shader,t.LINK_STATUS)||e.error("Could not initialise shaders for a navigation cube plugin")},t}();e.NavigationCube=l},9438:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Product=void 0;var n=function(){function t(){}return t.getByName=function(t){t=t.toUpperCase();for(var e=[r];0!==e.length;){var n=e.shift();if(n.name.toUpperCase()===t)return n;n.children&&n.children.forEach((function(t){e.push(t)}))}return null},t.getAllSubTypes=function(t){for(var e=[],n=[r];0!==n.length;)(a=n.shift()).id===t&&e.push(a),a.children&&a.children.forEach((function(t){n.push(t)}));n=e.slice();for(var i={};0!==n.length;){var a;!1===(a=n.shift()).abs&&(i[a.id]=!0),a.children&&a.children.forEach((function(t){n.push(t)}))}return i},t}();e.Product=n;var r={name:"IfcProduct",id:20,abs:!0,children:[{name:"IfcElement",id:19,abs:!0,children:[{name:"IfcDistributionElement",id:44,abs:!1,children:[{name:"IfcDistributionFlowElement",id:45,abs:!1,children:[{name:"IfcDistributionChamberElement",id:180,abs:!1},{name:"IfcEnergyConversionDevice",id:175,abs:!1,children:[{name:"IfcAirToAirHeatRecovery",id:1097,abs:!1},{name:"IfcBoiler",id:1105,abs:!1},{name:"IfcBurner",id:1109,abs:!1},{name:"IfcChiller",id:1119,abs:!1},{name:"IfcCoil",id:1124,abs:!1},{name:"IfcCondenser",id:1132,abs:!1},{name:"IfcCooledBeam",id:1141,abs:!1},{name:"IfcCoolingTower",id:1142,abs:!1},{name:"IfcEngine",id:1164,abs:!1},{name:"IfcEvaporativeCooler",id:1166,abs:!1},{name:"IfcEvaporator",id:1167,abs:!1},{name:"IfcHeatExchanger",id:1187,abs:!1},{name:"IfcHumidifier",id:1188,abs:!1},{name:"IfcTubeBundle",id:1305,abs:!1},{name:"IfcUnitaryEquipment",id:1310,abs:!1},{name:"IfcElectricGenerator",id:1160,abs:!1},{name:"IfcElectricMotor",id:1161,abs:!1},{name:"IfcMotorConnection",id:1216,abs:!1},{name:"IfcSolarDevice",id:1270,abs:!1},{name:"IfcTransformer",id:1303,abs:!1}]},{name:"IfcFlowController",id:121,abs:!1,children:[{name:"IfcElectricDistributionPoint",id:242,abs:!1},{name:"IfcAirTerminalBox",id:1096,abs:!1},{name:"IfcDamper",id:1148,abs:!1},{name:"IfcFlowMeter",id:1182,abs:!1},{name:"IfcValve",id:1311,abs:!1},{name:"IfcElectricDistributionBoard",id:1157,abs:!1},{name:"IfcElectricTimeControl",id:1162,abs:!1},{name:"IfcProtectiveDevice",id:1235,abs:!1},{name:"IfcSwitchingDevice",id:1290,abs:!1}]},{name:"IfcFlowFitting",id:467,abs:!1,children:[{name:"IfcDuctFitting",id:1153,abs:!1},{name:"IfcPipeFitting",id:1222,abs:!1},{name:"IfcCableCarrierFitting",id:1111,abs:!1},{name:"IfcCableFitting",id:1113,abs:!1},{name:"IfcJunctionBox",id:1195,abs:!1}]},{name:"IfcFlowMovingDevice",id:502,abs:!1,children:[{name:"IfcCompressor",id:1131,abs:!1},{name:"IfcFan",id:1177,abs:!1},{name:"IfcPump",id:1238,abs:!1}]},{name:"IfcFlowSegment",id:574,abs:!1,children:[{name:"IfcDuctSegment",id:1154,abs:!1},{name:"IfcPipeSegment",id:1223,abs:!1},{name:"IfcCableCarrierSegment",id:1112,abs:!1},{name:"IfcCableSegment",id:1115,abs:!1}]},{name:"IfcFlowStorageDevice",id:371,abs:!1,children:[{name:"IfcTank",id:1293,abs:!1},{name:"IfcElectricFlowStorageDevice",id:1159,abs:!1}]},{name:"IfcFlowTerminal",id:46,abs:!1,children:[{name:"IfcFireSuppressionTerminal",id:1179,abs:!1},{name:"IfcSanitaryTerminal",id:1262,abs:!1},{name:"IfcStackTerminal",id:1277,abs:!1},{name:"IfcWasteTerminal",id:1315,abs:!1},{name:"IfcAirTerminal",id:1095,abs:!1},{name:"IfcMedicalDevice",id:1212,abs:!1},{name:"IfcSpaceHeater",id:1272,abs:!1},{name:"IfcAudioVisualAppliance",id:1099,abs:!1},{name:"IfcCommunicationsAppliance",id:1127,abs:!1},{name:"IfcElectricAppliance",id:1156,abs:!1},{name:"IfcLamp",id:1198,abs:!1},{name:"IfcLightFixture",id:1199,abs:!1},{name:"IfcOutlet",id:1219,abs:!1}]},{name:"IfcFlowTreatmentDevice",id:425,abs:!1,children:[{name:"IfcInterceptor",id:1193,abs:!1},{name:"IfcDuctSilencer",id:1155,abs:!1},{name:"IfcFilter",id:1178,abs:!1}]}]},{name:"IfcDistributionControlElement",id:468,abs:!1,children:[{name:"IfcProtectiveDeviceTrippingUnit",id:1236,abs:!1},{name:"IfcActuator",id:1091,abs:!1},{name:"IfcAlarm",id:1098,abs:!1},{name:"IfcController",id:1139,abs:!1},{name:"IfcFlowInstrument",id:1181,abs:!1},{name:"IfcSensor",id:1264,abs:!1},{name:"IfcUnitaryControlElement",id:1308,abs:!1}]}]},{name:"IfcElementComponent",id:424,abs:!0,children:[{name:"IfcDiscreteAccessory",id:423,abs:!1},{name:"IfcFastener",id:535,abs:!1,children:[{name:"IfcMechanicalFastener",id:536,abs:!1}]},{name:"IfcReinforcingElement",id:262,abs:!0,children:[{name:"IfcReinforcingBar",id:571,abs:!1},{name:"IfcReinforcingMesh",id:531,abs:!1},{name:"IfcTendon",id:261,abs:!1},{name:"IfcTendonAnchor",id:675,abs:!1}]},{name:"IfcBuildingElementPart",id:220,abs:!1},{name:"IfcMechanicalFastener",id:536,abs:!1},{name:"IfcVibrationIsolator",id:1312,abs:!1}]},{name:"IfcFeatureElement",id:386,abs:!0,children:[{name:"IfcFeatureElementSubtraction",id:499,abs:!0,children:[{name:"IfcEdgeFeature",id:764,abs:!0,children:[{name:"IfcChamferEdgeFeature",id:765,abs:!1},{name:"IfcRoundedEdgeFeature",id:766,abs:!1}]},{name:"IfcOpeningElement",id:498,abs:!1,children:[{name:"IfcOpeningStandardCase",id:1217,abs:!1}]},{name:"IfcVoidingFeature",id:1313,abs:!1}]},{name:"IfcFeatureElementAddition",id:385,abs:!0,children:[{name:"IfcProjectionElement",id:384,abs:!1}]},{name:"IfcSurfaceFeature",id:1287,abs:!1}]},{name:"IfcBuildingElement",id:26,abs:!0,children:[{name:"IfcBuildingElementComponent",id:221,abs:!0,children:[{name:"IfcBuildingElementPart",id:220,abs:!1},{name:"IfcReinforcingElement",id:262,abs:!0,children:[{name:"IfcReinforcingBar",id:571,abs:!1},{name:"IfcReinforcingMesh",id:531,abs:!1},{name:"IfcTendon",id:261,abs:!1},{name:"IfcTendonAnchor",id:675,abs:!1}]}]},{name:"IfcFooting",id:120,abs:!1},{name:"IfcPile",id:572,abs:!1},{name:"IfcBeam",id:171,abs:!1,children:[{name:"IfcBeamStandardCase",id:1104,abs:!1}]},{name:"IfcColumn",id:383,abs:!1,children:[{name:"IfcColumnStandardCase",id:1126,abs:!1}]},{name:"IfcCurtainWall",id:456,abs:!1},{name:"IfcDoor",id:213,abs:!1,children:[{name:"IfcDoorStandardCase",id:1151,abs:!1}]},{name:"IfcMember",id:310,abs:!1,children:[{name:"IfcMemberStandardCase",id:1214,abs:!1}]},{name:"IfcPlate",id:351,abs:!1,children:[{name:"IfcPlateStandardCase",id:1224,abs:!1}]},{name:"IfcRailing",id:350,abs:!1},{name:"IfcRamp",id:414,abs:!1},{name:"IfcRampFlight",id:348,abs:!1},{name:"IfcRoof",id:347,abs:!1},{name:"IfcSlab",id:99,abs:!1,children:[{name:"IfcSlabElementedCase",id:1268,abs:!1},{name:"IfcSlabStandardCase",id:1269,abs:!1}]},{name:"IfcStair",id:346,abs:!1},{name:"IfcStairFlight",id:25,abs:!1},{name:"IfcWall",id:452,abs:!1,children:[{name:"IfcWallStandardCase",id:453,abs:!1},{name:"IfcWallElementedCase",id:1314,abs:!1}]},{name:"IfcWindow",id:667,abs:!1,children:[{name:"IfcWindowStandardCase",id:1316,abs:!1}]},{name:"IfcBuildingElementProxy",id:560,abs:!1},{name:"IfcCovering",id:382,abs:!1},{name:"IfcChimney",id:1120,abs:!1},{name:"IfcShadingDevice",id:1265,abs:!1}]},{name:"IfcElementAssembly",id:18,abs:!1},{name:"IfcFurnishingElement",id:253,abs:!1,children:[{name:"IfcFurniture",id:1184,abs:!1},{name:"IfcSystemFurnitureElement",id:1291,abs:!1}]},{name:"IfcTransportElement",id:416,abs:!1},{name:"IfcVirtualElement",id:168,abs:!1},{name:"IfcElectricalElement",id:23,abs:!1},{name:"IfcEquipmentElement",id:212,abs:!1},{name:"IfcCivilElement",id:1122,abs:!1},{name:"IfcGeographicElement",id:1185,abs:!1}]},{name:"IfcPort",id:179,abs:!0,children:[{name:"IfcDistributionPort",id:178,abs:!1}]},{name:"IfcProxy",id:447,abs:!1},{name:"IfcStructuralActivity",id:41,abs:!0,children:[{name:"IfcStructuralAction",id:40,abs:!0,children:[{name:"IfcStructuralLinearAction",id:463,abs:!1,children:[{name:"IfcStructuralLinearActionVarying",id:464,abs:!1}]},{name:"IfcStructuralPlanarAction",id:39,abs:!1,children:[{name:"IfcStructuralPlanarActionVarying",id:357,abs:!1}]},{name:"IfcStructuralPointAction",id:356,abs:!1},{name:"IfcStructuralCurveAction",id:1279,abs:!1,children:[{name:"IfcStructuralLinearAction",id:463,abs:!1}]},{name:"IfcStructuralSurfaceAction",id:1284,abs:!1,children:[{name:"IfcStructuralPlanarAction",id:39,abs:!1}]}]},{name:"IfcStructuralReaction",id:355,abs:!0,children:[{name:"IfcStructuralPointReaction",id:354,abs:!1},{name:"IfcStructuralCurveReaction",id:1280,abs:!1},{name:"IfcStructuralSurfaceReaction",id:1285,abs:!1}]}]},{name:"IfcStructuralItem",id:226,abs:!0,children:[{name:"IfcStructuralConnection",id:265,abs:!0,children:[{name:"IfcStructuralCurveConnection",id:534,abs:!1},{name:"IfcStructuralPointConnection",id:533,abs:!1},{name:"IfcStructuralSurfaceConnection",id:264,abs:!1}]},{name:"IfcStructuralMember",id:225,abs:!0,children:[{name:"IfcStructuralCurveMember",id:224,abs:!1,children:[{name:"IfcStructuralCurveMemberVarying",id:227,abs:!1}]},{name:"IfcStructuralSurfaceMember",id:420,abs:!1,children:[{name:"IfcStructuralSurfaceMemberVarying",id:421,abs:!1}]}]}]},{name:"IfcAnnotation",id:634,abs:!1},{name:"IfcSpatialStructureElement",id:170,abs:!0,children:[{name:"IfcBuilding",id:169,abs:!1},{name:"IfcBuildingStorey",id:459,abs:!1},{name:"IfcSite",id:349,abs:!1},{name:"IfcSpace",id:454,abs:!1}]},{name:"IfcGrid",id:564,abs:!1},{name:"IfcSpatialElement",id:1273,abs:!0,children:[{name:"IfcSpatialStructureElement",id:170,abs:!0,children:[{name:"IfcBuilding",id:169,abs:!1},{name:"IfcBuildingStorey",id:459,abs:!1},{name:"IfcSite",id:349,abs:!1},{name:"IfcSpace",id:454,abs:!1}]},{name:"IfcExternalSpatialStructureElement",id:1175,abs:!0,children:[{name:"IfcExternalSpatialElement",id:1174,abs:!1}]},{name:"IfcSpatialZone",id:1275,abs:!1}]}]}},3425:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.ProductType=void 0,(n=e.ProductType||(e.ProductType={}))[n.IFCPRODUCT=20]="IFCPRODUCT",n[n.IFCELEMENT=19]="IFCELEMENT",n[n.IFCBUILDINGELEMENT=26]="IFCBUILDINGELEMENT",n[n.IFCFOOTING=120]="IFCFOOTING",n[n.IFCPILE=572]="IFCPILE",n[n.IFCBEAM=171]="IFCBEAM",n[n.IFCBEAMSTANDARDCASE=1104]="IFCBEAMSTANDARDCASE",n[n.IFCBUILDINGELEMENTPROXY=560]="IFCBUILDINGELEMENTPROXY",n[n.IFCCHIMNEY=1120]="IFCCHIMNEY",n[n.IFCCOLUMN=383]="IFCCOLUMN",n[n.IFCCOLUMNSTANDARDCASE=1126]="IFCCOLUMNSTANDARDCASE",n[n.IFCCOVERING=382]="IFCCOVERING",n[n.IFCCURTAINWALL=456]="IFCCURTAINWALL",n[n.IFCDOOR=213]="IFCDOOR",n[n.IFCDOORSTANDARDCASE=1151]="IFCDOORSTANDARDCASE",n[n.IFCMEMBER=310]="IFCMEMBER",n[n.IFCMEMBERSTANDARDCASE=1214]="IFCMEMBERSTANDARDCASE",n[n.IFCPLATE=351]="IFCPLATE",n[n.IFCPLATESTANDARDCASE=1224]="IFCPLATESTANDARDCASE",n[n.IFCRAILING=350]="IFCRAILING",n[n.IFCRAMP=414]="IFCRAMP",n[n.IFCRAMPFLIGHT=348]="IFCRAMPFLIGHT",n[n.IFCROOF=347]="IFCROOF",n[n.IFCSHADINGDEVICE=1265]="IFCSHADINGDEVICE",n[n.IFCSLAB=99]="IFCSLAB",n[n.IFCSLABELEMENTEDCASE=1268]="IFCSLABELEMENTEDCASE",n[n.IFCSLABSTANDARDCASE=1269]="IFCSLABSTANDARDCASE",n[n.IFCSTAIR=346]="IFCSTAIR",n[n.IFCSTAIRFLIGHT=25]="IFCSTAIRFLIGHT",n[n.IFCWALL=452]="IFCWALL",n[n.IFCWALLELEMENTEDCASE=1314]="IFCWALLELEMENTEDCASE",n[n.IFCWALLSTANDARDCASE=453]="IFCWALLSTANDARDCASE",n[n.IFCWINDOW=667]="IFCWINDOW",n[n.IFCWINDOWSTANDARDCASE=1316]="IFCWINDOWSTANDARDCASE",n[n.IFCELEMENTCOMPONENT=424]="IFCELEMENTCOMPONENT",n[n.IFCREINFORCINGELEMENT=262]="IFCREINFORCINGELEMENT",n[n.IFCREINFORCINGBAR=571]="IFCREINFORCINGBAR",n[n.IFCREINFORCINGMESH=531]="IFCREINFORCINGMESH",n[n.IFCTENDON=261]="IFCTENDON",n[n.IFCTENDONANCHOR=675]="IFCTENDONANCHOR",n[n.IFCBUILDINGELEMENTPART=220]="IFCBUILDINGELEMENTPART",n[n.IFCDISCRETEACCESSORY=423]="IFCDISCRETEACCESSORY",n[n.IFCFASTENER=535]="IFCFASTENER",n[n.IFCMECHANICALFASTENER=536]="IFCMECHANICALFASTENER",n[n.IFCVIBRATIONISOLATOR=1312]="IFCVIBRATIONISOLATOR",n[n.IFCFEATUREELEMENT=386]="IFCFEATUREELEMENT",n[n.IFCSURFACEFEATURE=1287]="IFCSURFACEFEATURE",n[n.IFCFEATUREELEMENTSUBTRACTION=499]="IFCFEATUREELEMENTSUBTRACTION",n[n.IFCVOIDINGFEATURE=1313]="IFCVOIDINGFEATURE",n[n.IFCOPENINGELEMENT=498]="IFCOPENINGELEMENT",n[n.IFCOPENINGSTANDARDCASE=1217]="IFCOPENINGSTANDARDCASE",n[n.IFCFEATUREELEMENTADDITION=385]="IFCFEATUREELEMENTADDITION",n[n.IFCPROJECTIONELEMENT=384]="IFCPROJECTIONELEMENT",n[n.IFCFURNISHINGELEMENT=253]="IFCFURNISHINGELEMENT",n[n.IFCFURNITURE=1184]="IFCFURNITURE",n[n.IFCSYSTEMFURNITUREELEMENT=1291]="IFCSYSTEMFURNITUREELEMENT",n[n.IFCDISTRIBUTIONELEMENT=44]="IFCDISTRIBUTIONELEMENT",n[n.IFCDISTRIBUTIONFLOWELEMENT=45]="IFCDISTRIBUTIONFLOWELEMENT",n[n.IFCDISTRIBUTIONCHAMBERELEMENT=180]="IFCDISTRIBUTIONCHAMBERELEMENT",n[n.IFCENERGYCONVERSIONDEVICE=175]="IFCENERGYCONVERSIONDEVICE",n[n.IFCAIRTOAIRHEATRECOVERY=1097]="IFCAIRTOAIRHEATRECOVERY",n[n.IFCBOILER=1105]="IFCBOILER",n[n.IFCBURNER=1109]="IFCBURNER",n[n.IFCCHILLER=1119]="IFCCHILLER",n[n.IFCCOIL=1124]="IFCCOIL",n[n.IFCCONDENSER=1132]="IFCCONDENSER",n[n.IFCCOOLEDBEAM=1141]="IFCCOOLEDBEAM",n[n.IFCCOOLINGTOWER=1142]="IFCCOOLINGTOWER",n[n.IFCENGINE=1164]="IFCENGINE",n[n.IFCEVAPORATIVECOOLER=1166]="IFCEVAPORATIVECOOLER",n[n.IFCEVAPORATOR=1167]="IFCEVAPORATOR",n[n.IFCHEATEXCHANGER=1187]="IFCHEATEXCHANGER",n[n.IFCHUMIDIFIER=1188]="IFCHUMIDIFIER",n[n.IFCTUBEBUNDLE=1305]="IFCTUBEBUNDLE",n[n.IFCUNITARYEQUIPMENT=1310]="IFCUNITARYEQUIPMENT",n[n.IFCELECTRICGENERATOR=1160]="IFCELECTRICGENERATOR",n[n.IFCELECTRICMOTOR=1161]="IFCELECTRICMOTOR",n[n.IFCMOTORCONNECTION=1216]="IFCMOTORCONNECTION",n[n.IFCSOLARDEVICE=1270]="IFCSOLARDEVICE",n[n.IFCTRANSFORMER=1303]="IFCTRANSFORMER",n[n.IFCFLOWCONTROLLER=121]="IFCFLOWCONTROLLER",n[n.IFCAIRTERMINALBOX=1096]="IFCAIRTERMINALBOX",n[n.IFCDAMPER=1148]="IFCDAMPER",n[n.IFCFLOWMETER=1182]="IFCFLOWMETER",n[n.IFCVALVE=1311]="IFCVALVE",n[n.IFCELECTRICDISTRIBUTIONBOARD=1157]="IFCELECTRICDISTRIBUTIONBOARD",n[n.IFCELECTRICTIMECONTROL=1162]="IFCELECTRICTIMECONTROL",n[n.IFCPROTECTIVEDEVICE=1235]="IFCPROTECTIVEDEVICE",n[n.IFCSWITCHINGDEVICE=1290]="IFCSWITCHINGDEVICE",n[n.IFCFLOWFITTING=467]="IFCFLOWFITTING",n[n.IFCDUCTFITTING=1153]="IFCDUCTFITTING",n[n.IFCPIPEFITTING=1222]="IFCPIPEFITTING",n[n.IFCCABLECARRIERFITTING=1111]="IFCCABLECARRIERFITTING",n[n.IFCCABLEFITTING=1113]="IFCCABLEFITTING",n[n.IFCJUNCTIONBOX=1195]="IFCJUNCTIONBOX",n[n.IFCFLOWMOVINGDEVICE=502]="IFCFLOWMOVINGDEVICE",n[n.IFCCOMPRESSOR=1131]="IFCCOMPRESSOR",n[n.IFCFAN=1177]="IFCFAN",n[n.IFCPUMP=1238]="IFCPUMP",n[n.IFCFLOWSEGMENT=574]="IFCFLOWSEGMENT",n[n.IFCDUCTSEGMENT=1154]="IFCDUCTSEGMENT",n[n.IFCPIPESEGMENT=1223]="IFCPIPESEGMENT",n[n.IFCCABLECARRIERSEGMENT=1112]="IFCCABLECARRIERSEGMENT",n[n.IFCCABLESEGMENT=1115]="IFCCABLESEGMENT",n[n.IFCFLOWSTORAGEDEVICE=371]="IFCFLOWSTORAGEDEVICE",n[n.IFCTANK=1293]="IFCTANK",n[n.IFCELECTRICFLOWSTORAGEDEVICE=1159]="IFCELECTRICFLOWSTORAGEDEVICE",n[n.IFCFLOWTERMINAL=46]="IFCFLOWTERMINAL",n[n.IFCFIRESUPPRESSIONTERMINAL=1179]="IFCFIRESUPPRESSIONTERMINAL",n[n.IFCSANITARYTERMINAL=1262]="IFCSANITARYTERMINAL",n[n.IFCSTACKTERMINAL=1277]="IFCSTACKTERMINAL",n[n.IFCWASTETERMINAL=1315]="IFCWASTETERMINAL",n[n.IFCAIRTERMINAL=1095]="IFCAIRTERMINAL",n[n.IFCMEDICALDEVICE=1212]="IFCMEDICALDEVICE",n[n.IFCSPACEHEATER=1272]="IFCSPACEHEATER",n[n.IFCAUDIOVISUALAPPLIANCE=1099]="IFCAUDIOVISUALAPPLIANCE",n[n.IFCCOMMUNICATIONSAPPLIANCE=1127]="IFCCOMMUNICATIONSAPPLIANCE",n[n.IFCELECTRICAPPLIANCE=1156]="IFCELECTRICAPPLIANCE",n[n.IFCLAMP=1198]="IFCLAMP",n[n.IFCLIGHTFIXTURE=1199]="IFCLIGHTFIXTURE",n[n.IFCOUTLET=1219]="IFCOUTLET",n[n.IFCFLOWTREATMENTDEVICE=425]="IFCFLOWTREATMENTDEVICE",n[n.IFCINTERCEPTOR=1193]="IFCINTERCEPTOR",n[n.IFCDUCTSILENCER=1155]="IFCDUCTSILENCER",n[n.IFCFILTER=1178]="IFCFILTER",n[n.IFCDISTRIBUTIONCONTROLELEMENT=468]="IFCDISTRIBUTIONCONTROLELEMENT",n[n.IFCPROTECTIVEDEVICETRIPPINGUNIT=1236]="IFCPROTECTIVEDEVICETRIPPINGUNIT",n[n.IFCACTUATOR=1091]="IFCACTUATOR",n[n.IFCALARM=1098]="IFCALARM",n[n.IFCCONTROLLER=1139]="IFCCONTROLLER",n[n.IFCFLOWINSTRUMENT=1181]="IFCFLOWINSTRUMENT",n[n.IFCSENSOR=1264]="IFCSENSOR",n[n.IFCUNITARYCONTROLELEMENT=1308]="IFCUNITARYCONTROLELEMENT",n[n.IFCCIVILELEMENT=1122]="IFCCIVILELEMENT",n[n.IFCELEMENTASSEMBLY=18]="IFCELEMENTASSEMBLY",n[n.IFCGEOGRAPHICELEMENT=1185]="IFCGEOGRAPHICELEMENT",n[n.IFCTRANSPORTELEMENT=416]="IFCTRANSPORTELEMENT",n[n.IFCVIRTUALELEMENT=168]="IFCVIRTUALELEMENT",n[n.IFCSTRUCTURALACTIVITY=41]="IFCSTRUCTURALACTIVITY",n[n.IFCSTRUCTURALACTION=40]="IFCSTRUCTURALACTION",n[n.IFCSTRUCTURALCURVEACTION=1279]="IFCSTRUCTURALCURVEACTION",n[n.IFCSTRUCTURALLINEARACTION=463]="IFCSTRUCTURALLINEARACTION",n[n.IFCSTRUCTURALSURFACEACTION=1284]="IFCSTRUCTURALSURFACEACTION",n[n.IFCSTRUCTURALPLANARACTION=39]="IFCSTRUCTURALPLANARACTION",n[n.IFCSTRUCTURALPOINTACTION=356]="IFCSTRUCTURALPOINTACTION",n[n.IFCSTRUCTURALREACTION=355]="IFCSTRUCTURALREACTION",n[n.IFCSTRUCTURALCURVEREACTION=1280]="IFCSTRUCTURALCURVEREACTION",n[n.IFCSTRUCTURALPOINTREACTION=354]="IFCSTRUCTURALPOINTREACTION",n[n.IFCSTRUCTURALSURFACEREACTION=1285]="IFCSTRUCTURALSURFACEREACTION",n[n.IFCSTRUCTURALITEM=226]="IFCSTRUCTURALITEM",n[n.IFCSTRUCTURALCONNECTION=265]="IFCSTRUCTURALCONNECTION",n[n.IFCSTRUCTURALCURVECONNECTION=534]="IFCSTRUCTURALCURVECONNECTION",n[n.IFCSTRUCTURALPOINTCONNECTION=533]="IFCSTRUCTURALPOINTCONNECTION",n[n.IFCSTRUCTURALSURFACECONNECTION=264]="IFCSTRUCTURALSURFACECONNECTION",n[n.IFCSTRUCTURALMEMBER=225]="IFCSTRUCTURALMEMBER",n[n.IFCSTRUCTURALCURVEMEMBER=224]="IFCSTRUCTURALCURVEMEMBER",n[n.IFCSTRUCTURALCURVEMEMBERVARYING=227]="IFCSTRUCTURALCURVEMEMBERVARYING",n[n.IFCSTRUCTURALSURFACEMEMBER=420]="IFCSTRUCTURALSURFACEMEMBER",n[n.IFCSTRUCTURALSURFACEMEMBERVARYING=421]="IFCSTRUCTURALSURFACEMEMBERVARYING",n[n.IFCPORT=179]="IFCPORT",n[n.IFCDISTRIBUTIONPORT=178]="IFCDISTRIBUTIONPORT",n[n.IFCANNOTATION=634]="IFCANNOTATION",n[n.IFCSPATIALELEMENT=1273]="IFCSPATIALELEMENT",n[n.IFCSPATIALSTRUCTUREELEMENT=170]="IFCSPATIALSTRUCTUREELEMENT",n[n.IFCBUILDING=169]="IFCBUILDING",n[n.IFCBUILDINGSTOREY=459]="IFCBUILDINGSTOREY",n[n.IFCSITE=349]="IFCSITE",n[n.IFCSPACE=454]="IFCSPACE",n[n.IFCEXTERNALSPATIALSTRUCTUREELEMENT=1175]="IFCEXTERNALSPATIALSTRUCTUREELEMENT",n[n.IFCEXTERNALSPATIALELEMENT=1174]="IFCEXTERNALSPATIALELEMENT",n[n.IFCSPATIALZONE=1275]="IFCSPATIALZONE",n[n.IFCGRID=564]="IFCGRID",n[n.IFCPROXY=447]="IFCPROXY"},6105:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryReader=void 0;var r=n(6920),i=function(){function t(){this._buffer=null,this._view=null,this._position=0,this._progress=function(t){},this._lastProgress=0}return Object.defineProperty(t.prototype,"Position",{get:function(){return this._position},enumerable:!1,configurable:!0}),t.prototype.getSubReader=function(e){var n=new t,r=this._buffer.slice(this._position,this._position+e);return n.load(r,null,null),this._position+=e,n},t.prototype.load=function(t,e,n){this._position=0;var i=this;if(n=n||function(t){},this._progress=n,void 0===t||null==t)throw"Source must be defined";if("string"==typeof t){var a=new XMLHttpRequest;a.open("GET",t,!0),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t=new FileReader;t.onloadend=function(){t.result&&"string"!=typeof t.result&&(i._buffer=t.result,i._view=new DataView(i._buffer),i.onloaded&&i.onloaded(i))},t.onprogress=function(t){n({message:"Downloading geometry",percent:Math.floor(t.loaded/t.total*100),type:r.MessageType.PROGRESS})},t.readAsArrayBuffer(a.response)}if(4==a.readyState&&200!=a.status){var e="Failed to fetch binary data from server. Server code: "+a.status+". This might be due to CORS policy of your browser if you run this as a local file.";throw n({message:"Downloading geometry",percent:0,type:r.MessageType.FAILED}),i.onerror&&i.onerror(e),e}},a.responseType="blob",null!=e&&Object.keys(e).forEach((function(t){var n=e[t];a.setRequestHeader(t,n)})),a.send()}else if(t instanceof Blob||"undefined"!=typeof File&&t instanceof File){var o=new FileReader;o.onloadend=function(){o.result&&"string"!=typeof o.result&&(i._buffer=o.result,i._view=new DataView(i._buffer),i.onloaded&&i.onloaded(i))},o.onprogress=function(t){n({message:"Loading binary data",percent:Math.floor(t.loaded/t.total*100),type:r.MessageType.PROGRESS})},o.readAsArrayBuffer(t)}else t instanceof ArrayBuffer&&(this._buffer=t,this._view=new DataView(i._buffer),i.onloaded&&i.onloaded(i))},t.prototype.seek=function(t){if(t<0||t>this._buffer.byteLength)throw"Position out of range.";this._position=t},t.prototype.isEOF=function(){if(null==this._position)throw"Position is not defined";return this._position==this._buffer.byteLength},t.prototype.readArray=function(t,e,n){null==e&&(e=1);var r=t*e,i=this._position;return this._position+=r,this.reportProgress(),1===e?new n(this._buffer.slice(i,i+r))[0]:new n(this._buffer.slice(i,i+r))},t.prototype.move=function(t){var e=this._position;return this._position+=t,this.reportProgress(),e},t.prototype.reportProgress=function(){null!=this._progress&&this._position-this._lastProgress>5e5&&(this._lastProgress=this._position,this._progress({type:r.MessageType.PROGRESS,message:"Processing data",percent:Math.floor(100*this._position/this._buffer.byteLength)}))},t.prototype.readByte=function(){return this.readUint8()},t.prototype.readByteArray=function(t){return this.readUint8Array(t)},t.prototype.readUint8=function(){var t=this.move(1);return this._view.getUint8(t)},t.prototype.readUint8Array=function(t){return this.readArray(1,t,Uint8Array)},t.prototype.readInt16=function(){var t=this.move(2);return this._view.getInt16(t,!0)},t.prototype.readInt16Array=function(t){return this.readArray(2,t,Int16Array)},t.prototype.readUInt16=function(){var t=this.move(2);return this._view.getUint16(t,!0)},t.prototype.readUint16Array=function(t){return this.readArray(2,t,Uint16Array)},t.prototype.readInt32=function(){var t=this.move(4);return this._view.getInt32(t,!0)},t.prototype.readInt32Array=function(t){return this.readArray(4,t,Int32Array)},t.prototype.readUint32=function(){var t=this.move(4);return this._view.getUint32(t,!0)},t.prototype.readUint32Array=function(t){return this.readArray(4,t,Uint32Array)},t.prototype.readFloat32=function(){var t=this.move(4);return this._view.getFloat32(t,!0)},t.prototype.readFloat32Array=function(t){return this.readArray(4,t,Float32Array)},t.prototype.readFloat64=function(){var t=this.move(8);return this._view.getFloat64(t,!0)},t.prototype.readFloat64Array=function(t){return this.readArray(8,t,Float64Array)},t.prototype.readChar=function(t){null==t&&(t=1);var e=this.readByteArray(t),n=new Array(t);for(var r in e)n[r]=String.fromCharCode(e[r]);return 1===t?n[0]:n},t.prototype.readPoint=function(t){null==t&&(t=1);for(var e=this.readFloat32Array(3*t),n=new Array(t),r=0;r<t;r++){var i=3*r*4,a=new Float32Array(e.buffer,i,3);n[r]=a}return 1===t?n[0]:n},t.prototype.readRgba=function(t){null==t&&(t=1);for(var e=this.readByteArray(4*t),n=new Array(t),r=0;r<t;r++){var i=4*r,a=new Uint8Array(e.buffer,i,4);n[r]=a}return 1===t?n[0]:n},t.prototype.readPackedNormal=function(t){null==t&&(t=1);for(var e=this.readUint8Array(2*t),n=new Array(t),r=0;r<t;r++){var i=new Uint8Array(e.buffer,2*r,2);n[r]=i}return 1===t?n[0]:n},t.prototype.readMatrix4x4=function(t){null==t&&(t=1);for(var e=this.readFloat32Array(16*t),n=new Array(t),r=0;r<t;r++){var i=16*r*4,a=new Float32Array(e.buffer,i,16);n[r]=a}return 1===t?n[0]:n},t.prototype.readMatrix4x4_64=function(t){null==t&&(t=1);for(var e=this.readFloat64Array(16*t),n=new Array(t),r=0;r<t;r++){var i=16*r*8,a=new Float64Array(e.buffer,i,16);n[r]=a}return 1===t?n[0]:n},t.prototype.readData=function(t){var e=this.move(t);return this._buffer.slice(e,e+t)},t}();e.BinaryReader=i},3948:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Region=e.ModelGeometry=void 0;var r=n(6105),i=n(3918),a=n(8194),o=n(3425),s=n(6920),l=n(3753),c=function(){function t(){this.normals=new Uint8Array(0),this.indices=new Float32Array(0),this.products=new Float32Array(0),this.transformations=new Float32Array(0),this.styleIndices=new Uint16Array(0),this.states=new Uint8Array(0),this.vertices=new Float32Array(0),this.matrices=new Float32Array(0),this.styles=new Uint8Array(0),this.meter=1e3,this.wcs=[0,0,0],this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=0,this._iTransform=0,this._iMatrix=0,this._maxVersionSupported=4,this.productMaps={},this.productIdLookup=[],this.breaks={10:[],20:[],40:[],30:[],50:[],60:[],70:[],80:[],90:[],100:[]},this._styleMap=new d}return t.prototype.parse=function(t){var e=this;if(t&&!t.isEOF()){this._reader=t;var n=t;if(94132117!==n.readInt32())throw new Error("Magic number mismatch. This is not a wexBIM file.");var r=n.readByte();if(r>this._maxVersionSupported)throw new Error("Viewer doesn't support version "+r+" of the wexBIM stream");var c=n.readInt32(),d=n.readInt32(),h=n.readInt32(),A=n.readInt32(),f=n.readInt32(),p=n.readInt32();this.meter=n.readFloat32(),r>3&&(this.wcs=[n.readFloat64(),n.readFloat64(),n.readFloat64()]);var I=n.readInt16();this.vertices=new Float32Array(this.square(4,3*d)),this.normals=new Uint8Array(6*h),this.indices=new Float32Array(3*h),this.styleIndices=new Uint16Array(3*h),this.styles=new Uint8Array(this.square(1,4*(p+2))),this.products=new Float32Array(3*h),this.states=new Uint8Array(3*h*2),this.transformations=new Float32Array(3*h),this.matrices=new Float32Array(this.square(4,16*A)),this.productMaps={},this.regions=new Array(I),this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=3*h,this._iTransform=0,this._iMatrix=0;for(var m=0;m<I;m++)(O=new u).population=n.readInt32(),O.centre=n.readFloat32Array(3),O.bbox=n.readFloat32Array(6),this.regions[m]=O;for(var g=0;g<p;g++){var v=n.readInt32(),E=255*n.readFloat32(),T=255*n.readFloat32(),C=255*n.readFloat32(),b=255*n.readFloat32();this.styles.set([E,T,C,b],4*g),this._styleMap.Add({id:v,index:g,transparent:b<254})}for(this.styles.set([255,255,255,255],4*g),this._styleMap.Add({id:-1,index:g,transparent:!1}),g++,this.styles.set([0,255,255,100],4*g),this._styleMap.Add({id:-2,index:g,transparent:!0}),m=0;m<f;m++){var R=n.readInt32(),M=n.readInt16(),y=n.readFloat32Array(6),F=new l.ProductMap;F.productID=R,F.renderId=m+1,F.type=M,F.bBox=y,F.spans=[],this.productMaps[R]=F,this.productIdLookup[m+1]=R,M!==o.ProductType.IFCSPACE&&M!==o.ProductType.IFCOPENINGELEMENT||F.states.push(a.State.HIDDEN)}if(r>=3)for(var S=0;S<I;S++){for(var O=this.regions[S],_=n.readInt32(),P=new Array(_),N=0;N<_;N++){var x=this.readShape(r),B=n.readInt32();if(0!==B){var L=n.getSubReader(B);if((D=new i.TriangulatedShape).parse(L),!L.isEOF())throw new Error("Incomplete reading of geometry for shape instance "+x[0].iLabel);P[N]={shapes:x,geometry:D}}}for(P.sort((function(t,n){var r=e.productMaps[t.shapes[0].pLabel],i=e.productMaps[n.shapes[0].pLabel];if(null==r)return 1;if(null==i)return-1;var a=r.bBox[3]*r.bBox[4]*r.bBox[5];return i.bBox[3]*r.bBox[4]*r.bBox[5]-a})),N=0;N<_;N++){var w=P[N];this.feedDataArrays(w.shapes,w.geometry)}}else for(var U=0;U<c;U++){var D;x=this.readShape(r),(D=new i.TriangulatedShape).parse(n),this.feedDataArrays(x,D)}if(!n.isEOF())throw this.progress({type:s.MessageType.FAILED,message:"Processing data",percent:0}),new Error("Binary reader is not at the end of the file.");this.progress({type:s.MessageType.PROGRESS,message:"Processing data",percent:100}),this.transparentIndex=this._iIndexForward,this.breaks[100]=[this.transparentIndex-1,this.transparentIndex]}},t.prototype.square=function(t,e){if(null==t||null==e)throw new Error('Wrong arguments for "square" function.');if(0===e)return 0;for(var n=e*t,r=Math.ceil(Math.sqrt(n/4));4*r%t!=0;)r++;return r*r*4/t},t.prototype.feedDataArrays=function(t,e){var n=this;t.forEach((function(t){var r=0,i=r=t.transparent?n._iIndexBackward-e.indices.length:n._iIndexForward,s=n.productMaps[t.pLabel];void 0===s&&((s=new l.ProductMap).productID=0,s.renderId=0,s.type=o.ProductType.IFCOPENINGELEMENT,s.bBox=new Float32Array(6),s.spans=[],s.states.push(a.State.HIDDEN),n.productMaps[t.pLabel]=s),n.normals.set(e.normals,2*r);var c=s.type===o.ProductType.IFCSPACE||s.type===o.ProductType.IFCOPENINGELEMENT?a.State.HIDDEN:255;e.indices.forEach((function(e){n.indices[r]=e+n._iVertex/3,n.products[r]=s.renderId,n.styleIndices[r]=t.style,n.transformations[r]=t.transform,n.states[2*r]=c,n.states[2*r+1]=255,r++}));var u=r;s.spans.push(new Int32Array([i,u])),t.transparent?n._iIndexBackward-=e.indices.length:n._iIndexForward+=e.indices.length;var d=(n._iIndexForward+n.indices.length-n._iIndexBackward)/n.indices.length*100;Object.getOwnPropertyNames(n.breaks).forEach((function(t){var e=+t;0===n.breaks[e].length&&d>e&&(n.breaks[e]=[n._iIndexForward,n._iIndexBackward])}))}),this),this.vertices.set(e.vertices,this._iVertex),this._iVertex+=e.vertices.length},t.prototype.readShape=function(t){for(var e=this._reader,n=e.readInt32(),r=new Array,i=0;i<n;i++){var a=e.readInt32(),s=(e.readInt16(),e.readInt32()),l=e.readInt32(),c=null;n>1&&(c=1===t?e.readFloat32Array(16):e.readFloat64Array(16),this.matrices.set(c,this._iMatrix),this._iMatrix+=16);var u=this._styleMap.GetStyle(l);null===u&&(u=this._styleMap.GetStyle(-1));var d=this.productMaps[a].type;d!==o.ProductType.IFCSPACE&&d!==o.ProductType.IFCOPENINGELEMENT||(u=this._styleMap.GetStyle(-2)),r.push({pLabel:a,iLabel:s,style:u.index,transparent:u.transparent,transform:null!=c?this._iTransform++:-1})}return r},t.prototype.load=function(t,e,n){var i=this;this.progress=n||function(t){};var a=new r.BinaryReader,o=this;a.onloaded=function(){o.parse(a),o.onloaded&&o.onloaded(i)},a.onerror=function(t){o.onerror&&o.onerror(t)},a.load(t,e,n)},t}();e.ModelGeometry=c;var u=function(){function t(t){this.population=-1,this.centre=null,this.bbox=null,t&&(this.population=t.population,t.centre&&(this.centre=new Float32Array(t.centre)),t.bbox&&(this.bbox=new Float32Array(t.bbox)))}return t.clone=function(e){var n=new t;return n.population=e.population,e.centre&&(n.centre=new Float32Array(e.centre)),e.bbox&&(n.bbox=new Float32Array(e.bbox)),n},t.prototype.merge=function(e){if(-1===this.population&&null===this.centre&&null===this.bbox)return new t(e);var n=new t;if(n.population=this.population+e.population,this.bbox&&e.bbox){var r=Math.min(this.bbox[0],e.bbox[0]),i=Math.min(this.bbox[1],e.bbox[1]),a=Math.min(this.bbox[2],e.bbox[2]),o=Math.max(this.bbox[0]+this.bbox[3],e.bbox[0]+e.bbox[3]),s=Math.max(this.bbox[1]+this.bbox[4],e.bbox[1]+e.bbox[4]),l=Math.max(this.bbox[2]+this.bbox[5],e.bbox[2]+e.bbox[5]),c=o-r,u=s-i,d=l-a,h=(r+o)/2,A=(i+s)/2,f=(a+l)/2;n.bbox=new Float32Array([r,i,a,c,u,d]),n.centre=new Float32Array([h,A,f])}else this.bbox?(n.bbox=new Float32Array(this.bbox),n.centre=new Float32Array(this.centre)):(n.bbox=new Float32Array(e.bbox),n.centre=new Float32Array(e.centre));return n},t}();e.Region=u;var d=function(){function t(){this._internal={}}return t.prototype.Add=function(t){this._internal[t.id]=t},t.prototype.GetStyle=function(t){return this._internal[t]||null},t}()},3918:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TriangulatedShape=void 0;var r=n(6105),i=function(){function t(){var t=this;this.load=function(e){var n=new r.BinaryReader,i=t;n.onloaded=function(){i.parse(n),i.onloaded&&i.onloaded(t)},n.load(e,null,null)}}return t.prototype.parse=function(t){var e=this,n=(t.readByte(),t.readInt32()),r=t.readInt32();e.vertices=t.readFloat32Array(3*n),e.indices=new Uint32Array(3*r),e.normals=new Uint8Array(6*r);var i,a=0;i=n<=255?function(e){return t.readByteArray(e)}:n<=65535?function(e){return t.readUint16Array(e)}:function(e){return t.readInt32Array(e)};var o=t.readInt32();if(0!==n&&0!==r)for(var s=0;s<o;s++){var l=t.readInt32();if(0!=l){var c=l>0;if(l=Math.abs(l),c){var u=t.readByteArray(2),d=i(3*l);e.indices.set(d,a);for(var h=0;h<3*l;h++)e.normals[2*a]=u[0],e.normals[2*a+1]=u[1],a++}else for(h=0;h<l;h++)e.indices[a]=i(),e.normals.set(t.readByteArray(2),2*a),a++,e.indices[a]=i(),e.normals.set(t.readByteArray(2),2*a),a++,e.indices[a]=i(),e.normals.set(t.readByteArray(2),2*a),a++}}},t}();e.TriangulatedShape=i},2607:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SectionBox=void 0;var r=n(887),i=function(){function t(t){var e=this;this.setToInfinity(),this._onChange=function(){e._lastWcs=null,e._lastBBox=null,t&&t()}}return Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(t){this._location=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){this._rotationY=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(t){this._rotationZ=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthX",{get:function(){return this._lengthX},set:function(t){this._lengthX=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthY",{get:function(){return this._lengthY},set:function(t){this._lengthY=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthZ",{get:function(){return this._lengthZ},set:function(t){this._lengthZ=t,this._onChange()},enumerable:!1,configurable:!0}),t.prototype.getMatrix=function(t){var e=r.mat4.create();e=r.mat4.rotateX(r.mat4.create(),e,-this.rotationX/180*Math.PI),e=r.mat4.rotateY(r.mat4.create(),e,-this.rotationY/180*Math.PI),e=r.mat4.rotateZ(r.mat4.create(),e,-this.rotationZ/180*Math.PI);var n=r.vec3.subtract(r.vec3.create(),this.location,t),i=r.vec3.scale(r.vec3.create(),n,-1);e=r.mat4.translate(r.mat4.create(),e,i);var a=r.mat4.ortho(r.mat4.create(),-this.lengthX/2,this.lengthX/2,-this.lengthY/2,this.lengthY/2,-this.lengthZ/2,this.lengthZ/2);return r.mat4.multiply(r.mat4.create(),a,e)},Object.defineProperty(t.prototype,"isSet",{get:function(){return Number.isFinite(this._lengthX)},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.setToInfinity()},t.prototype.setToInfinity=function(){this._location=r.vec3.fromValues(0,0,0),this._rotationX=this._rotationY=this._rotationZ=0,this._lengthX=this._lengthY=this._lengthZ=Number.MAX_SAFE_INTEGER,this._onChange&&this._onChange()},t.prototype.setToBox=function(t){this._location=r.vec3.clone(t.location),this._lengthX=t._lengthX,this._lengthY=t._lengthY,this._lengthZ=t._lengthZ,this._rotationX=t._rotationX,this._rotationY=t._rotationY,this._rotationZ=t._rotationZ,this._onChange&&this._onChange()},t.prototype.setToBoundingBox=function(t){this._location=r.vec3.fromValues(t[0]+t[3]/2,t[1]+t[4]/2,t[2]+t[5]/2),this._lengthX=t[3],this._lengthY=t[4],this._lengthZ=t[5],this._rotationX=0,this._rotationY=0,this._rotationZ=0,this._onChange&&this._onChange()},t.prototype.setToPlanes=function(t){if(null==t||6!==t.length)throw new Error("Invalid input: box has to be defined by 3 clipping planes");for(var e=[],n=[],i=0;i<6;i++)for(var a=t[i],o=i+1;o<6;o++){var s=t[o];if(this.areOrthogonal(a,s))for(var l=o+1;l<6;l++){var c=t[l];if(this.areOrthogonal(a,c)&&this.areOrthogonal(s,c)){var u=a.direction,d=s.direction,h=c.direction,A=a.location,f=s.location,p=c.location,I=this.getDparam(u,A),m=this.getDparam(d,f),g=this.getDparam(h,p),v=r.vec3.fromValues(-I,-m,-g),E=r.mat3.fromValues(u[0],d[0],h[0],u[1],d[1],h[1],u[2],d[2],h[2]),T=r.mat3.determinant(E);if(Math.abs(T)<1e-6)console.warn("Singular system of linear equations. Intersection point for section box can't be computed");else{var C=r.mat3.invert(r.mat3.create(),E),b=r.vec3.transformMat3(r.vec3.create(),v,C);n.push(b),this.addPointToResults(e,a,b),this.addPointToResults(e,s,b),this.addPointToResults(e,c,b)}}}}if(8!==n.length)return console.warn("Section box based on clipping planes should have exactly 8 intersection points"),!1;var R=this.getCentroid(n),M=this.getSize(e[0].plane,t),y=this.getSize(e[1].plane,t),F=this.getSize(e[2].plane,t);if(null==M||null==y||null==F)return console.warn("Section box based on clipping planes should have always two planes pointing to opposite direction"),!1;var S=r.vec3.normalize(r.vec3.create(),e[0].plane.direction),O=r.vec3.normalize(r.vec3.create(),e[1].plane.direction),_=r.vec3.normalize(r.vec3.create(),e[2].plane.direction),P=r.quat.setAxes(r.quat.create(),r.vec3.negate(r.vec3.create(),_),S,O),N=this.toEulerAngles(P);return this._location=R,this._lengthX=M,this._lengthY=y,this._lengthZ=F,this._rotationX=180*N.roll/Math.PI,this._rotationY=180*N.pitch/Math.PI,this._rotationZ=180*-N.yaw/Math.PI,this._onChange&&this._onChange(),!0},t.prototype.getSize=function(t,e){var n=this,i=e.filter((function(e){return n.isOpposite(t.direction,e.direction)})).pop();if(null==i)return null;var a=i.direction[0],o=i.direction[1],s=i.direction[2],l=this.getDparam(i.direction,i.location),c=t.location[0],u=t.location[1],d=t.location[2];return Math.abs(a*c+o*u+s*d+l)/r.vec3.length(i.direction)},t.prototype.toEulerAngles=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=2*(i*e+n*r),o=1-2*(e*e+n*n),s=2*(i*n-r*e),l=2*(i*r+e*n),c=1-2*(n*n+r*r);return{roll:Math.atan2(a,o),pitch:Math.abs(s)>=1?Math.PI/2*Math.sign(s):Math.asin(s),yaw:Math.atan2(l,c)}},t.prototype.isOpposite=function(t,e){var n=r.vec3.angle(t,e);return Math.abs(n-Math.PI)<.01},t.prototype.getCentroid=function(t){var e=t.reduce((function(t,e){return r.vec3.add(r.vec3.create(),t,e)}));return r.vec3.scale(r.vec3.create(),e,1/t.length)},t.prototype.addPointToResults=function(t,e,n){var r=t.filter((function(t){return t.plane===e})).pop();null==r&&(r={plane:e,points:[]},t.push(r)),r.points.push(n)},t.prototype.getDparam=function(t,e){return-t[0]*e[0]-t[1]*e[1]-t[2]*e[2]},t.prototype.areOrthogonal=function(t,e){var n=r.vec3.angle(t.direction,e.direction);return Math.abs(n-Math.PI/2)<.01},t.prototype.getBoundingBox=function(t){if(this._lastBBox&&this._lastWcs&&r.vec3.distance(this._lastWcs,t)<1e-6)return this._lastBBox;var e=this.lengthX/2,n=this.lengthY/2,i=this.lengthZ/2,a=[[-e,-n,-i],[-e,-n,+i],[-e,+n,-i],[-e,+n,+i],[+e,-n,-i],[+e,-n,+i],[+e,+n,-i],[+e,+n,+i]],o=r.vec3.subtract(r.vec3.create(),this.location,t),s=r.mat4.create();s=r.mat4.rotateX(r.mat4.create(),s,this.rotationX*Math.PI/180),s=r.mat4.rotateY(r.mat4.create(),s,this.rotationY*Math.PI/180),s=r.mat4.rotateZ(r.mat4.create(),s,this.rotationZ*Math.PI/180),s=r.mat4.translate(r.mat4.create(),s,o);var l=a.map((function(t){return r.vec3.transformMat4(r.vec3.create(),t,s)})),c=l.reduce((function(t,e){return r.vec3.fromValues(Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.min(t[2],e[2]))})),u=l.reduce((function(t,e){return r.vec3.fromValues(Math.max(t[0],e[0]),Math.max(t[1],e[1]),Math.max(t[2],e[2]))}));return this._lastWcs=t,this._lastBBox=new Float32Array([c[0],c[1],c[2],u[0]-c[0],u[1]-c[1],u[2]-c[2]]),this._lastBBox},t}();e.SectionBox=i},1205:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DepthReader=void 0;var r=n(2411),i=n(1615),a=n(9499),o=function(){function t(t,e){this.gl=t,this.glVersion=e,this.vertices=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]);var n=function(e,n){if(t.shaderSource(e,n),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(e);return console.error(r),!1}return!0};if(this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),!n(this.fragmentShader,r.depth_fragment_shader))throw new Error("Failed to compile depth reading fragment shader");if(this.vertexShader=t.createShader(t.VERTEX_SHADER),!n(this.vertexShader,i.depth_vertex_shader))throw new Error("Failed to compile depth reading vertex shader");this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),t.linkProgram(this.program),t.getProgramParameter(this.program,t.LINK_STATUS)?(t.useProgram(this.program),this.texUniform=t.getUniformLocation(this.program,"texture"),this.vertAttrs=t.getAttribLocation(this.program,"point"),this.vertBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW)):console.error("Could not initialise shaders ")}return t.prototype.draw=function(t){var e=this.gl;e.useProgram(this.program),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(this.texUniform,0),e.bindBuffer(e.ARRAY_BUFFER,this.vertBuffer),e.enableVertexAttribArray(this.vertAttrs),e.vertexAttribPointer(this.vertAttrs,2,e.FLOAT,!1,0,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLES,0,6)},t.prototype.getDepths=function(t,e,n,r){var i=this.gl;i.useProgram(this.program);var o=new a.Framebuffer(i,n,r,!1,this.glVersion);i.viewport(0,0,n,r),this.draw(e);var s=t.map((function(t){return o.getPixel(t.x,t.y)[0]}));return o.delete(),s},t.prototype.getDepth=function(t,e,n,r,i){return this.getDepths([{x:t,y:e}],n,r,i)[0]},t.prototype.delete=function(){var t=this.gl;t.deleteBuffer(this.vertBuffer),t.deleteShader(this.fragmentShader),t.deleteShader(this.vertexShader),t.deleteProgram(this.program)},t}();e.DepthReader=o},2411:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.depth_fragment_shader=void 0,e.depth_fragment_shader=" precision mediump float;\n \n varying vec2 position;\n \n uniform sampler2D texture;\n \n void main() {\n \n float depth = texture2D(texture, position).x; \n\n \n gl_FragColor = vec4(depth, depth, depth, 1.0);\n }"},1615:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.depth_vertex_shader=void 0,e.depth_vertex_shader="attribute highp vec2 point;\n\nvarying vec2 position;\n\nvoid main(void) {\n float x = (point.x * 2.0) - 1.0;\n float y = (point.y * 2.0) - 1.0;\n gl_Position = vec4(x, y, 0.0, 1.0);\n position = point;\n}"},380:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fragment_shader=void 0,e.fragment_shader="precision mediump float;\n\nuniform vec4 uClippingPlaneA;\nuniform vec4 uClippingPlaneB;\nuniform bool uClippingA;\nuniform bool uClippingB;\n\n\nuniform vec3 uGBC;\n\n\nuniform vec3 uLight;\n\n\nuniform mat4 uSectionBox;\n\nvarying vec4 vColor;\n\nvarying vec3 vPosition;\n\nvarying vec3 vNormal;\n\n\nvarying float vDiscard;\n\nvoid main(void) {\n \n if ( vDiscard > 0.5) discard;\n \n \n vec4 fp = uSectionBox * vec4(vPosition, 1);\n if (\n fp.x > 1.0 || fp.x < -1.0 || \n fp.y > 1.0 || fp.y < -1.0 || \n fp.z > 1.0 || fp.z < -1.0) \n discard;\n\n \n if (uClippingA)\n {\n \n vec4 p = uClippingPlaneA;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0){\n discard;\n return;\n }\n }\n\n \n if (uClippingB)\n {\n \n vec4 p = uClippingPlaneB;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0) {\n discard;\n return;\n }\n }\n \n \n if (length(vNormal) < 0.1) {\n gl_FragColor = vColor;\n return;\n }\n\n \n vec3 normalInterp = gl_FrontFacing ? vNormal : -vNormal;\n\n \n float Ka = 1.0; \n float Kd = 1.0; \n float Ks = 0.2; \n float shininessVal = 30.0; \n\n vec3 ambientColor = vColor.rgb * 0.2; \n vec3 diffuseColor = vColor.rgb;\n vec3 specularColor = vec3(1.0, 1.0, 1.0);\n\n vec3 N = normalize(normalInterp);\n vec3 L = normalize(uLight - vPosition);\n\n \n float lambertian = max(dot(N, L), 0.0);\n\n float specular = 0.0;\n\n if(lambertian > 0.0) {\n vec3 R = reflect(-L, N); \n \n vec3 V = L; \n\n \n float specAngle = max(dot(R, V), 0.0);\n specular = pow(specAngle, shininessVal);\n }\n\n vec4 fragColor = vec4(\n Ka * ambientColor +\n Kd * lambertian * diffuseColor +\n Ks * specular * specularColor\n , vColor.a\n );\n\n \n \n fragColor.r = (pow(fragColor.r,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.g = (pow(fragColor.g,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.b = (pow(fragColor.b,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n\n gl_FragColor = fragColor;\n}"},6907:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fragment_shader_300=void 0,e.fragment_shader_300="#version 300 es\nprecision mediump float;\n\nuniform vec4 uClippingPlaneA;\nuniform vec4 uClippingPlaneB;\nuniform bool uClippingA;\nuniform bool uClippingB;\n\nuniform vec3 uGBC;\n\n\nuniform vec3 uLight;\n\n\nuniform mat4 uSectionBox;\n\nin vec4 vColor;\n\nin vec3 vPosition;\n\nin vec3 vNormal;\n\n\nin float vDiscard;\n\n\nout vec4 vFragColor;\n\nvoid main(void) {\n \n if ( vDiscard > 0.5) discard;\n \n \n vec4 fp = uSectionBox * vec4(vPosition, 1);\n if (\n fp.x > 1.0 || fp.x < -1.0 || \n fp.y > 1.0 || fp.y < -1.0 || \n fp.z > 1.0 || fp.z < -1.0) \n discard;\n\n \n if (uClippingA)\n {\n \n vec4 p = uClippingPlaneA;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0){\n discard;\n return;\n }\n }\n\n \n if (uClippingB)\n {\n \n vec4 p = uClippingPlaneB;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0) {\n discard;\n return;\n }\n\n }\n\n \n if (length(vNormal) < 0.1) {\n vFragColor = vColor;\n return;\n }\n\n \n vec3 normalInterp = gl_FrontFacing ? vNormal : -vNormal;\n\n \n float Ka = 0.8; \n float Kd = 1.0; \n float Ks = 0.15; \n float shininessVal = 30.0; \n\n vec3 ambientColor = vColor.rgb * 0.5; \n vec3 diffuseColor = vColor.rgb;\n vec3 specularColor = vec3(1.0, 1.0, 1.0);\n\n vec3 N = normalize(normalInterp);\n vec3 L = normalize(uLight - vPosition);\n\n \n \n float lambertian = max(dot(N, L), 0.0);\n\n \n float specular = 0.0;\n\n \n if (lambertian > 0.0) {\n vec3 R = reflect(-L, N); \n \n vec3 V = L; \n\n \n float specAngle = max(dot(R, V), 0.0);\n specular = pow(specAngle, shininessVal);\n }\n\nvec4 fragColor = vec4(\n Ka * ambientColor +\n Kd * lambertian * diffuseColor +\n Ks * specular * specularColor\n , vColor.a\n );\n\n \n \n fragColor.r = (pow(fragColor.r,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.g = (pow(fragColor.g,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.b = (pow(fragColor.b,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n\n vFragColor = fragColor;\n}"},2241:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vertex_shader=void 0,e.vertex_shader="attribute highp float aVertexIndex;\nattribute highp float aTransformationIndex;\nattribute highp float aStyleIndex;\nattribute highp float aProduct;\nattribute highp vec2 aState;\nattribute highp vec2 aNormal;\n\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\n\nuniform vec4 uHighlightColour;\n\n\nuniform vec4 uXRayColour;\n\n\nuniform float uMeter;\n\n\nuniform vec3 uWcs;\n\n\n\nuniform int uColorCoding;\n\n\n\n\n\n\nuniform int uRenderingMode;\n\n\nuniform highp sampler2D uVertexSampler;\nuniform highp float uVertexTextureSize;\n\n\nuniform highp sampler2D uMatrixSampler;\nuniform highp float uMatrixTextureSize;\n\n\nuniform highp sampler2D uStyleSampler;\nuniform highp float uStyleTextureSize;\n\n\nuniform highp sampler2D uStateStyleSampler;\n\n\nvarying vec4 vColor;\n\nvarying vec3 vPosition;\n\nvarying vec3 vNormal;\n\nvarying mediump float vDiscard;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvec3 getNormal(mat4 transform) {\n float U = aNormal[0];\n float V = aNormal[1];\n float lon = U / 252.0 * 2.0 * PI;\n float lat = V / 252.0 * PI;\n\n float x = sin(lon) * sin(lat);\n float z = cos(lon) * sin(lat);\n float y = cos(lat);\n\n vec3 normal = vec3(x, y, z);\n if (aTransformationIndex < -0.5) {\n return normalize(normal);\n }\n\n \n \n \n \n mat3 normTrans = mat3(transform);\n\n return normalize(vec3(normTrans * normal));\n}\n\nvec4 getIdColor(float id) {\n float B = floor(id / (256.0*256.0));\n float G = floor((id - B * 256.0*256.0) / 256.0);\n float R = mod(id, 256.0);\n \n \n\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n}\n\nvec2 getTextureCoordinates(float index, float size)\n{\n float x = floor(mod(index + 0.5, size)); \n float y = floor((index + 0.5)/ size); \n \n return vec2((x + 0.5) / size, (y + 0.5) / size);\n}\n\n\nvec4 getColor() { \n \n float restyle = aState[1];\n if (restyle > 224.5) {\n vec2 coords = getTextureCoordinates(aStyleIndex, uStyleTextureSize);\n vec4 col = texture2D(uStyleSampler, coords);\n \n \n if (uRenderingMode == 1) {\n float intensity = (col.r + col.g + col.b) / 3.0;\n return vec4(intensity, intensity, intensity, col.a);\n }\n\n \n return col;\n }\n\n \n \n vec2 coords = getTextureCoordinates(restyle, 15.0);\n vec4 col2 = texture2D(uStateStyleSampler, coords);\n\n \n if (uRenderingMode == 1) {\n float intensity = (col2.r + col2.g + col2.b) / 3.0;\n return vec4(intensity, intensity, intensity, col2.a);\n }\n\n return col2;\n}\n\nvec4 getVertexPosition(mat4 transform) {\n vec2 coords = getTextureCoordinates(aVertexIndex, uVertexTextureSize);\n vec3 point = vec3(texture2D(uVertexSampler, coords));\n\n if (aTransformationIndex < -0.5) {\n return vec4(point, 1.0);\n }\n\n return transform * vec4(point, 1.0);\n}\n\nmat4 getTransform() {\n if (aTransformationIndex < -0.5) {\n return mat4(1.0);\n }\n\n float tIndex = aTransformationIndex * 4.0;\n\n \n vec2 c1 = getTextureCoordinates(tIndex, uMatrixTextureSize);\n vec2 c2 = getTextureCoordinates(tIndex + 1.0, uMatrixTextureSize);\n vec2 c3 = getTextureCoordinates(tIndex + 2.0, uMatrixTextureSize);\n vec2 c4 = getTextureCoordinates(tIndex + 3.0, uMatrixTextureSize);\n\n \n vec4 v1 = texture2D(uMatrixSampler, c1);\n vec4 v2 = texture2D(uMatrixSampler, c2);\n vec4 v3 = texture2D(uMatrixSampler, c3);\n vec4 v4 = texture2D(uMatrixSampler, c4);\n\n \n return mat4(v1, v2, v3, v4);\n}\n\nvoid main(void) {\n int state = int(floor(aState[0] + 0.5));\n vDiscard = 0.0;\n\n if (state == 254 || \n (uColorCoding == -1 && state == 251) || \n (uColorCoding == -1 && (\n (uRenderingMode == 2 && state != 253 && state != 252) || \n (uRenderingMode == 3 && (state == 253 || state == 252))) \n ))\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0);\n vPosition = vec3(0.0, 0.0, 0.0);\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n return;\n }\n\n \n mat4 w = mat4(1.0);\n w[3] = w[3] + vec4(uWcs, 0.0);\n\n \n mat4 transform = getTransform();\n vPosition = vec3(w * getVertexPosition(transform));\n vNormal = getNormal(transform);\n\n \n vec4 baseColor = getColor();\n\n \n if (baseColor.a < 0.98)\n {\n float correction = -0.002;\n if (uColorCoding == -2 || uColorCoding >= 0) {\n correction = -0.02;\n }\n vec3 trans = correction * uMeter * normalize(vNormal);\n vPosition = vPosition + trans;\n }\n\n \n if (uColorCoding == -2) {\n float id = floor(aProduct + 0.5);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n \n else if (uColorCoding >= 0) {\n float id = float(uColorCoding);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n \n else {\n \n \n if (state == 253) {\n baseColor = uHighlightColour;\n \n }\n else if (uRenderingMode == 2 || uRenderingMode == 3) {\n \n if (state == 252) { \n baseColor = getColor();\n }\n \n else {\n baseColor = vec4(0.0, 0.0, 0.3, 0.5); \n }\n }\n\n \n vColor = baseColor;\n }\n\n \n gl_Position = uPMatrix * uMVMatrix * vec4(vPosition, 1.0);\n}"},5761:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vertex_shader_300=void 0,e.vertex_shader_300="#version 300 es\nin highp float aVertexIndex;\nin highp float aTransformationIndex;\nin highp float aStyleIndex;\nin highp float aProduct;\nin highp vec2 aState;\nin highp vec2 aNormal;\n\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\n\nuniform vec4 uHighlightColour;\n\n\nuniform vec4 uXRayColour;\n\n\nuniform float uMeter;\n\n\nuniform vec3 uWcs;\n\n\n\nuniform int uColorCoding;\n\n\n\n\n\n\nuniform int uRenderingMode;\n\n\nuniform highp sampler2D uVertexSampler;\nuniform highp float uVertexTextureSize;\n\n\nuniform highp sampler2D uMatrixSampler;\nuniform highp float uMatrixTextureSize;\n\n\nuniform highp sampler2D uStyleSampler;\nuniform highp float uStyleTextureSize;\n\n\nuniform highp sampler2D uStateStyleSampler;\n\n\nout vec4 vColor;\n\nout vec3 vPosition;\n\nout vec3 vNormal;\n\nout mediump float vDiscard;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvec3 getNormal(mat4 transform) {\n float U = aNormal[0];\n float V = aNormal[1];\n float lon = U / 252.0 * 2.0 * PI;\n float lat = V / 252.0 * PI;\n\n float x = sin(lon) * sin(lat);\n float z = cos(lon) * sin(lat);\n float y = cos(lat);\n\n vec3 normal = vec3(x, y, z);\n if (aTransformationIndex < -0.5) {\n return normalize(normal);\n }\n\n \n \n \n \n mat3 normTrans = mat3(transform);\n\n return normalize(vec3(normTrans * normal));\n}\n\nvec4 getIdColor(float id) {\n float B = floor(id / (256.0*256.0));\n float G = floor((id - B * 256.0*256.0) / 256.0);\n float R = mod(id, 256.0);\n \n \n\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n}\n\nvec2 getTextureCoordinates(float index, float size)\n{\n float x = floor(mod(index + 0.5, size)); \n float y = floor((index + 0.5)/ size); \n \n return vec2((x + 0.5) / size, (y + 0.5) / size);\n}\n\n\nvec4 getColor() { \n \n float restyle = aState[1];\n if (restyle > 224.5) {\n vec2 coords = getTextureCoordinates(aStyleIndex, uStyleTextureSize);\n vec4 col = texture(uStyleSampler, coords);\n \n \n if (uRenderingMode == 1) {\n float intensity = (col.r + col.g + col.b) / 3.0;\n return vec4(intensity, intensity, intensity, col.a);\n }\n\n \n return col;\n }\n\n \n \n vec2 coords = getTextureCoordinates(restyle, 15.0);\n vec4 col2 = texture(uStateStyleSampler, coords);\n\n \n if (uRenderingMode == 1) {\n float intensity = (col2.r + col2.g + col2.b) / 3.0;\n return vec4(intensity, intensity, intensity, col2.a);\n }\n\n return col2;\n}\n\nvec4 getVertexPosition(mat4 transform) {\n vec2 coords = getTextureCoordinates(aVertexIndex, uVertexTextureSize);\n vec3 point = vec3(texture(uVertexSampler, coords));\n\n if (aTransformationIndex < -0.5) {\n return vec4 (point, 1.0);\n }\n\n return transform * vec4(point, 1.0);\n}\n\nmat4 getTransform() {\n if (aTransformationIndex < -0.5) {\n return mat4(1.0);\n }\n\n float tIndex = aTransformationIndex * 4.0;\n\n \n vec2 c1 = getTextureCoordinates(tIndex, uMatrixTextureSize);\n vec2 c2 = getTextureCoordinates(tIndex + 1.0, uMatrixTextureSize);\n vec2 c3 = getTextureCoordinates(tIndex + 2.0, uMatrixTextureSize);\n vec2 c4 = getTextureCoordinates(tIndex + 3.0, uMatrixTextureSize);\n\n \n vec4 v1 = texture(uMatrixSampler, c1);\n vec4 v2 = texture(uMatrixSampler, c2);\n vec4 v3 = texture(uMatrixSampler, c3);\n vec4 v4 = texture(uMatrixSampler, c4);\n\n \n return mat4(v1, v2, v3, v4);\n}\n\nvoid main(void) {\n int state = int(floor(aState[0] + 0.5));\n vDiscard = 0.0;\n\n if (state == 254 || \n (uColorCoding == -1 && state == 251) || \n (uColorCoding == -1 && (\n (uRenderingMode == 2 && state != 253 && state != 252) || \n (uRenderingMode == 3 && (state == 253 || state == 252))) \n ))\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0);\n vPosition = vec3(0.0, 0.0, 0.0);\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n return;\n }\n\n \n mat4 w = mat4(1.0);\n w[3] = w[3] + vec4(uWcs, 0.0);\n\n \n mat4 transform = getTransform();\n vPosition = vec3(w * getVertexPosition(transform));\n vNormal = getNormal(transform);\n\n \n vec4 baseColor = getColor();\n\n \n if (baseColor.a < 0.98)\n {\n float correction = -0.002;\n if (uColorCoding == -2 || uColorCoding >= 0) {\n correction = -0.02;\n }\n vec3 trans = correction * uMeter * normalize(vNormal);\n vPosition = vPosition + trans;\n }\n \n \n if (uColorCoding == -2) {\n float id = floor(aProduct + 0.5);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n \n else if (uColorCoding >= 0) {\n float id = float(uColorCoding);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n \n else {\n \n \n if (state == 253) {\n baseColor = uHighlightColour;\n }\n \n else if (uRenderingMode == 2 || uRenderingMode == 3) {\n \n if (state == 252) { \n baseColor = getColor();\n }\n \n else {\n baseColor = uXRayColour; \n }\n }\n \n vColor = baseColor;\n }\n\n \n gl_Position = uPMatrix * uMVMatrix * vec4(vPosition, 1.0);\n}"},8378:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ViewType=e.RenderingMode=e.Viewer=void 0;var r,i,a,o=n(3948),s=n(4932),l=n(9499),c=n(2067),u=n(7751),d=n(380),h=n(2241),A=n(6907),f=n(5761),p=n(7997),I=n(6920),m=n(4802),g=n(810),v=n(5771),E=n(3810),T=n(9549),C=n(887),b=n(1675),R=n(6413),M=n(2607),y=n(5460),F=n(6235),S=n(8948),O=function(){function t(t,e){var n=this;if(this.changed=!0,this._navigationMode="orbit",this.zoomDuration=1e3,this._camera=new R.CameraProperties((function(){n.changed=!0})),this._sectionBox=new M.SectionBox((function(){var t=n.getCurrentWcs(),e=n.getMergedRegion().bbox,r=n._sectionBox.getBoundingBox(t);null!=e&&null!=r&&y.BBox.areDisjoint(e,r)&&console.warn("Section box is disjoint with the current content"),n.changed=!0})),this._background=[230,230,230,255],this._highlightingColour=[255,173,33,255],this._xrayColour=[80,80,80,150],this._mvMatrix=C.mat4.create(),this._pMatrix=C.mat4.create(),this._renderingMode=i.NORMAL,this._mvMatrixTimestamp=Date.now(),this._isRunning=!1,this._plugins=[],this._handles=[],this._shaderProgram=null,this._gamma=1,this._contrast=1,this._brightness=0,this._currentFps=60,this._performance=b.PerformanceRating.HIGH,this._adaptivePerformanceOn=!0,this._events={},this._canvasListeners={},null==t)throw new Error("Canvas has to be defined");if(void 0!==t.nodeName&&"CANVAS"===t.nodeName&&(this.canvas=t),"string"==typeof t&&(this.canvas=document.getElementById(t)),null==this.canvas)throw new Error("You have to specify canvas either as an ID of HTML element or the element itself");if(null!=e&&this.on("error",e),this.cameraProperties.fov=60,this.cameraProperties.near=1,this.cameraProperties.far=100,p.WebGLUtils.setupWebGL(this.canvas,(function(t,e){n.gl=t,n.glVersion=e}),{preserveDrawingBuffer:!0},(function(t){n.error(t)})),this.gl){this._requestAnimationFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window);var r=this.gl;if(this.glVersion<2){if(this._fptExtension=r.getExtension("OES_texture_float")||r.getExtension("MOZ_OES_texture_float")||r.getExtension("WEBKIT_OES_texture_float"),!this._fptExtension)throw new Error("Floating point texture support required.");this._depthTextureExtension=r.getExtension("WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture"),this._depthTextureExtension||console.warn("WebGL 1.0 Depth texture extension not available. Interaction might be constrained as 3D of the event won't be calculated.")}r.enable(r.DEPTH_TEST),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND),this.width=this.canvas.width=this.canvas.offsetWidth,this.height=this.canvas.height=this.canvas.offsetHeight,this._initShaders(),this._initAttributesAndUniforms(),m.MouseNavigation.initMouseEvents(this),g.KeyboardNavigation.initKeyboardEvents(this),v.TouchNavigation.initTouchNavigationEvents(this),v.TouchNavigation.initTouchTapEvents(this),this._disableContextMenu(),this._stateStyles=new Uint8Array(900),this._stateStyleTexture=r.createTexture(),r.activeTexture(r.TEXTURE4),r.bindTexture(r.TEXTURE_2D,this._stateStyleTexture),r.uniform1i(this._stateStyleSamplerUniform,4),s.ModelHandle.bufferTexture(r,this._stateStyleTexture,this._stateStyles);var a=this.height,o=this.width,l=function(){n.canvas.offsetHeight===a&&n.canvas.offsetWidth===o||(a=n.height=n.canvas.height=n.canvas.offsetHeight,o=n.width=n.canvas.width=n.canvas.offsetWidth),n._requestAnimationFrame(l)};l(),this._watchFps(),this._watchPerformance(),this._cameraAdjustment=new F.CameraAdjustment(this,this._requestAnimationFrame,20),this.animations=new T.Animations(this)}else this.error("Unable to set up WebGL")}return Object.defineProperty(t.prototype,"navigationMode",{get:function(){return this._navigationMode},set:function(t){this._navigationMode=t,this.adaptivePerformanceOn="walk"!==t&&"look-around"!==t&&"look-at"!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cameraProperties",{get:function(){return this._camera},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sectionBox",{get:function(){return this._sectionBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this.cameraProperties.type},set:function(t){this.cameraProperties.type=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(t){this._background=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"highlightingColour",{get:function(){return this._highlightingColour},set:function(t){this._highlightingColour=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xrayColour",{get:function(){return this._xrayColour},set:function(t){this._xrayColour=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mvMatrix",{get:function(){return this._mvMatrix},set:function(t){this._mvMatrix=t,this.changed=!0,this._mvMatrixTimestamp=Date.now()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pMatrix",{get:function(){return this._pMatrix},set:function(t){this._pMatrix=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderingMode",{get:function(){return this._renderingMode},set:function(t){this._renderingMode=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gamma",{get:function(){return this._gamma},set:function(t){this._gamma=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this._contrast},set:function(t){this._contrast=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this._brightness},set:function(t){this._brightness=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mvMatrixAge",{get:function(){return Date.now()-this._mvMatrixTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"performance",{get:function(){return this._performance},set:function(t){this._performance=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adaptivePerformanceOn",{get:function(){return this._adaptivePerformanceOn},set:function(t){this._adaptivePerformanceOn=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plugins",{get:function(){return this._plugins.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unitsInMeter",{get:function(){var t=this.activeHandles.map((function(t){return t.meter}));return 0===t.length?null:t[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adjustments",{get:function(){return this._cameraAdjustment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeHandles",{get:function(){return this._handles.filter((function(t){return null!=t&&!t.stopped&&!t.empty}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDepthSupport",{get:function(){return this.glVersion>1||null!=this._depthTextureExtension},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!1,configurable:!0}),t.check=function(){return E.Abilities.check()},t.prototype.addPlugin=function(t){t.init&&(t.init(this),this._plugins.push(t),this.changed=!0)},t.prototype.removePlugin=function(t){var e=this._plugins.indexOf(t,0);e<0||(this._plugins.splice(e,1),this.changed=!0)},t.prototype.defineStyle=function(t,e){if(void 0===t||t<0&&t>224)throw new Error("Style index has to be defined as a number 0-224");if(void 0===e||!e.length||4!==e.length)throw new Error("Colour must be defined as an array of 4 bytes");var n=new Uint8Array(e);this._stateStyles.set(n,4*t);var r=this.setActive();r.activeTexture(r.TEXTURE4),r.bindTexture(r.TEXTURE_2D,this._stateStyleTexture),s.ModelHandle.bufferTexture(r,this._stateStyleTexture,this._stateStyles),this.changed=!0},t.prototype.addState=function(t,e,n){if(void 0===t||!(t>=225&&t<=255))throw new Error("State has to be defined as 225 - 255. Use State enum.");if(null==e)throw new Error("Target must be defined either as type ID or as a list of product IDs");this.forHandleOrAll((function(n){n.addState(t,e)}),n),this.changed=!0},t.prototype.setState=function(t,e,n){if(void 0===t||!(t>=225&&t<=255))throw new Error("State has to be defined as 225 - 255. Use State enum.");if(null==e)throw new Error("Target must be defined either as type ID or as a list of product IDs");this.forHandleOrAll((function(n){n.setState(t,e)}),n),this.changed=!0},t.prototype.removeState=function(t,e,n){if(void 0===t||!(t>=225&&t<=255))throw new Error("State has to be defined as 225 - 255. Use State enum.");if(null==e)throw new Error("Target must be defined either as type ID or as a list of product IDs");this.forHandleOrAll((function(n){n.removeState(t,e)}),n),this.changed=!0},t.prototype.getProductsWithState=function(t){var e=[];return this._handles.filter((function(t){return!t.stopped&&!t.empty})).forEach((function(n){var r=n.getProductsWithState(t);null!=r&&r.length>0&&(e=e.concat(r))})),e},t.prototype.getState=function(t,e){return this.forHandleOrAll((function(e){return e.getState(t)}),e)},t.prototype.resetState=function(t,e){this.forHandleOrAll((function(e){e.resetState(t)}),e),this.changed=!0},t.prototype.clearHighlighting=function(){this._handles.filter((function(t){return!t.stopped&&!t.empty})).forEach((function(t){return t.clearHighlighting()}))},t.prototype.forHandleOrAll=function(t,e){if(null!=e){var n=this.getHandle(e);if(!n)throw new Error("Model with id '"+e+"' doesn't exist.");return t(n)}var r=null;return this._handles.forEach((function(e){if(e){var n=t(e);null!=n&&(r=n)}})),r},t.prototype.getHandle=function(t){return this._handles.filter((function(e){return null!=e&&e.id===t})).pop()},t.prototype.getCurrentImageHtml=function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height);var n=document.createElement("img");return n.src=this.getCurrentImageDataUrl(t,e),n},t.prototype.getCurrentImageDataUrl=function(t,e,n){if(void 0===t&&(t=this.width),void 0===e&&(e=this.height),void 0===n&&(n="png"),0===t||0===e)return null;var r=new l.Framebuffer(this.gl,t,e,!1,this.glVersion);this.draw(r);var i=r.getImageDataUrl(n);return r.delete(),i},t.prototype.getCurrentImageDataArray=function(t,e){if(void 0===t&&(t=this.width),void 0===e&&(e=this.height),0===t||0===e)return null;var n=new l.Framebuffer(this.gl,t,e,!1,this.glVersion);this.draw(n);var r=n.getImageDataArray();return n.delete(),r},t.prototype.getCurrentImageBlob=function(t){return this.canvas.toBlob(t,"image/png")},t.prototype.getProductsStates=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model '"+t+"' doesn't exist");return e.getStates()},t.prototype.restoreProductsStates=function(t,e){var n=this.getHandle(t);if(null==n)throw new Error("Model '"+t+"' doesn't exist");n.resetState(),e.forEach((function(t){t.states.forEach((function(e){n.addState(e,[t.id])}))}))},t.prototype.getModelState=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model '"+t+"' doesn't exist");return e.getModelState()},t.prototype.restoreModelState=function(t,e){var n=this.getHandle(t);if(null==n)throw new Error("Model '"+t+"' doesn't exist");n.restoreModelState(e),this.changed=!0},t.prototype.setStyle=function(t,e,n){if(void 0===t||!(t>=0&&t<=225))throw new Error("Style has to be defined as 0 - 225 where 225 is for default style.");var r=[this._stateStyles[4*t],this._stateStyles[4*t+1],this._stateStyles[4*t+2],this._stateStyles[4*t+3]];0===r[0]&&0===r[1]&&0===r[2]&&0===r[3]&&console.warn("You have used undefined colour for restyling. Elements with this style will have transparent black colour and hence will be invisible."),this.forHandleOrAll((function(n){n.setStyle(t,e)}),n),this.changed=!0},t.prototype.getStyle=function(t,e){this.forHandleOrAll((function(e){return e.getStyle(t)}),e)},t.prototype.resetStyles=function(t){this.forHandleOrAll((function(t){t.resetStyles()}),t),this.changed=!0},t.prototype.getProductType=function(t,e){return this.forHandleOrAll((function(e){var n=e.getProductMap(t);if(n)return n.type}),e)},t.prototype.getProductBoundingBox=function(t,e){var n=this;return this.forHandleOrAll((function(e){var r=n.getCurrentWcs(),i=e.getProductMap(t,r);if(i){var a=i.bBox;return new Float32Array([a[0]+r[0],a[1]+r[1],a[2]+r[2],a[3],a[4],a[5]])}}),e)},t.prototype.getDistanceAndHeight=function(t,e,n){var r=y.BBox.getSizeInView(t,e,n),i=r.width/r.height,a=this.width>0&&this.height>0?this.width/this.height:1,o=r.width,s=r.height;return i>a?s=o/a:i<a&&(o=s*a),{distance:1.5*(s/(2*Math.tan(this.cameraProperties.fov*Math.PI/180/2))+r.depth/2),height:1.5*s}},t.prototype.getTargetBoundingBox=function(t,e){var n=this.getCurrentWcs();if(null!=t)return this.forHandleOrAll((function(e){var r=e.getProductMap(t,n);if(r)return r.bBox}),e)||null;var r=this.getMergedRegion();return r&&r.population>0?r.bbox:null},t.prototype.getTargetsBoundingBox=function(t){var e=this,n=this.getCurrentWcs();return t.reduce((function(t,r){var i=e.forHandleOrAll((function(t){var e=t.getProductMap(r.id,n);if(e)return e.bBox}),r.model);return y.BBox.union(i,t)}),y.BBox.none)},t.prototype.getMergedRegion=function(){var t=new o.Region,e=this.getCurrentWcs();this.activeHandles.forEach((function(n){var r=n.getRegion(e);null!=r&&(t=t.merge(r))}));var n=t.bbox;return this.sectionBox.isSet&&(null==(n=y.BBox.intersection(t.bbox,this.sectionBox.getBoundingBox(e)))?console.debug("View will be empty because section box and actual content region are disjoint"):(t.bbox=new Float32Array(n),t.centre=new Float32Array(y.BBox.centre(n)))),t},t.prototype.getMergedRegionWcs=function(){var t=new o.Region,e=C.vec3.create();return this.activeHandles.forEach((function(n){var r=n.getRegion(e);null!=r&&(t=t.merge(r))})),t},t.prototype.set=function(t){var e=this;Object.getOwnPropertyNames(t).forEach((function(n){e[n]=t[n]}))},t.prototype.loadAsync=function(t,e,n,r){if(void 0===t)throw new Error("You have to specify model to load.");if("string"!=typeof t&&!(t instanceof Blob))throw new Error("Model has to be specified either as a URL to wexBIM file or Blob object representing the wexBIM file.");var i=this,a=r?function(t){t.type===I.MessageType.COMPLETED&&(t.type=I.MessageType.PROGRESS),r(t)}:function(t){};if("undefined"==typeof Worker)return this.load(t,e,n,r),void console.warn("Asynchronous model loading requires Web Worker support in the browser. Falling back to synchronous loading.");var o=new Blob([u.worker],{type:"application/javascript"}),s=new Worker(URL.createObjectURL(o));if(s.onmessage=function(t){var n=t.data;if(n.type===I.MessageType.COMPLETED){var o=n.result;n.result=null,a(n);var s=i.addHandle(o,e,a);r&&r({message:"Model loaded",type:I.MessageType.COMPLETED,percent:100,wexbimId:s})}else a(n)},s.onerror=function(t){i.error(t.message)},"string"==typeof t&&0!==t.indexOf("http")){var l=document.createElement("a");l.href=t,t=l.href}s.postMessage({model:t,headers:n})},t.prototype.load=function(t,e,n,r){if(null==t)throw new Error("You have to specify model to load.");if("string"!=typeof t&&!(t instanceof Blob))throw new Error("Model has to be specified either as a URL to wexBIM file or Blob object representing the wexBIM file.");var i=this,a=new o.ModelGeometry;a.onloaded=function(){i.addHandle(a,e,r)},a.onerror=function(t){i.error(t)};try{a.load(t,n,r)}catch(t){i.error(t)}},t.prototype.addHandle=function(t,e,n){var r=this.setActive(),i=new s.ModelHandle(r,t,n);return i.tag=e,this._handles.push(i),this.setNearAndFarFromCurrentModels(),this.changed=!0,this.fire("loaded",{model:i.id,tag:e}),i.id},t.prototype.setNearAndFarFromCurrentModels=function(){if(0!==this.activeHandles.length){var t=this.getMergedRegion();if(t&&t.bbox&&0!==t.bbox.length){var e=this.activeHandles[0].meter,n=Math.max(t.bbox[3],t.bbox[4],t.bbox[5]);this.cameraProperties.far=20*n,this.cameraProperties.near=e/4}}},t.prototype.unload=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model with id: "+t+" doesn't exist or was unloaded already.");e.stopped=!0;var n=this._handles.indexOf(e);this._handles.splice(n,1),this.changed=!0,e.unload(),this.fire("unloaded",{tag:e.tag,model:e.id})},t.prototype._initShaders=function(){var t=this,e=this.gl,n=function(n,r){if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(n);return t.error(i),console.error(i),!1}return!0},r=e.createShader(e.FRAGMENT_SHADER);if(!(1===this.glVersion?n(r,d.fragment_shader):n(r,A.fragment_shader_300)))return!1;var i=e.createShader(e.VERTEX_SHADER);if(!(1===this.glVersion?n(i,h.vertex_shader):n(i,f.vertex_shader_300)))return!1;this._shaderProgram=e.createProgram(),e.attachShader(this._shaderProgram,i),e.attachShader(this._shaderProgram,r),e.linkProgram(this._shaderProgram),e.getProgramParameter(this._shaderProgram,e.LINK_STATUS)?e.useProgram(this._shaderProgram):(this.error("Could not initialise shaders "),console.error("Could not initialise shaders "))},t.prototype.setActive=function(){var t=this.gl;return t.useProgram(this._shaderProgram),t},t.prototype._initAttributesAndUniforms=function(){var t=this.setActive();this._pMatrixUniformPointer=t.getUniformLocation(this._shaderProgram,"uPMatrix"),this._mvMatrixUniformPointer=t.getUniformLocation(this._shaderProgram,"uMVMatrix"),this._lightUniformPointer=t.getUniformLocation(this._shaderProgram,"uLight"),this._colorCodingUniformPointer=t.getUniformLocation(this._shaderProgram,"uColorCoding"),this._renderingModeUniformPointer=t.getUniformLocation(this._shaderProgram,"uRenderingMode"),this._highlightingColourUniformPointer=t.getUniformLocation(this._shaderProgram,"uHighlightColour"),this._xrayColourUniformPointer=t.getUniformLocation(this._shaderProgram,"uXRayColour"),this._stateStyleSamplerUniform=t.getUniformLocation(this._shaderProgram,"uStateStyleSampler"),this._gammaContrastBrightnessUniform=t.getUniformLocation(this._shaderProgram,"uGBC"),this._sectionBoxUniform=t.getUniformLocation(this._shaderProgram,"uSectionBox"),this._pointers=new c.ModelPointers(t,this._shaderProgram)},t.prototype._disableContextMenu=function(){this.canvas.addEventListener("contextmenu",(function(t){return t.preventDefault(),"contextmenu"!==t.type}))},Object.defineProperty(t.prototype,"meter",{get:function(){var t=this._handles.find((function(t){return!t.stopped}));return t?t.meter:1},enumerable:!1,configurable:!0}),t.prototype.navigate=function(t,e,n,r){if(0!==this.activeHandles.length){var i=this.getCameraPosition(),a=C.vec3.distance(i,r);"look-around"===t&&(r=i,e=-e,n=-n),"look-at"===t&&(r=i);var o=C.vec3.transformMat4(C.vec3.create(),r,this.mvMatrix),s=C.mat4.translate(C.mat4.create(),C.mat4.create(),o),l=function(t){return t*Math.PI/180};switch(t){case"free-orbit":s=C.mat4.rotate(C.mat4.create(),s,l(n/4),[1,0,0]),s=C.mat4.rotate(C.mat4.create(),s,l(e/4),[0,1,0]);break;case"fixed-orbit":case"look-around":case"look-at":case"orbit":C.mat4.rotate(s,s,l(n/4),[1,0,0]);var c=C.vec3.transformMat3(C.vec3.create(),[0,0,1],C.mat3.fromMat4(C.mat3.create(),this.mvMatrix));c=C.vec3.normalize(C.vec3.create(),c),s=C.mat4.rotate(C.mat4.create(),s,l(e/4),c);break;case"pan":var u=0;if(this.camera===R.CameraType.ORTHOGONAL)u=this.cameraProperties.height/this.height;else{var d=this.cameraProperties.fov*Math.PI/180;u=2*a*Math.tan(d/2)/this.height}s=C.mat4.translate(C.mat4.create(),s,[u*e,-u*n,0]);break;case"walk":var h=n*this.meter*.5/20;return void this.animations.addZoom(h,0);case"zoom":var A=C.vec3.subtract(C.vec3.create(),r,i),f=n*Math.max(a,2*this.meter)/20;return void this.animations.addZoom(f,0,A)}var p=C.vec3.negate(C.vec3.create(),o);s=C.mat4.translate(C.mat4.create(),s,p),this.mvMatrix=C.mat4.multiply(C.mat4.create(),s,this.mvMatrix)}},t.prototype.getCurrentWcs=function(){var t=function(t){return!t.empty&&!t.stopped};if(null!=this._lastWcs&&!0===t(this._lastWcs))return this._lastWcs.wcs;var e=this._handles.filter(t)[0];return null!=e?(this._lastWcs=e,this._lastWcs.wcs):C.vec3.create()},t.prototype.draw=function(t,e){var n=this;void 0===e&&(e=!1);var a=this.getCurrentWcs(),o=this.gl;o.clearColor(this.background[0]/255,this.background[1]/255,this.background[2]/255,this.background[3]/255),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);var l=t?t.width:this.width,c=t?t.height:this.height;o.viewport(0,0,l,c),this.updatePMatrix(l,c),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),e||this._plugins.forEach((function(t){t.onBeforeDraw&&t.onBeforeDraw(l,c)})),(o=this.setActive()).activeTexture(o.TEXTURE4),o.bindTexture(o.TEXTURE_2D,this._stateStyleTexture),o.uniform1i(this._stateStyleSamplerUniform,4),o.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),o.uniformMatrix4fv(this._mvMatrixUniformPointer,!1,this.mvMatrix);var u=this.getLightPosition(1*this.meter,1*this.meter);if(o.uniform3fv(this._lightUniformPointer,u),o.uniform3fv(this._gammaContrastBrightnessUniform,new Float32Array([this.gamma,this.contrast,this.brightness])),o.uniformMatrix4fv(this._sectionBoxUniform,!1,this.sectionBox.getMatrix(a)),o.uniform1i(this._colorCodingUniformPointer,r.NONE),o.uniform4fv(this._highlightingColourUniformPointer,new Float32Array([this.highlightingColour[0]/255,this.highlightingColour[1]/255,this.highlightingColour[2]/255,this.highlightingColour[3]/255])),o.uniform4fv(this._xrayColourUniformPointer,new Float32Array([this.xrayColour[0]/255,this.xrayColour[1]/255,this.xrayColour[2]/255,this.xrayColour[3]/255])),t?o.bindFramebuffer(o.FRAMEBUFFER,t.framebuffer):o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this._renderingModeUniformPointer,this.renderingMode),this.renderingMode===i.XRAY||this.renderingMode===i.XRAY_ULTRA)this.drawXRAY(o);else{o.disable(o.CULL_FACE),o.enable(o.DEPTH_TEST);var d=100;switch(this.performance){case b.PerformanceRating.VERY_LOW:d=30;break;case b.PerformanceRating.LOW:d=50;break;case b.PerformanceRating.MEDIUM:d=70;break;case b.PerformanceRating.HIGH:default:d=100}this._handles.forEach((function(t){t.stopped||(t.setActive(n._pointers,a),t.draw(s.DrawMode.SOLID,d))})),this._handles.forEach((function(t){t.stopped||(t.setActive(n._pointers,a),t.draw(s.DrawMode.TRANSPARENT,d))}))}e||this._plugins.forEach((function(t){t.onAfterDraw&&t.onAfterDraw(l,c)}))},t.prototype.getLightPosition=function(t,e){var n=C.mat4.getRotation(C.quat.create(),this.mvMatrix),r=C.quat.invert(C.quat.create(),n),i=C.vec3.transformQuat(C.vec3.create(),[0,1,0],r),a=C.vec3.transformQuat(C.vec3.create(),[1,0,0],r),o=C.vec3.scale(C.vec3.create(),i,t),s=C.vec3.scale(C.vec3.create(),a,e),l=C.vec3.add(C.vec3.create(),o,s),c=this.getCameraPosition();return C.vec3.add(C.vec3.create(),c,l)},t.prototype.drawXRAY=function(t){var e=this,n=this.renderingMode,r=this.getCurrentWcs(),a=function(){t.enable(t.CULL_FACE),t.uniform1i(e._renderingModeUniformPointer,3),t.depthMask(!1),e._handles.forEach((function(t){t.stopped||(t.setActive(e._pointers,r),t.draw())})),t.depthMask(!0)},o=function(){t.disable(t.CULL_FACE),t.uniform1i(e._renderingModeUniformPointer,i.XRAY),t.enable(t.DEPTH_TEST),e._handles.forEach((function(t){t.stopped||(t.setActive(e._pointers,r),t.draw())}))};n===i.XRAY&&(o(),a()),n===i.XRAY_ULTRA&&(a(),o())},t.prototype.updatePMatrix=function(t,e){this.pMatrix=this.cameraProperties.getProjectionMatrix(t,e)},t.prototype.getCameraPosition=function(){var t=C.mat4.invert(C.mat4.create(),this.mvMatrix);return null==t?C.vec3.create():C.vec3.transformMat4(C.vec3.create(),C.vec3.create(),t)},t.prototype.getCameraPositionWcs=function(){var t=this.getCameraPosition(),e=this.getCurrentWcs();return C.vec3.add(C.vec3.create(),t,e)},t.prototype.getCameraDirection=function(){var t=C.mat4.invert(C.mat4.create(),this.mvMatrix),e=C.mat4.getRotation(C.quat.create(),t);return C.vec3.transformQuat(C.vec3.create(),C.vec3.fromValues(0,0,-1),e)},t.prototype.getCameraHeading=function(){var t=C.mat4.invert(C.mat4.create(),this.mvMatrix),e=C.mat4.getRotation(C.quat.create(),t);return C.vec3.transformQuat(C.vec3.create(),C.vec3.fromValues(0,1,0),e)},t.prototype.zoomTo=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=n?this.zoomDuration:0,a=null;if(null==t||"number"==typeof t){if(a=this.getTargetBoundingBox(t,e),!0===r&&"number"==typeof t&&null!=(o=S.PreflightCheck.findView(this,[{id:t,model:e||1}],10)))return this.animations.viewTo(o,i)}else{var o;if(!0===r&&t.length>0&&null!=(o=S.PreflightCheck.findView(this,t,10)))return this.animations.viewTo(o,i);a=t.length>0?this.getTargetsBoundingBox(t):this.getTargetBoundingBox()}if(null==a)return new Promise((function(t,e){return e("There is no content to zoom to")}));var s=C.vec3.fromValues(a[0]+a[3]/2,a[1]+a[4]/2,a[2]+a[5]/2),l=this.getCameraPosition(),c=C.vec3.subtract(C.vec3.create(),l,s);c=C.vec3.normalize(C.vec3.create(),c);var u=C.vec3.angle(c,[0,0,1]),d=C.vec3.fromValues(0,0,1);(Math.abs(u)<1e-6||Math.abs(u-Math.PI)<1e-6)&&(d=this.getCameraHeading());var h=this.getDistanceAndHeight(a,c,d),A=C.vec3.create();C.vec3.scale(A,c,h.distance),C.vec3.add(l,A,s);var f=C.mat4.lookAt(C.mat4.create(),l,s,d);return this.animations.viewTo({mv:f,height:h.height},i)},t.prototype.show=function(t,e,n,r){void 0===r&&(r=!0);var i=this.getTargetBoundingBox(e,n);if(null==i)return new Promise((function(t,e){return e()}));var o=r?this.zoomDuration:0,s=C.vec3.fromValues(i[0]+i[3]/2,i[1]+i[4]/2,i[2]+i[5]/2),l=null,c=C.vec3.fromValues(0,0,1);switch(t){case a.TOP:l=C.vec3.fromValues(0,0,-1),c=C.vec3.fromValues(0,1,0);break;case a.BOTTOM:l=C.vec3.fromValues(0,0,1),c=C.vec3.fromValues(0,-1,0);break;case a.FRONT:l=C.vec3.fromValues(0,1,0);break;case a.BACK:l=C.vec3.fromValues(0,-1,0);break;case a.LEFT:l=C.vec3.fromValues(1,0,0);break;case a.RIGHT:l=C.vec3.fromValues(-1,0,0);break;case a.DEFAULT:l=C.vec3.normalize(C.vec3.create(),[1,1,-1])}var u=this.getDistanceAndHeight(i,l,c),d=C.vec3.negate(C.vec3.create(),l),h=C.vec3.scale(C.vec3.create(),d,u.distance),A=C.vec3.add(C.vec3.create(),s,h),f=C.mat4.lookAt(C.mat4.create(),A,s,c);return this.animations.viewTo({mv:f,height:u.height},o)},t.prototype.startRotation=function(){this.animations.startRotation()},t.prototype.stopRotation=function(){this.animations.stopRotation()},t.prototype.error=function(t){this.fire("error",{message:t}),"undefined"!=typeof console&&null!=console.error&&console.error(t)},t.prototype.getInteractionOrigin=function(t){var e=this.getEventDataFromEvent(t);if(null==e||null==e.id||null==e.model)return null;if(null!=e.xyz)return e.xyz;var n=this.getTargetBoundingBox(e.id,e.model);return C.vec3.fromValues(n[0]+n[3]/2,n[1]+n[4]/2,n[2]+n[5]/2)},t.prototype.getEventDataFromEvent=function(t,e){void 0===e&&(e=!1);var n=t.clientX,r=t.clientY,i=this.canvas.getBoundingClientRect(),a=n-i.left,o=this.height-(r-i.top);if(!e)return this.getEventData(a,o);var s=this.getEventDataRaw(a,o);return null==s?{id:null,model:null,xyz:null}:{id:s.renderId,model:s.modelId,xyz:s.location}},t.prototype.getEventData=function(e,n){var r=this.getEventDataRaw(e,n);if(null==r)return t.noData;var i=r.renderId,a=r.modelId,o=this.getHandle(a);return null!=o?{id:o.getProductId(i),model:a,xyz:r.location}:t.noData},t.prototype.getEventDataRaw=function(t,e){var n=this;if(0===this.width||0===this.height||0===this.activeHandles.length)return null;var i=this.setActive(),a=Math.floor(this.width/4),o=Math.floor(this.height/4),s=this.getCurrentWcs(),c=this.cameraProperties.near,u=this.cameraProperties.far,d=this._isRunning;t=Math.floor(t/4),e=Math.floor(e/4),this._isRunning=!1,null==this._eventFB&&(this._eventFB=new l.Framebuffer(i,a,o,this.hasDepthSupport,this.glVersion)),(Math.abs(a-this._eventFB.width)>1||Math.abs(o-this._eventFB.height)>1)&&(this._eventFB.delete(),this._eventFB=new l.Framebuffer(i,a,o,this.hasDepthSupport,this.glVersion));var h=this._eventFB;h.bind();try{this.setActive(),i.viewport(0,0,a,o),i.enable(i.DEPTH_TEST),i.disable(i.BLEND),i.enable(i.SCISSOR_TEST),i.scissor(t,e,1,1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),this._plugins.forEach((function(t){t.onBeforeDrawId&&t.onBeforeDrawId()})),this.setActive(),i.uniform1i(this._colorCodingUniformPointer,r.PRODUCTS),this._handles.forEach((function(t){!t.stopped&&t.pickable&&(t.setActive(n._pointers,s),t.draw())})),this._plugins.forEach((function(t){t.onAfterDrawId&&t.onAfterDrawId()}));var A=h.getId(t,e);if(null==A)return null;var f=h.getXYZRange(t,e);if(null!=f){var p=C.mat4.invert(C.mat4.create(),this.pMatrix),I=C.vec3.transformMat4(C.vec3.create(),f.near,p),m=C.vec3.transformMat4(C.vec3.create(),f.far,p),g=-1*I[2],v=-1*m[2];this.cameraProperties.near=g,this.cameraProperties.far=v}this.setActive(),i.bindFramebuffer(i.FRAMEBUFFER,h.framebuffer),this.updatePMatrix(a,o),i.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),this._handles.forEach((function(t){!t.stopped&&t.pickable&&(i.uniform1i(n._colorCodingUniformPointer,t.id),t.setActive(n._pointers,s),t.draw())})),this._plugins.forEach((function(t){t.onAfterDrawModelId&&t.onAfterDrawModelId()}));var E=h.getId(t,e),T=h.getXYZ(t,e),b=null;if(null!=T){var R=C.mat4.multiply(C.mat4.create(),this.pMatrix,this.mvMatrix),M=C.mat4.invert(C.mat4.create(),R);b=C.vec3.transformMat4(C.vec3.create(),T,M)}return{location:b,modelId:E,renderId:A}}catch(t){this.error(t)}finally{this.setActive(),i.bindFramebuffer(i.FRAMEBUFFER,null),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.enable(i.BLEND),i.disable(i.SCISSOR_TEST),this.cameraProperties.near=c,this.cameraProperties.far=u,this.updatePMatrix(a,o),i.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),this._isRunning=d}},t.prototype.getData=function(t){var e=this;if(0===this.width||0===this.height||0===this.activeHandles.length)return null;var n=this.setActive(),i=Math.floor(this.width/4),a=Math.floor(this.height/4),o=this.getCurrentWcs(),s=this._isRunning;t=t.map((function(t){return{x:Math.floor(t.x/4),y:Math.floor(t.y/4)}})),this._isRunning=!1;var c=new l.Framebuffer(n,i,a,!1,this.glVersion);c.bind();try{this.setActive(),n.viewport(0,0,i,a),n.enable(n.DEPTH_TEST),n.disable(n.BLEND),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this.setActive(),n.uniform1i(this._colorCodingUniformPointer,r.PRODUCTS),this.updatePMatrix(i,a),n.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),n.uniformMatrix4fv(this._mvMatrixUniformPointer,!1,this.mvMatrix),this._handles.forEach((function(t){t.stopped||(t.setActive(e._pointers,o),t.draw())}));var u=c.getIds(t);this.setActive(),n.bindFramebuffer(n.FRAMEBUFFER,c.framebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this._handles.forEach((function(t){t.stopped||(n.uniform1i(e._colorCodingUniformPointer,t.id),t.setActive(e._pointers,o),t.draw())}));var d=c.getIds(t);return u.map((function(t,n){if(null==t)return null;var r=d[n];if(null==r)return null;var i=e.getHandle(r);return null==i?null:{id:i.getProductId(t),model:r}}))}catch(t){this.error(t)}finally{this.setActive(),n.bindFramebuffer(n.FRAMEBUFFER,null),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.enable(n.BLEND),this._isRunning=s}},t.prototype.isolate=function(t,e){var n=this.getHandle(e);if(!n)throw new Error("Model with id "+e+" doesn't exist.");n.isolatedProducts=t},t.prototype.getIsolated=function(t){var e=this.getHandle(t);if(!e)throw new Error("Model with id "+t+" doesn't exist.");return e.isolatedProducts},t.prototype._watchFps=function(){var t=this,e=Date.now(),n=0,r=function(){n++;var i=Date.now(),a=i-e;if(a>=500){var o=1e3/a*n;e=i,n=0,Math.abs(t._currentFps-o)>=1&&(t._currentFps=o,t.fire("fps",Math.floor(o)))}t._requestAnimationFrame(r)};r()},t.prototype._watchPerformance=function(){var t=this,e=!1,n=function(){if(t._adaptivePerformanceOn){var r=t.mvMatrixAge,i=t._currentFps;if(!(r>1e3)||e){if(r>1e3)return e=!1,t.performance=b.PerformanceRating.HIGH,t.fire("navigationEnd",!0),void(t.activeHandles.length>0&&t.draw());e=!0,i<10&&t.performance>b.PerformanceRating.VERY_LOW?t.performance=b.PerformanceRating.VERY_LOW:i<20&&t.performance>b.PerformanceRating.LOW?t.performance=b.PerformanceRating.LOW:i<30&&t.performance>b.PerformanceRating.MEDIUM&&(t.performance=b.PerformanceRating.MEDIUM),t._requestAnimationFrame(n)}}else t.performance=b.PerformanceRating.HIGH};setInterval(n,500)},t.prototype.start=function(t){var e=this;if(null!=t){var n=this.getHandle(t);if(void 0===n)throw new Error("Model doesn't exist.");if(n.stopped=!1,this.setNearAndFarFromCurrentModels(),this._isRunning)return}if(this.changed=!0,this.setNearAndFarFromCurrentModels(),!this._isRunning){this._isRunning=!0;var r=function(){e._isRunning&&(0===e._handles.length||!e.changed&&0===e.activeHandles.filter((function(t){return t.changed})).length||(e.draw(),e.changed=!1),e._requestAnimationFrame(r))};r()}},t.prototype.stop=function(t){if(null!=t){var e=this.getHandle(t);if(null==e)throw new Error("Model doesn't exist.");e.stopped=!0,this.changed=!0,this.setNearAndFarFromCurrentModels()}else this._isRunning=!1},t.prototype.stopAll=function(){var t=this;this._handles.forEach((function(e){e.stopped=!0,t.changed=!0})),this._isRunning=!1},t.prototype.isModelOn=function(t){var e=this.getHandle(t);return!!e&&!e.stopped},t.prototype.isProductInModel=function(t,e){var n=this.getHandle(e);return!!n&&null!=n.getState(t)},t.prototype.isModelLoaded=function(t){return!!this.getHandle(t)},t.prototype.startAll=function(){var t=this;this._handles.forEach((function(e){e.stopped=!1,t.changed=!0})),this._isRunning=!0},t.prototype.stopPicking=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model doesn't exist.");e.pickable=!1},t.prototype.startPicking=function(t){var e=this.getHandle(t);if(void 0===e)throw new Error("Model doesn't exist.");e.pickable=!0},t.prototype.isPickable=function(t){return this.getHandle(t).pickable},t.prototype.on=function(t,e){var n=this,r=this._events;r[t]||(r[t]=[]),r[t].push(e);var i="on"+t;if((void 0!==this.canvas[i]||void 0!==document[i])&&null==this._canvasListeners[t]){var a=function(e){if("pointerlockchange"!==e.type){var r,i=t;e instanceof MouseEvent?null!=(r=n.getEventDataFromEvent(e))&&n.fire(i,{event:e,id:r.id,model:r.model,xyz:r.xyz}):e instanceof TouchEvent&&null!=(r=n.getEventDataFromEvent(e.touches[e.touches.length-1]))&&n.fire(i,{event:e,id:r.id,model:r.model,xyz:r.xyz})}else n.fire("pointerlockchange",{target:document.pointerLockElement})};"pointerlockchange"===t||"pointerlockerror"===t?document.addEventListener(t,a,!1):this.canvas.addEventListener(t,a),this._canvasListeners[t]=a}},t.prototype.off=function(t,e){var n=this._events[t];if(n){var r=n.indexOf(e);if(r>=0){n.splice(r,1);var i=this._canvasListeners[t];0===n.length&&null!==i&&("pointerlockchange"===t||"pointerlockerror"===t?document.removeEventListener(t,i):this.canvas.removeEventListener(t,i),this._canvasListeners[t]=null)}}},t.prototype.fire=function(t,e){var n=this._events[t];n&&n.slice().forEach((function(t){try{t(e)}catch(t){console.error(t)}}))},t.prototype.disableTextSelection=function(){document.documentElement.style["-webkit-touch-callout"]="none",document.documentElement.style["-webkit-user-select"]="none",document.documentElement.style["-khtml-user-select"]="none",document.documentElement.style["-moz-user-select"]="none",document.documentElement.style["-ms-user-select"]="none",document.documentElement.style["user-select"]="none"},t.prototype.enableTextSelection=function(){document.documentElement.style["-webkit-touch-callout"]="text",document.documentElement.style["-webkit-user-select"]="text",document.documentElement.style["-khtml-user-select"]="text",document.documentElement.style["-moz-user-select"]="text",document.documentElement.style["-ms-user-select"]="text",document.documentElement.style["user-select"]="text"},t.prototype.clip=function(t,e){if(null==t||null==e)throw new Error("Cutting plane not well defined");var n=0-e[0]*t[0]-e[1]*t[1]-e[2]*t[2];this._handles.forEach((function(t){t.clippingPlaneA=[e[0],e[1],e[2],n],t.clippingPlaneB=null}))},t.prototype.setClippingPlaneA=function(t,e){if(null!=e){var n=this.getHandle(e);n&&(n.clippingPlaneA=t)}else this._handles.forEach((function(e){e.clippingPlaneA=t}))},t.prototype.setClippingPlaneB=function(t,e){if(null!=e){var n=this.getHandle(e);n&&(n.clippingPlaneB=t)}else this._handles.forEach((function(e){e.clippingPlaneB=t}))},t.prototype.unclip=function(t){if(null!=t){var e=this.getHandle(t);e&&(e.clippingPlaneA=null,e.clippingPlaneB=null)}else this._handles.forEach((function(t){t.clippingPlaneA=null,t.clippingPlaneB=null}))},t.prototype.getClip=function(t){var e;return(e=null==t?this._handles.filter((function(t){return t.clippable&&!t.stopped&&(null!=t.clippingPlaneA||null!=t.clippingPlaneB)})).pop():this.getHandle(t))?{PlaneA:e.clippingPlaneA,PlaneB:e.clippingPlaneB}:null},t.noData={id:null,model:null,xyz:null},t}();e.Viewer=O,function(t){t[t.NONE=-1]="NONE",t[t.PRODUCTS=-2]="PRODUCTS"}(r||(r={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.GRAYSCALE=1]="GRAYSCALE",t[t.XRAY=2]="XRAY",t[t.XRAY_ULTRA=4]="XRAY_ULTRA"}(i=e.RenderingMode||(e.RenderingMode={})),function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t[t.FRONT=2]="FRONT",t[t.BACK=3]="BACK",t[t.LEFT=4]="LEFT",t[t.RIGHT=5]="RIGHT",t[t.DEFAULT=6]="DEFAULT"}(a=e.ViewType||(e.ViewType={}))},7751:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.worker=void 0,e.worker='!function(e,r){for(var t in r)e[t]=r[t];r.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})}(this,(()=>{"use strict";var e={747:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MessageType=r.Message=void 0;var t;r.Message=function(){},(t=r.MessageType||(r.MessageType={}))[t.PROGRESS=0]="PROGRESS",t[t.COMPLETED=1]="COMPLETED",t[t.FAILED=2]="FAILED"},18:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ProductMap=void 0;var I=t(486),a=function(){function e(){this.states=[]}return e.clone=function(r){var t=new e;return t.productID=r.productID,t.renderId=r.renderId,t.type=r.type,t.bBox=new Float32Array(r.bBox),t.spans=r.spans,t.states=r.states.slice(0),t},e.addState=function(e,r){null==e.states.find((function(e){return e===r}))&&e.states.push(r)},e.removeState=function(e,r){var t=e.states.indexOf(r);t<0||e.states.splice(t,1)},e.getState=function(e){return null==e.states||0===e.states.length?I.State.UNDEFINED:I.StatePriorities.getHighestPriority(e.states)},e}();r.ProductMap=a},486:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.StatePriorities=r.State=void 0,function(e){e[e.UNDEFINED=255]="UNDEFINED",e[e.HIDDEN=254]="HIDDEN",e[e.HIGHLIGHTED=253]="HIGHLIGHTED",e[e.XRAYVISIBLE=252]="XRAYVISIBLE",e[e.PICKING_ONLY=251]="PICKING_ONLY",e[e.UNSTYLED=225]="UNSTYLED"}(t=r.State||(r.State={}));var I=function(){function e(){}return e.getPriority=function(e){switch(e){case t.HIGHLIGHTED:return 1;case t.PICKING_ONLY:return 2;case t.HIDDEN:return 3;case t.XRAYVISIBLE:return 4;default:return 100}},e.getHighestPriority=function(e){var r=this;if(null==e||0===e.length)return null;if(1===e.length)return e[0];var I=e.map((function(e){return{state:e,priority:r.getPriority(e)}}));I.sort((function(e,r){return e.priority-r.priority}));var a=I[0];return a.priority>50?t.UNDEFINED:a.state},e}();r.StatePriorities=I},66:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.ProductType=void 0,(t=r.ProductType||(r.ProductType={}))[t.IFCPRODUCT=20]="IFCPRODUCT",t[t.IFCELEMENT=19]="IFCELEMENT",t[t.IFCBUILDINGELEMENT=26]="IFCBUILDINGELEMENT",t[t.IFCFOOTING=120]="IFCFOOTING",t[t.IFCPILE=572]="IFCPILE",t[t.IFCBEAM=171]="IFCBEAM",t[t.IFCBEAMSTANDARDCASE=1104]="IFCBEAMSTANDARDCASE",t[t.IFCBUILDINGELEMENTPROXY=560]="IFCBUILDINGELEMENTPROXY",t[t.IFCCHIMNEY=1120]="IFCCHIMNEY",t[t.IFCCOLUMN=383]="IFCCOLUMN",t[t.IFCCOLUMNSTANDARDCASE=1126]="IFCCOLUMNSTANDARDCASE",t[t.IFCCOVERING=382]="IFCCOVERING",t[t.IFCCURTAINWALL=456]="IFCCURTAINWALL",t[t.IFCDOOR=213]="IFCDOOR",t[t.IFCDOORSTANDARDCASE=1151]="IFCDOORSTANDARDCASE",t[t.IFCMEMBER=310]="IFCMEMBER",t[t.IFCMEMBERSTANDARDCASE=1214]="IFCMEMBERSTANDARDCASE",t[t.IFCPLATE=351]="IFCPLATE",t[t.IFCPLATESTANDARDCASE=1224]="IFCPLATESTANDARDCASE",t[t.IFCRAILING=350]="IFCRAILING",t[t.IFCRAMP=414]="IFCRAMP",t[t.IFCRAMPFLIGHT=348]="IFCRAMPFLIGHT",t[t.IFCROOF=347]="IFCROOF",t[t.IFCSHADINGDEVICE=1265]="IFCSHADINGDEVICE",t[t.IFCSLAB=99]="IFCSLAB",t[t.IFCSLABELEMENTEDCASE=1268]="IFCSLABELEMENTEDCASE",t[t.IFCSLABSTANDARDCASE=1269]="IFCSLABSTANDARDCASE",t[t.IFCSTAIR=346]="IFCSTAIR",t[t.IFCSTAIRFLIGHT=25]="IFCSTAIRFLIGHT",t[t.IFCWALL=452]="IFCWALL",t[t.IFCWALLELEMENTEDCASE=1314]="IFCWALLELEMENTEDCASE",t[t.IFCWALLSTANDARDCASE=453]="IFCWALLSTANDARDCASE",t[t.IFCWINDOW=667]="IFCWINDOW",t[t.IFCWINDOWSTANDARDCASE=1316]="IFCWINDOWSTANDARDCASE",t[t.IFCELEMENTCOMPONENT=424]="IFCELEMENTCOMPONENT",t[t.IFCREINFORCINGELEMENT=262]="IFCREINFORCINGELEMENT",t[t.IFCREINFORCINGBAR=571]="IFCREINFORCINGBAR",t[t.IFCREINFORCINGMESH=531]="IFCREINFORCINGMESH",t[t.IFCTENDON=261]="IFCTENDON",t[t.IFCTENDONANCHOR=675]="IFCTENDONANCHOR",t[t.IFCBUILDINGELEMENTPART=220]="IFCBUILDINGELEMENTPART",t[t.IFCDISCRETEACCESSORY=423]="IFCDISCRETEACCESSORY",t[t.IFCFASTENER=535]="IFCFASTENER",t[t.IFCMECHANICALFASTENER=536]="IFCMECHANICALFASTENER",t[t.IFCVIBRATIONISOLATOR=1312]="IFCVIBRATIONISOLATOR",t[t.IFCFEATUREELEMENT=386]="IFCFEATUREELEMENT",t[t.IFCSURFACEFEATURE=1287]="IFCSURFACEFEATURE",t[t.IFCFEATUREELEMENTSUBTRACTION=499]="IFCFEATUREELEMENTSUBTRACTION",t[t.IFCVOIDINGFEATURE=1313]="IFCVOIDINGFEATURE",t[t.IFCOPENINGELEMENT=498]="IFCOPENINGELEMENT",t[t.IFCOPENINGSTANDARDCASE=1217]="IFCOPENINGSTANDARDCASE",t[t.IFCFEATUREELEMENTADDITION=385]="IFCFEATUREELEMENTADDITION",t[t.IFCPROJECTIONELEMENT=384]="IFCPROJECTIONELEMENT",t[t.IFCFURNISHINGELEMENT=253]="IFCFURNISHINGELEMENT",t[t.IFCFURNITURE=1184]="IFCFURNITURE",t[t.IFCSYSTEMFURNITUREELEMENT=1291]="IFCSYSTEMFURNITUREELEMENT",t[t.IFCDISTRIBUTIONELEMENT=44]="IFCDISTRIBUTIONELEMENT",t[t.IFCDISTRIBUTIONFLOWELEMENT=45]="IFCDISTRIBUTIONFLOWELEMENT",t[t.IFCDISTRIBUTIONCHAMBERELEMENT=180]="IFCDISTRIBUTIONCHAMBERELEMENT",t[t.IFCENERGYCONVERSIONDEVICE=175]="IFCENERGYCONVERSIONDEVICE",t[t.IFCAIRTOAIRHEATRECOVERY=1097]="IFCAIRTOAIRHEATRECOVERY",t[t.IFCBOILER=1105]="IFCBOILER",t[t.IFCBURNER=1109]="IFCBURNER",t[t.IFCCHILLER=1119]="IFCCHILLER",t[t.IFCCOIL=1124]="IFCCOIL",t[t.IFCCONDENSER=1132]="IFCCONDENSER",t[t.IFCCOOLEDBEAM=1141]="IFCCOOLEDBEAM",t[t.IFCCOOLINGTOWER=1142]="IFCCOOLINGTOWER",t[t.IFCENGINE=1164]="IFCENGINE",t[t.IFCEVAPORATIVECOOLER=1166]="IFCEVAPORATIVECOOLER",t[t.IFCEVAPORATOR=1167]="IFCEVAPORATOR",t[t.IFCHEATEXCHANGER=1187]="IFCHEATEXCHANGER",t[t.IFCHUMIDIFIER=1188]="IFCHUMIDIFIER",t[t.IFCTUBEBUNDLE=1305]="IFCTUBEBUNDLE",t[t.IFCUNITARYEQUIPMENT=1310]="IFCUNITARYEQUIPMENT",t[t.IFCELECTRICGENERATOR=1160]="IFCELECTRICGENERATOR",t[t.IFCELECTRICMOTOR=1161]="IFCELECTRICMOTOR",t[t.IFCMOTORCONNECTION=1216]="IFCMOTORCONNECTION",t[t.IFCSOLARDEVICE=1270]="IFCSOLARDEVICE",t[t.IFCTRANSFORMER=1303]="IFCTRANSFORMER",t[t.IFCFLOWCONTROLLER=121]="IFCFLOWCONTROLLER",t[t.IFCAIRTERMINALBOX=1096]="IFCAIRTERMINALBOX",t[t.IFCDAMPER=1148]="IFCDAMPER",t[t.IFCFLOWMETER=1182]="IFCFLOWMETER",t[t.IFCVALVE=1311]="IFCVALVE",t[t.IFCELECTRICDISTRIBUTIONBOARD=1157]="IFCELECTRICDISTRIBUTIONBOARD",t[t.IFCELECTRICTIMECONTROL=1162]="IFCELECTRICTIMECONTROL",t[t.IFCPROTECTIVEDEVICE=1235]="IFCPROTECTIVEDEVICE",t[t.IFCSWITCHINGDEVICE=1290]="IFCSWITCHINGDEVICE",t[t.IFCFLOWFITTING=467]="IFCFLOWFITTING",t[t.IFCDUCTFITTING=1153]="IFCDUCTFITTING",t[t.IFCPIPEFITTING=1222]="IFCPIPEFITTING",t[t.IFCCABLECARRIERFITTING=1111]="IFCCABLECARRIERFITTING",t[t.IFCCABLEFITTING=1113]="IFCCABLEFITTING",t[t.IFCJUNCTIONBOX=1195]="IFCJUNCTIONBOX",t[t.IFCFLOWMOVINGDEVICE=502]="IFCFLOWMOVINGDEVICE",t[t.IFCCOMPRESSOR=1131]="IFCCOMPRESSOR",t[t.IFCFAN=1177]="IFCFAN",t[t.IFCPUMP=1238]="IFCPUMP",t[t.IFCFLOWSEGMENT=574]="IFCFLOWSEGMENT",t[t.IFCDUCTSEGMENT=1154]="IFCDUCTSEGMENT",t[t.IFCPIPESEGMENT=1223]="IFCPIPESEGMENT",t[t.IFCCABLECARRIERSEGMENT=1112]="IFCCABLECARRIERSEGMENT",t[t.IFCCABLESEGMENT=1115]="IFCCABLESEGMENT",t[t.IFCFLOWSTORAGEDEVICE=371]="IFCFLOWSTORAGEDEVICE",t[t.IFCTANK=1293]="IFCTANK",t[t.IFCELECTRICFLOWSTORAGEDEVICE=1159]="IFCELECTRICFLOWSTORAGEDEVICE",t[t.IFCFLOWTERMINAL=46]="IFCFLOWTERMINAL",t[t.IFCFIRESUPPRESSIONTERMINAL=1179]="IFCFIRESUPPRESSIONTERMINAL",t[t.IFCSANITARYTERMINAL=1262]="IFCSANITARYTERMINAL",t[t.IFCSTACKTERMINAL=1277]="IFCSTACKTERMINAL",t[t.IFCWASTETERMINAL=1315]="IFCWASTETERMINAL",t[t.IFCAIRTERMINAL=1095]="IFCAIRTERMINAL",t[t.IFCMEDICALDEVICE=1212]="IFCMEDICALDEVICE",t[t.IFCSPACEHEATER=1272]="IFCSPACEHEATER",t[t.IFCAUDIOVISUALAPPLIANCE=1099]="IFCAUDIOVISUALAPPLIANCE",t[t.IFCCOMMUNICATIONSAPPLIANCE=1127]="IFCCOMMUNICATIONSAPPLIANCE",t[t.IFCELECTRICAPPLIANCE=1156]="IFCELECTRICAPPLIANCE",t[t.IFCLAMP=1198]="IFCLAMP",t[t.IFCLIGHTFIXTURE=1199]="IFCLIGHTFIXTURE",t[t.IFCOUTLET=1219]="IFCOUTLET",t[t.IFCFLOWTREATMENTDEVICE=425]="IFCFLOWTREATMENTDEVICE",t[t.IFCINTERCEPTOR=1193]="IFCINTERCEPTOR",t[t.IFCDUCTSILENCER=1155]="IFCDUCTSILENCER",t[t.IFCFILTER=1178]="IFCFILTER",t[t.IFCDISTRIBUTIONCONTROLELEMENT=468]="IFCDISTRIBUTIONCONTROLELEMENT",t[t.IFCPROTECTIVEDEVICETRIPPINGUNIT=1236]="IFCPROTECTIVEDEVICETRIPPINGUNIT",t[t.IFCACTUATOR=1091]="IFCACTUATOR",t[t.IFCALARM=1098]="IFCALARM",t[t.IFCCONTROLLER=1139]="IFCCONTROLLER",t[t.IFCFLOWINSTRUMENT=1181]="IFCFLOWINSTRUMENT",t[t.IFCSENSOR=1264]="IFCSENSOR",t[t.IFCUNITARYCONTROLELEMENT=1308]="IFCUNITARYCONTROLELEMENT",t[t.IFCCIVILELEMENT=1122]="IFCCIVILELEMENT",t[t.IFCELEMENTASSEMBLY=18]="IFCELEMENTASSEMBLY",t[t.IFCGEOGRAPHICELEMENT=1185]="IFCGEOGRAPHICELEMENT",t[t.IFCTRANSPORTELEMENT=416]="IFCTRANSPORTELEMENT",t[t.IFCVIRTUALELEMENT=168]="IFCVIRTUALELEMENT",t[t.IFCSTRUCTURALACTIVITY=41]="IFCSTRUCTURALACTIVITY",t[t.IFCSTRUCTURALACTION=40]="IFCSTRUCTURALACTION",t[t.IFCSTRUCTURALCURVEACTION=1279]="IFCSTRUCTURALCURVEACTION",t[t.IFCSTRUCTURALLINEARACTION=463]="IFCSTRUCTURALLINEARACTION",t[t.IFCSTRUCTURALSURFACEACTION=1284]="IFCSTRUCTURALSURFACEACTION",t[t.IFCSTRUCTURALPLANARACTION=39]="IFCSTRUCTURALPLANARACTION",t[t.IFCSTRUCTURALPOINTACTION=356]="IFCSTRUCTURALPOINTACTION",t[t.IFCSTRUCTURALREACTION=355]="IFCSTRUCTURALREACTION",t[t.IFCSTRUCTURALCURVEREACTION=1280]="IFCSTRUCTURALCURVEREACTION",t[t.IFCSTRUCTURALPOINTREACTION=354]="IFCSTRUCTURALPOINTREACTION",t[t.IFCSTRUCTURALSURFACEREACTION=1285]="IFCSTRUCTURALSURFACEREACTION",t[t.IFCSTRUCTURALITEM=226]="IFCSTRUCTURALITEM",t[t.IFCSTRUCTURALCONNECTION=265]="IFCSTRUCTURALCONNECTION",t[t.IFCSTRUCTURALCURVECONNECTION=534]="IFCSTRUCTURALCURVECONNECTION",t[t.IFCSTRUCTURALPOINTCONNECTION=533]="IFCSTRUCTURALPOINTCONNECTION",t[t.IFCSTRUCTURALSURFACECONNECTION=264]="IFCSTRUCTURALSURFACECONNECTION",t[t.IFCSTRUCTURALMEMBER=225]="IFCSTRUCTURALMEMBER",t[t.IFCSTRUCTURALCURVEMEMBER=224]="IFCSTRUCTURALCURVEMEMBER",t[t.IFCSTRUCTURALCURVEMEMBERVARYING=227]="IFCSTRUCTURALCURVEMEMBERVARYING",t[t.IFCSTRUCTURALSURFACEMEMBER=420]="IFCSTRUCTURALSURFACEMEMBER",t[t.IFCSTRUCTURALSURFACEMEMBERVARYING=421]="IFCSTRUCTURALSURFACEMEMBERVARYING",t[t.IFCPORT=179]="IFCPORT",t[t.IFCDISTRIBUTIONPORT=178]="IFCDISTRIBUTIONPORT",t[t.IFCANNOTATION=634]="IFCANNOTATION",t[t.IFCSPATIALELEMENT=1273]="IFCSPATIALELEMENT",t[t.IFCSPATIALSTRUCTUREELEMENT=170]="IFCSPATIALSTRUCTUREELEMENT",t[t.IFCBUILDING=169]="IFCBUILDING",t[t.IFCBUILDINGSTOREY=459]="IFCBUILDINGSTOREY",t[t.IFCSITE=349]="IFCSITE",t[t.IFCSPACE=454]="IFCSPACE",t[t.IFCEXTERNALSPATIALSTRUCTUREELEMENT=1175]="IFCEXTERNALSPATIALSTRUCTUREELEMENT",t[t.IFCEXTERNALSPATIALELEMENT=1174]="IFCEXTERNALSPATIALELEMENT",t[t.IFCSPATIALZONE=1275]="IFCSPATIALZONE",t[t.IFCGRID=564]="IFCGRID",t[t.IFCPROXY=447]="IFCPROXY"},241:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BinaryReader=void 0;var I=t(747),a=function(){function e(){this._buffer=null,this._view=null,this._position=0,this._progress=function(e){},this._lastProgress=0}return Object.defineProperty(e.prototype,"Position",{get:function(){return this._position},enumerable:!1,configurable:!0}),e.prototype.getSubReader=function(r){var t=new e,I=this._buffer.slice(this._position,this._position+r);return t.load(I,null,null),this._position+=r,t},e.prototype.load=function(e,r,t){this._position=0;var a=this;if(t=t||function(e){},this._progress=t,void 0===e||null==e)throw"Source must be defined";if("string"==typeof e){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=new FileReader;e.onloadend=function(){e.result&&"string"!=typeof e.result&&(a._buffer=e.result,a._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},e.onprogress=function(e){t({message:"Downloading geometry",percent:Math.floor(e.loaded/e.total*100),type:I.MessageType.PROGRESS})},e.readAsArrayBuffer(n.response)}if(4==n.readyState&&200!=n.status){var r="Failed to fetch binary data from server. Server code: "+n.status+". This might be due to CORS policy of your browser if you run this as a local file.";throw t({message:"Downloading geometry",percent:0,type:I.MessageType.FAILED}),a.onerror&&a.onerror(r),r}},n.responseType="blob",null!=r&&Object.keys(r).forEach((function(e){var t=r[e];n.setRequestHeader(e,t)})),n.send()}else if(e instanceof Blob||"undefined"!=typeof File&&e instanceof File){var E=new FileReader;E.onloadend=function(){E.result&&"string"!=typeof E.result&&(a._buffer=E.result,a._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},E.onprogress=function(e){t({message:"Loading binary data",percent:Math.floor(e.loaded/e.total*100),type:I.MessageType.PROGRESS})},E.readAsArrayBuffer(e)}else e instanceof ArrayBuffer&&(this._buffer=e,this._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},e.prototype.seek=function(e){if(e<0||e>this._buffer.byteLength)throw"Position out of range.";this._position=e},e.prototype.isEOF=function(){if(null==this._position)throw"Position is not defined";return this._position==this._buffer.byteLength},e.prototype.readArray=function(e,r,t){null==r&&(r=1);var I=e*r,a=this._position;return this._position+=I,this.reportProgress(),1===r?new t(this._buffer.slice(a,a+I))[0]:new t(this._buffer.slice(a,a+I))},e.prototype.move=function(e){var r=this._position;return this._position+=e,this.reportProgress(),r},e.prototype.reportProgress=function(){null!=this._progress&&this._position-this._lastProgress>5e5&&(this._lastProgress=this._position,this._progress({type:I.MessageType.PROGRESS,message:"Processing data",percent:Math.floor(100*this._position/this._buffer.byteLength)}))},e.prototype.readByte=function(){return this.readUint8()},e.prototype.readByteArray=function(e){return this.readUint8Array(e)},e.prototype.readUint8=function(){var e=this.move(1);return this._view.getUint8(e)},e.prototype.readUint8Array=function(e){return this.readArray(1,e,Uint8Array)},e.prototype.readInt16=function(){var e=this.move(2);return this._view.getInt16(e,!0)},e.prototype.readInt16Array=function(e){return this.readArray(2,e,Int16Array)},e.prototype.readUInt16=function(){var e=this.move(2);return this._view.getUint16(e,!0)},e.prototype.readUint16Array=function(e){return this.readArray(2,e,Uint16Array)},e.prototype.readInt32=function(){var e=this.move(4);return this._view.getInt32(e,!0)},e.prototype.readInt32Array=function(e){return this.readArray(4,e,Int32Array)},e.prototype.readUint32=function(){var e=this.move(4);return this._view.getUint32(e,!0)},e.prototype.readUint32Array=function(e){return this.readArray(4,e,Uint32Array)},e.prototype.readFloat32=function(){var e=this.move(4);return this._view.getFloat32(e,!0)},e.prototype.readFloat32Array=function(e){return this.readArray(4,e,Float32Array)},e.prototype.readFloat64=function(){var e=this.move(8);return this._view.getFloat64(e,!0)},e.prototype.readFloat64Array=function(e){return this.readArray(8,e,Float64Array)},e.prototype.readChar=function(e){null==e&&(e=1);var r=this.readByteArray(e),t=new Array(e);for(var I in r)t[I]=String.fromCharCode(r[I]);return 1===e?t[0]:t},e.prototype.readPoint=function(e){null==e&&(e=1);for(var r=this.readFloat32Array(3*e),t=new Array(e),I=0;I<e;I++){var a=3*I*4,n=new Float32Array(r.buffer,a,3);t[I]=n}return 1===e?t[0]:t},e.prototype.readRgba=function(e){null==e&&(e=1);for(var r=this.readByteArray(4*e),t=new Array(e),I=0;I<e;I++){var a=4*I,n=new Uint8Array(r.buffer,a,4);t[I]=n}return 1===e?t[0]:t},e.prototype.readPackedNormal=function(e){null==e&&(e=1);for(var r=this.readUint8Array(2*e),t=new Array(e),I=0;I<e;I++){var a=new Uint8Array(r.buffer,2*I,2);t[I]=a}return 1===e?t[0]:t},e.prototype.readMatrix4x4=function(e){null==e&&(e=1);for(var r=this.readFloat32Array(16*e),t=new Array(e),I=0;I<e;I++){var a=16*I*4,n=new Float32Array(r.buffer,a,16);t[I]=n}return 1===e?t[0]:t},e.prototype.readMatrix4x4_64=function(e){null==e&&(e=1);for(var r=this.readFloat64Array(16*e),t=new Array(e),I=0;I<e;I++){var a=16*I*8,n=new Float64Array(r.buffer,a,16);t[I]=n}return 1===e?t[0]:t},e.prototype.readData=function(e){var r=this.move(e);return this._buffer.slice(r,r+e)},e}();r.BinaryReader=a},360:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Region=r.ModelGeometry=void 0;var I=t(241),a=t(623),n=t(486),E=t(66),C=t(747),o=t(18),i=function(){function e(){this.normals=new Uint8Array(0),this.indices=new Float32Array(0),this.products=new Float32Array(0),this.transformations=new Float32Array(0),this.styleIndices=new Uint16Array(0),this.states=new Uint8Array(0),this.vertices=new Float32Array(0),this.matrices=new Float32Array(0),this.styles=new Uint8Array(0),this.meter=1e3,this.wcs=[0,0,0],this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=0,this._iTransform=0,this._iMatrix=0,this._maxVersionSupported=4,this.productMaps={},this.productIdLookup=[],this.breaks={10:[],20:[],40:[],30:[],50:[],60:[],70:[],80:[],90:[],100:[]},this._styleMap=new T}return e.prototype.parse=function(e){var r=this;if(e&&!e.isEOF()){this._reader=e;var t=e;if(94132117!==t.readInt32())throw new Error("Magic number mismatch. This is not a wexBIM file.");var I=t.readByte();if(I>this._maxVersionSupported)throw new Error("Viewer doesn\'t support version "+I+" of the wexBIM stream");var i=t.readInt32(),T=t.readInt32(),F=t.readInt32(),A=t.readInt32(),R=t.readInt32(),N=t.readInt32();this.meter=t.readFloat32(),I>3&&(this.wcs=[t.readFloat64(),t.readFloat64(),t.readFloat64()]);var d=t.readInt16();this.vertices=new Float32Array(this.square(4,3*T)),this.normals=new Uint8Array(6*F),this.indices=new Float32Array(3*F),this.styleIndices=new Uint16Array(3*F),this.styles=new Uint8Array(this.square(1,4*(N+2))),this.products=new Float32Array(3*F),this.states=new Uint8Array(3*F*2),this.transformations=new Float32Array(3*F),this.matrices=new Float32Array(this.square(4,16*A)),this.productMaps={},this.regions=new Array(d),this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=3*F,this._iTransform=0,this._iMatrix=0;for(var u=0;u<d;u++)(D=new s).population=t.readInt32(),D.centre=t.readFloat32Array(3),D.bbox=t.readFloat32Array(6),this.regions[u]=D;for(var L=0;L<N;L++){var O=t.readInt32(),p=255*t.readFloat32(),l=255*t.readFloat32(),S=255*t.readFloat32(),h=255*t.readFloat32();this.styles.set([p,l,S,h],4*L),this._styleMap.Add({id:O,index:L,transparent:h<254})}for(this.styles.set([255,255,255,255],4*L),this._styleMap.Add({id:-1,index:L,transparent:!1}),L++,this.styles.set([0,255,255,100],4*L),this._styleMap.Add({id:-2,index:L,transparent:!0}),u=0;u<R;u++){var y=t.readInt32(),M=t.readInt16(),f=t.readFloat32Array(6),U=new o.ProductMap;U.productID=y,U.renderId=u+1,U.type=M,U.bBox=f,U.spans=[],this.productMaps[y]=U,this.productIdLookup[u+1]=y,M!==E.ProductType.IFCSPACE&&M!==E.ProductType.IFCOPENINGELEMENT||U.states.push(n.State.HIDDEN)}if(I>=3)for(var c=0;c<d;c++){for(var D=this.regions[c],P=t.readInt32(),v=new Array(P),b=0;b<P;b++){var w=this.readShape(I),B=t.readInt32();if(0!==B){var G=t.getSubReader(B);if((x=new a.TriangulatedShape).parse(G),!G.isEOF())throw new Error("Incomplete reading of geometry for shape instance "+w[0].iLabel);v[b]={shapes:w,geometry:x}}}for(v.sort((function(e,t){var I=r.productMaps[e.shapes[0].pLabel],a=r.productMaps[t.shapes[0].pLabel];if(null==I)return 1;if(null==a)return-1;var n=I.bBox[3]*I.bBox[4]*I.bBox[5];return a.bBox[3]*I.bBox[4]*I.bBox[5]-n})),b=0;b<P;b++){var _=v[b];this.feedDataArrays(_.shapes,_.geometry)}}else for(var g=0;g<i;g++){var x;w=this.readShape(I),(x=new a.TriangulatedShape).parse(t),this.feedDataArrays(w,x)}if(!t.isEOF())throw this.progress({type:C.MessageType.FAILED,message:"Processing data",percent:0}),new Error("Binary reader is not at the end of the file.");this.progress({type:C.MessageType.PROGRESS,message:"Processing data",percent:100}),this.transparentIndex=this._iIndexForward,this.breaks[100]=[this.transparentIndex-1,this.transparentIndex]}},e.prototype.square=function(e,r){if(null==e||null==r)throw new Error(\'Wrong arguments for "square" function.\');if(0===r)return 0;for(var t=r*e,I=Math.ceil(Math.sqrt(t/4));4*I%e!=0;)I++;return I*I*4/e},e.prototype.feedDataArrays=function(e,r){var t=this;e.forEach((function(e){var I=0,a=I=e.transparent?t._iIndexBackward-r.indices.length:t._iIndexForward,C=t.productMaps[e.pLabel];void 0===C&&((C=new o.ProductMap).productID=0,C.renderId=0,C.type=E.ProductType.IFCOPENINGELEMENT,C.bBox=new Float32Array(6),C.spans=[],C.states.push(n.State.HIDDEN),t.productMaps[e.pLabel]=C),t.normals.set(r.normals,2*I);var i=C.type===E.ProductType.IFCSPACE||C.type===E.ProductType.IFCOPENINGELEMENT?n.State.HIDDEN:255;r.indices.forEach((function(r){t.indices[I]=r+t._iVertex/3,t.products[I]=C.renderId,t.styleIndices[I]=e.style,t.transformations[I]=e.transform,t.states[2*I]=i,t.states[2*I+1]=255,I++}));var s=I;C.spans.push(new Int32Array([a,s])),e.transparent?t._iIndexBackward-=r.indices.length:t._iIndexForward+=r.indices.length;var T=(t._iIndexForward+t.indices.length-t._iIndexBackward)/t.indices.length*100;Object.getOwnPropertyNames(t.breaks).forEach((function(e){var r=+e;0===t.breaks[r].length&&T>r&&(t.breaks[r]=[t._iIndexForward,t._iIndexBackward])}))}),this),this.vertices.set(r.vertices,this._iVertex),this._iVertex+=r.vertices.length},e.prototype.readShape=function(e){for(var r=this._reader,t=r.readInt32(),I=new Array,a=0;a<t;a++){var n=r.readInt32(),C=(r.readInt16(),r.readInt32()),o=r.readInt32(),i=null;t>1&&(i=1===e?r.readFloat32Array(16):r.readFloat64Array(16),this.matrices.set(i,this._iMatrix),this._iMatrix+=16);var s=this._styleMap.GetStyle(o);null===s&&(s=this._styleMap.GetStyle(-1));var T=this.productMaps[n].type;T!==E.ProductType.IFCSPACE&&T!==E.ProductType.IFCOPENINGELEMENT||(s=this._styleMap.GetStyle(-2)),I.push({pLabel:n,iLabel:C,style:s.index,transparent:s.transparent,transform:null!=i?this._iTransform++:-1})}return I},e.prototype.load=function(e,r,t){var a=this;this.progress=t||function(e){};var n=new I.BinaryReader,E=this;n.onloaded=function(){E.parse(n),E.onloaded&&E.onloaded(a)},n.onerror=function(e){E.onerror&&E.onerror(e)},n.load(e,r,t)},e}();r.ModelGeometry=i;var s=function(){function e(e){this.population=-1,this.centre=null,this.bbox=null,e&&(this.population=e.population,e.centre&&(this.centre=new Float32Array(e.centre)),e.bbox&&(this.bbox=new Float32Array(e.bbox)))}return e.clone=function(r){var t=new e;return t.population=r.population,r.centre&&(t.centre=new Float32Array(r.centre)),r.bbox&&(t.bbox=new Float32Array(r.bbox)),t},e.prototype.merge=function(r){if(-1===this.population&&null===this.centre&&null===this.bbox)return new e(r);var t=new e;if(t.population=this.population+r.population,this.bbox&&r.bbox){var I=Math.min(this.bbox[0],r.bbox[0]),a=Math.min(this.bbox[1],r.bbox[1]),n=Math.min(this.bbox[2],r.bbox[2]),E=Math.max(this.bbox[0]+this.bbox[3],r.bbox[0]+r.bbox[3]),C=Math.max(this.bbox[1]+this.bbox[4],r.bbox[1]+r.bbox[4]),o=Math.max(this.bbox[2]+this.bbox[5],r.bbox[2]+r.bbox[5]),i=E-I,s=C-a,T=o-n,F=(I+E)/2,A=(a+C)/2,R=(n+o)/2;t.bbox=new Float32Array([I,a,n,i,s,T]),t.centre=new Float32Array([F,A,R])}else this.bbox?(t.bbox=new Float32Array(this.bbox),t.centre=new Float32Array(this.centre)):(t.bbox=new Float32Array(r.bbox),t.centre=new Float32Array(r.centre));return t},e}();r.Region=s;var T=function(){function e(){this._internal={}}return e.prototype.Add=function(e){this._internal[e.id]=e},e.prototype.GetStyle=function(e){return this._internal[e]||null},e}()},623:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TriangulatedShape=void 0;var I=t(241),a=function(){function e(){var e=this;this.load=function(r){var t=new I.BinaryReader,a=e;t.onloaded=function(){a.parse(t),a.onloaded&&a.onloaded(e)},t.load(r,null,null)}}return e.prototype.parse=function(e){var r=this,t=(e.readByte(),e.readInt32()),I=e.readInt32();r.vertices=e.readFloat32Array(3*t),r.indices=new Uint32Array(3*I),r.normals=new Uint8Array(6*I);var a,n=0;a=t<=255?function(r){return e.readByteArray(r)}:t<=65535?function(r){return e.readUint16Array(r)}:function(r){return e.readInt32Array(r)};var E=e.readInt32();if(0!==t&&0!==I)for(var C=0;C<E;C++){var o=e.readInt32();if(0!=o){var i=o>0;if(o=Math.abs(o),i){var s=e.readByteArray(2),T=a(3*o);r.indices.set(T,n);for(var F=0;F<3*o;F++)r.normals[2*n]=s[0],r.normals[2*n+1]=s[1],n++}else for(F=0;F<o;F++)r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++,r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++,r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++}}},e}();r.TriangulatedShape=a},107:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0});var I=t(747),a=t(360);if(self&&self instanceof DedicatedWorkerGlobalScope){var n=self;n.onmessage=function(e){var r=e.data.model,t=e.data.headers,E=new a.ModelGeometry;E.onerror=function(e){var r={type:I.MessageType.FAILED,message:e,percent:0};n.postMessage(r),console.error(e),n.close()},E.onloaded=function(){try{var e={},r=[];for(var t in E)if(E.hasOwnProperty(t)){var a=E[t];"function"==typeof a||t.startsWith("_")||(e[t]=a,ArrayBuffer.isView(a)?r.push(a.buffer):null!=(o=a).width&&null!=o.height&&null!=o.close&&r.push(a))}var C={type:I.MessageType.COMPLETED,message:"Completed",percent:100,result:e};n.postMessage(C,r),n.close()}catch(e){C={type:I.MessageType.FAILED,message:e,percent:0},n.postMessage(C),console.error(e),n.close()}var o},E.load(r,t,(function(e){n.postMessage(e)}))}}}},r={};return function t(I){if(r[I])return r[I].exports;var a=r[I]={exports:{}};return e[I](a,a.exports,t),a.exports}(107)})());'}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(831)})()},function(t,e){t.exports='<div class="header" id="header"> <div class="menu" id="menu"> <div id="dropdown"> <div id="dropdownButton">&#9776;</div> <div id="dropdownContent"> <br/><span id="menuUserName"></span><br/><br/> <div id="menuModel"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMUlEQVR42u3dsQ3AIAADQZz9d3ZaOgpoQHcDRIrha8YAAAAAAAAAAAAAAAAAeER2P9C2ZpwGTWKFd3wmAIGAQEAgIBAQCAgEBAICAYEAAgGBgEBAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBKbv+BtnWM04EmscI5HvEEgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAjt/9A2zrG6UCTWOEcr9yCQEAgIBAQCAgEBAICAYGAQACBgEBAICAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYCkmuFvbWmG60MnRO+0RTxAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAIAAAAAAAAAAAAAAAAAbPoBWP0QddFcYawAAAAASUVORK5CYII="/> <span id="menuModelTitle"></span> </div> <div id="menuHelp"> <img src="data:image/png;base64,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"/> <span id="menuHelpTitle"></span> </div> <div id="menuPrint"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABu0lEQVR42u3dQQqEMAxAUSu9/5XjRlxZUaTalPduMKOf6EA6ywIAAAAAAAAAAAAAAAAAAAAAAAD/KzN8iIgIl3LQG6yU1PfY6hKCQEAgIBAQCAgEBAICAYGAQACBgEBAICAQEAiMp/oKzmXfY3jDfo0JAgIBgYB3EM/hmCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBALs7IM02EnHBAGBgEDAO4jncEwQEAgIBAQCAgGBAAIBgYBAQCAgEBAICAQEAgIBBAJXLEw1OLQBEwQEAgIB7yCewzFBQCAgEBAICAQEAggEBAICAYGAQEAgIBAQCAgEEAgIBAQCAgGBgEBAICAQEAgIBBAI3PXJEf+O8aTrTdzxrypMEBAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAICAYGAQEAgIBAQCCAQEAgIBA49j/wRCAgEBAICAYHAQOpMH6b3Lxo8l/3gchMEBAICAYGAQEAgIBAQCAgEBAIIBAQCAgGBgEBAIJDLVAtT2ZdzMEFAICAQEAgIBBAICAQEAgIBgYBAQCAgEBAIIBAQCAgEAAAAAAAAAAAAAAAAAAAAAAAAYGobYRYpMxyERNwAAAAASUVORK5CYII="/> <span id="menuPrintTitle"></span> </div> </div> </div> </div> <div id="projectDetails"> <div id="projectName">SPIDER PROJECT</div> <div id="projectTimeAndVersion"></div> </div> </div> <div id="pageContent"> <div id="pageModel"> <div class="custom-cell-container"> <div id="bimDiv" class="custom-cell custom-cell-wide"> <canvas id="bimCanvas" width="100%" height="100%" style="margin:0;padding:0"></canvas> </div> <div id="bimInfo" class="custom-cell custom-cell-narrow"> <div> <div style="display:none"> <button id="bimClip" onclick="clip()"><span id="bimClipLabel">Turn Clipping On</span></button> <button id="bimUnclip" onclick="unclip()" disabled="disabled"><span id="bimUnclipLabel">Unclip</span></button> </div> <div> <input id="bimHideByPickMode" type="checkbox" onchange="hideByPick(this.checked)"> <span id="bimHideByPickModeLabel">Hide-By-Click Mode</span> <br/> <input style="display:none" id="bimMultipleChoiceMode" type="checkbox"> <span style="display:none" id="bimMultipleChoiceModeLabel">Multiple Choice</span>  <div id="bimHideByPickReset">Reset</div> </div> </div> <div> <input id="bimDarkBackgroundMode" type="checkbox" onchange="setBackground(this.checked)"> <span id="bimDarkBackgroundModeLabel">Dark Background</span> <br/> <table cellspacing="0" cellpadding="0" style="display:none;width:100%;border:1px solid #f7f7f7;background-color:#f7f7f7;box-sizing:border-box"> <tr> <td style="padding:4px 12px 4px 12px"><span id="bimLightningRangeLabel">Lightning</span><br/></td> <td style="padding:4px 12px 4px 24px"> <input type="range" id="bimLightningRange" value="0" style="width:100%" min="0" max="100" class="slider"> </td> </tr> </table> </div> <div id="bimTimeScale"> <table cellspacing="0" cellpadding="0" style="width:100%"> <tr> <th colspan="3" style="padding:4px"> <div id="bimTimeScaleToFinish">100%</div> </th> </tr> <tr> <th colspan="3" style="padding:4px 8px 4px 4px"> <input type="range" id="bimTimeScaleRange" value="0" style="width:100%" min="0" max="100" class="slider"> </th> </tr> <tr> <td style="width:30%;padding:2px;text-align:left;font-size:70%"> <span id="bimTimeScaleStart"></span> </td> <td style="width:40%;padding:0 2px 4px 2px;text-align:center;font-size:90%;font-weight:700"> <span id="bimTimeScalePosition"></span> </td> <td style="width:30%;padding:2px;text-align:right;font-size:70%"> <span id="bimTimeScaleEnd"></span> </td> </tr> </table> </div> <div id="bimProduct">...</div> <span style="color:#a9a9a9;font-style:italic">Powered by <a style="color:#a9a9a9;font-style:normal;text-decoration:underline" target="_blank" href="https://docs.xbim.net/XbimWebUI/">XbimWebUI</a>.<br/> See <a style="color:#a9a9a9;font-style:normal;text-decoration:underline" target="_blank" href="https://github.com/SpiderProjectDeveloper/Web-3d">the source code here</a>. </span> </div> </div> </div> <div id="pageHelp"> <h1 id="helpTitle"></h1> <div id="helpText" class="helpText"></div> </div> </div> <div id="blackOutBox"></div> <div id="messageBox"> <div id="messageBoxText"></div> </div> <div id="confirmationBox"> <div id="confirmationBoxContainer"> <div id="confirmationBoxText"></div> <button id="confirmationBoxOk">&#10004;</button> <button id="confirmationBoxCancel">&#8718;</button> </div> </div> <div id="bimTimeScaleTooltip"></div>'},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([i]).join("\n")}var o,s,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){t.exports=n(7)},function(t,e,n){var r=n(5),i=n(6);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var a={insert:"head",singleton:!1};r(i,a);t.exports=i.locals||{}},function(t,e,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function s(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},r=[],i=0;i<t.length;i++){var a=t[i],l=e.base?a[0]+e.base:a[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var d=s(u),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(h)):o.push({identifier:u,updater:I(h,e),references:1}),r.push(u)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var o=a(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var a=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function A(t,e,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f=null,p=0;function I(t,e){var n,r,i;if(e.singleton){var a=p++;n=f||(f=c(e)),r=h.bind(null,n,a,!1),i=h.bind(null,n,a,!0)}else n=c(e),r=A.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var a=l(t,e),c=0;c<n.length;c++){var u=s(n[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=a}}}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r)()(!1);i.push([t.i,':root {\n\t--header-height:40px;\n\t--half-header-height:calc( var(--header-height) / 2 );\n\t--two-fifth-header-height:calc( 2 * var(--header-height) / 5 );\n    --header-font-size:calc( 4 * var(--header-height) / 13 );\n    --menu-width: calc( var(--header-height) * 2 );\n\t--ok-color: #4f4f4f;\n\t--cancel-color: #bf2f2f;\n\t--error-color: #b2f2f2;\n\t--button-color:#ffffff;\n\t--lightgray-color:#dfdfdf;\n\t--gray-color:#7f7f7f;\n\t--darkgray-color:#4f4f4f;\n\t--dark-color:#2f2f2f;\n\t--black-color:#000000;\n}\n\n* { box-sizing: border-box;\t}\ndiv { margin:0; padding:0 }\n\nbody { \n    background-color:white; scroll-behavior:smooth;\n    font-family:arial; margin:0; padding:0;\n}\n\ndiv { box-sizing: border-box; margin:0px; padding:0px; }\n\ntable { box-sizing: border-box; margin:0px; padding:0px; }\n\ntd { padding:0px; }\n\na { text-decoration:none; color:white; }\n\n.custom-cell-container { width:100%; }\n.custom-cell-container::after {\n    content: ""; clear: both; display: table;\n}\n.custom-cell-container div.custom-cell { \n    margin:0px; padding:4px; float:left;\n    box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; \n}\n.custom-cell-container div.custom-cell-wide { width:75%; }\n.custom-cell-container div.custom-cell-narrow { width:25%; }\n\n@media only screen and (max-width: 799px) {\n    .custom-cell-container div.custom-cell-wide { width:100%; }\n    .custom-cell-container div.custom-cell-narrow { width:100%; }\n}\n\n.header {\n    height:var(--header-height); width:100%; margin:0; padding:0; display:block; \n    border-bottom:0px solid var(--dark-color); \n    background-image:linear-gradient(to right, rgb(120,120,120), rgb(20,20,20), rgb(120,120,120));\n}\n\n#projectDetails {\n    position:absolute; left: var(--menu-width);\n    height:var(--header-height); max-height:var(--header-height); overflow:hidden; \n    margin:0px; display:block; float:left; \n    text-align:left; color:#dfdfdf; \n}\n#projectName {\n    width:100%; height:var(--half-header-height); margin:0px; padding-top:2px; display:block; \n    white-space:nowrap; text-overflow:ellipsis; overflow:hidden;  \n    text-align:left; font-size:16px;\n}\n#projectTimeAndVersion {\n    width:100%; height:var(--half-header-height); display:block; \n    white-space:nowrap; text-overflow:ellipsis; overflow:hidden;\n    font-family:courier; text-align:left; font-size:11px; margin:0; padding:2px;\n}\n\n.menu {\n    width:var(--menu-width); height:var(--header-height); margin:0px 0px 0px 0px; padding:0px; \n    display:block; float:left; text-align:left; \n}\n\n#user {\n    position:relative; display: inline-block; \n}\n\n#userButton {\n    display:block; float:left; height:var(--header-height); max-height:var(--header-height); \n    margin:0px; padding:0px 2px 0px 2px; border:none; cursor: pointer;  \n    background-color:rgba(0,0,0,0); color: #dfdfdf; font-size:var(--half-header-height);\n}\n\n#userContent {\n    z-index: 1000; display: none; position: absolute; top:var(--header-height); width:25vw;\n    margin:0; padding:8px; background-color: rgba(70, 70, 70, 0.8); \n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5); text-align:left;  \n}\n\n#userName { color: #dfdfdf; font-style:italic; }\n\n#userLogout { cursor: pointer; color: #dfdfdf; }\n#userLogout:hover { color: white; }\n\n#dropdown {\n    position:relative; display: inline-block; \n}\n\n#dropdownButton {\n    display:block; float:left; height:var(--header-height); max-height:var(--header-height); \n    margin:0px; padding:0px 2px 0px 2px; border:none; \n    background-color:rgba(0,0,0,0); color: #dfdfdf; cursor: pointer; font-size:var(--half-header-height);\n}\n\n#dropdownContent {\n    z-index: 1000; display: none; position: absolute; top:var(--header-height); \n    width:25vw; max-height:calc(90vh - 50px);\n    margin:0; padding:2px; background-color: rgba(70, 70, 70, 0.8); \n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5); text-align:left;\n}\n\n#dropdownContent div {\n    font-size:var(--two-fifth-header-height); cursor:pointer; height:40px; padding:4px; color:#dfdfdf;\n}\n\n#dropdownContent div:hover { background-color:#2f2f2f; color:#dfdfdf; }\n#dropdown:hover #dropdownButton { color: white; }\n/* #dropdown:hover #dropdownContent { display: block; } */\n/* #dropdownButton:hover #dropdownContent { display: block; } */\n\n#dropdownContent div img {\n    height:28px; padding:1px; border: 1px solid #7f7f7f; border-radius:5px; \n}\n\n#menuUser {\n    border-bottom: 1px dotted gray; height: auto !important; padding: 8px 4px 8px 4px !important;\n}\n#menuUserName { color:#efefef; }\n\n\n#pageModel {\n    width:100%; top:var(--header-height);\n    display:block; border:0; margin:0; padding:0; background-color:white; text-align:center;\n}\t\t\n\n#pageHelp { \n    display:none; overflow:auto;\n} \n\n#pageModel, #pageHelp {\n    width:100%; border:0; margin:0; padding:0; background-color:white; overflow:hidden;\n}\n\n    \nh1 { margin:2% 1% 1% 1%; font-size:140%; color:var(--dark-color); font-variant:small-caps; }\n\ndim { border-color:var(--lightgray-color); color:var(--lightgray-color); }\n\n.enabled { color: var(--darkgray-color); cursor:pointer; }\n.disabled { color: var(--lightgray-color); cursor:default; }\n\n.clearfix::after {\n    content: ""; clear: both; display: table;\n}\n\nbutton { margin:0px; border:1px dotted var(--darkgray-color); \n    border-radius:4px; background-color:var(--lightgray-color); \n    cursor: pointer; text-align:center; }\n\nbutton.ok { border-color:var(--ok-color); color:var(--ok-color); padding-top:12px; padding-bottom:12px; }\nbutton.ok:hover { background-color: var(--ok-color); color: white; }\n\nbutton.cancel { border-color: var(--cancel-color); color: var(--cancel-color); padding-top:12px; padding-bottom:12px; }\nbutton.cancel:hover { background: var(--cancel-color); color: white; }\n\n.ok-color { color: var(--ok-color); }\n.cancel-color { color: var(--cancel-color); }\n.error-color { color: var(--error-color); }\t\n\n.keyword {\n    background-color: var(--lightgray-color); padding:0px 4px 0px 4px; border-radius:4px; font-style:normal;\n}\n\n.helpText {\n    padding:24px 20vw 0px 20vw; text-align:left; line-height:150%; font-size:14px;\n}\n\n.helpText div {\n    margin-bottom:24px;\n}\n\n.helpText div img {\n    display:inline-block; height:20px; position:relative; top:4px;\n}\n\n#confirmationBox { position:absolute; display:none; left:30%; top:30%; width:40%; height:40%; }\n#confirmationBoxContainer { \n\tposition:relative; display:table-cell; min-width:100%; min-height:100%; \n\tbackground-color:#ffffff; text-align:center; vertical-align:middle; \n}\n#confirmationBoxText { padding:4px 4px 24px 4px; }\n#confirmationBoxOk { width:50%; margin-bottom:12px; border-color:var(--ok-color); color:var(--ok-color); padding-top:12px; padding-bottom:12px; } \n#confirmationBoxOk:hover { background-color: var(--ok-color); color: white; }\n#confirmationBoxCancel { width:50%; visibility:hidden; border-color: var(--cancel-color); color: var(--cancel-color); padding-top:12px; padding-bottom:12px; }\n#confirmationBoxCancel:hover { background: var(--cancel-color); color: white; }\n\n#blackOutBox { position:absolute; display:none; left:0; top:0; min-width:100%; min-height:100%; background-color:#4f4f4f; opacity:0.35; }\n#messageBox { position:absolute; display:none; left:30%; top:30%; width:40%; height:40%; }\n#messageBoxText { position:relative; display:table-cell; min-width:100%; min-height:100%; background-color:#ffffff; text-align:center; vertical-align:middle; }\n\n#bimDiv { margin:0; padding:0px; }\n#bimInfo { margin:0; padding:0px 8px 0px 4px; text-align:left; }\n#bimInfo > div { width:100%; margin:12px 0px 2px 0px; line-height:140%; padding:12px; \n    border:1px solid lightgray; border-radius:8px; color:#4f4f4f; }\n#bimInfo span { font-size:90%; }\n#bimHideByPickReset { font-size:90%; font-weight: normal; text-align: right; text-decoration: underline; }\n#bimProduct { width:90%; margin:0px 0px 0px 5%; padding:0px 0px 22px 22px; font-size:90%; background-color:#f7f7f7; color:#4f4f4f; height:25vh; overflow:auto; }\n#bimProduct span { color:#7f7f7f; font-weight:normal; font-style:italic; }\n#bimTimeScaleToFinish { font-size:90%; font-weight: normal; text-align: right; text-decoration: underline; }\n#bimTimeScaleTooltip {\n    display:none; position:absolute; background-color:#ffffff; margin:0px; padding:0px; border:1px dotted gray; border-radius:4px;\n    font-size:80%; color:#2f2f2f; \n}\n\n\n',""]),e.default=i},function(t,e,n){"use strict";n.r(e);n(4);var r=n(1),i=n.n(r),a={urlData:"/.model_data",urlWexbim:"/.get_wexbim",urlLogout:"/.logout",codeKey:"Code",ifcProductIdKey:"f_Model",undoneStyleCodes:[11,12,13,14,15,16,17],undoneStyles:[[75,75,75,50],[75,75,75,75],[75,75,75,100],[75,75,75,125],[75,75,75,150],[75,75,75,175],[75,75,75,200]]},o={en:{operation:"Operation",phase:"Phase",status:"Status",resourse:"Resourse(s)",version:"Version",uploadTime:"Uploaded",Level:"Level",Name:"Name",Code:"Code",Start:"Start",Fin:"Finish",Notes:"Notes",status0:"Not started",status100:"Finished",statusNotFinished:"Under way",model:"3D Model",help:"Help",monthNames:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],helpTitle:"How to...",helpText:"Left Mouse Button:<br/> - Click to select an element<br/> - Hold and shift to rotate the model<br/><br/>Right Mouse Button:<br/> - Hold and shift to change your point of view<br/>",waitDataText:"PLEASE WAIT WHILE LOADING DATA...",waitSaveUserDataText:"PLEASE WAIT WHILE SAVING DATA...",errorLoadingData:"ERROR LOADING DATA...",errorParsingData:"DATA LOADED ARE INVALID...",errorParsingUserData:"DATA LOADED ARE INVALID...",errorWexbimNotFound:"A .wexbim file not found...",datetimeError:"Error: invalid datetime format!",noConnectionWithServerMessage:"There is no connection with the server at the moment. You are unable to edit your data!",menuModelTitle:"3D Model",menuHelpTitle:"Help",menuPrintTitle:"Print",menuLogout:"Logout",cantFindElementByProductId:"Failed to find the element",darkBackground:"Dark Background",hideByPick:"Hide by Pick",multipleChoice:"Multiple Choice",reset:"Reset"},ru:{operation:"Операция",phase:"Фаза",status:"Состояние",resourse:"Ресурс(ы)",version:"Версия",uploadTime:"Загружено",Level:"Уровень",Name:"Название",Code:"Код",Start:"Старт",Fin:"Финиш",Notes:"Комментарий",status0:"Не начато",status100:"Завершено",statusNotFinished:"Не завершено",model:"3d Модель",help:"Справка",monthNames:["ЯНВ","ФЕВ","МАР","АПР","МАЙ","ИЮН","ИЮЛ","АВГ","СЕН","ОКТ","НОЯ","ДЕК"],helpTitle:"Справка",helpText:"Левая кнопка мыши:<br/> - Нажмите, чтобы выбрать элемент<br/> - Нажмите и удерживайте, чтобы вращать модель<br/><br/>Правая кнопка мыщи:<br/> - Нажмите и удерживайте, чтобы переместить точку обзора<br/>",errorLoadingData:"ОШИБКА ПРИ ЗАГРУЗКЕ ДАННЫХ...",errorParsingData:"ЗАГРУЖЕННЫЕ ДАННЫЕ ИСКАЖЕНЫ...",errorParsingUserData:"ЗАГРУЖЕННЫЕ ДАННЫЕ ИСКАЖЕНЫ...",errorWexbimNotFound:"Файл .wexbim не найден...",datetimeError:"Ошибка: недопустимый формат ввода даты!",noConnectionWithServerMessage:"Связь с сервером сейчас отсутствует. К сожалению, вы не можете редактировать данные!",menuModelTitle:"3d Модель",menuHelpTitle:"Помощь",menuPrintTitle:"Печать",menuLogout:"Выход",cantFindElementByProductId:"Не найден элемент",darkBackground:"Темный фон",hideByPick:"Прятать по клику",multipleChoice:"Выбор неск. элементов",reset:"Сброс"}};function s(t,e=!1){let n=null;if(null==t||""===t)return"";"object"!=typeof t&&(t=new Date(1e3*parseInt(t)));let r=t.getUTCFullYear(),i=t.getUTCMonth()+1;i<10&&(i="0"+i);let a=t.getUTCDate();if(a<10&&(a="0"+a),n=h.dateDMY?a+h.dateDelim+i+h.dateDelim+r:i+h.dateDelim+a+h.dateDelim+r,!e){let e=t.getUTCHours();e<10&&(e="0"+e);let r=t.getUTCMinutes();r<10&&(r="0"+r),n+="  "+e+h.timeDelim+r}return n}function l(t){let e=t.length;if(0==e)return!1;for(let n=0;n<e;n++)if(" "!==t[n]&&(t[n]<"0"||t[n]>"9"))return!1;return!0}function c(t,e=null){if(void 0!==t&&t&&l(t)){if((t=Number(t))>16777215)return e;let n=((16711680&t)>>16).toString(16);1==n.length&&(n="0"+n);let r=((65280&t)>>8).toString(16);1==r.length&&(r="0"+r);let i=(255&t).toString(16);return 1==i.length&&(i="0"+i),"#"+i+r+n}return e}var u=null,h={lang:"en",page3d:null,pageHelp:null,htmlStyles:null,innerWidth:window.innerWidth,innerHeight:window.innerHeight,headerHeight:40};var A=null,f=null,p=null;function I(t){A=document.getElementById("blackOutBox"),f=document.getElementById("messageBox"),p=document.getElementById("messageBoxText"),A.style.display="block",f.style.display="table",p.innerHTML=t}function m(){A.style.display="none",f.style.display="none"}let g=null;function v(){let t;t=document.getElementById("dropdownButton"),t.onclick=function(t){!function(){let t=document.getElementById("dropdownContent");t.style.display="block"===t.style.display?"none":"block"}()},t=document.getElementById("menuModel"),t.onclick=function(t){E("m")},t=document.getElementById("menuHelp"),t.onclick=function(t){E("h")},t=document.getElementById("menuPrint"),t.onclick=function(t){E("p")},t=document.getElementById("dropdownContent"),t.addEventListener("mouseover",(function(t){g||(g=this.getBoundingClientRect())}),!0),t.addEventListener("mouseout",(function(t){g&&(t.x<g.x||t.x>=g.x+g.width-1||t.y<g.y||t.y>=g.y+g.height-1)&&(!function(t){let e=document.getElementById(t);if(!e)return;"none"!==e.style.display&&(e.style.display="none")}("dropdownContent"),g=null)}),!1),t=document.getElementById("menuUserName"),t.innerHTML=h.user,document.getElementById("helpTitle").innerText=o[h.lang].helpTitle,document.getElementById("helpText").innerHTML=o[h.lang].helpText,document.getElementById("menuModelTitle").innerText=o[h.lang].menuModelTitle,document.getElementById("menuHelpTitle").innerText=o[h.lang].menuHelpTitle,document.getElementById("menuPrintTitle").innerText=o[h.lang].menuPrintTitle}function E(t){document.getElementById("dropdownContent").style.display="none";let e=document.getElementById("pageModel"),n=document.getElementById("pageHelp");"m"===t?(e.style.display="block",n.style.display="none"):"h"===t?(e.style.display="none",n.style.display="block"):function(){let t=document.getElementById("header"),e=t.style.display;t.style.display="none";let n=h.htmlStyles.getPropertyValue("--header-height");document.documentElement.style.setProperty("--header-height","2px"),window.print(),document.documentElement.style.setProperty("--header-height",n),t.style.display=e}()}function T(t,e,n){if(-1==t)return e;if(-1==e)return t;if(n){if(e>t)return e}else if(e<t)return e;return t}var C=n(0),b=null,R=null;function M(t){if(!(b=document.getElementById("bimTimeScaleRange")))return;R=t;let e=parseInt(100*(u.project.curTimeInSeconds-u.startMinInSeconds)/u.startFinSeconds);e>100?e=100:e<0&&(e=0),b.value=e;let n=new Date(1e3*u.startMinInSeconds);document.getElementById("bimTimeScaleStart").innerText=s(n,!0);let r=new Date(1e3*u.finMaxInSeconds);document.getElementById("bimTimeScaleEnd").innerText=s(r,!0),b.onchange=function(t){y(t)},y(null),document.getElementById("bimTimeScaleToFinish").onclick=function(t){b.value=100,y(null)},b.onmouseover=function(t){document.getElementById("bimTimeScaleTooltip").style.display="block"},b.onmousemove=function(t){!function(t,e){let n=e.getBoundingClientRect(),r=F(100*(t.x-n.left)/n.width),i=new Date(1e3*r),a=document.getElementById("bimTimeScaleTooltip");a.style.display="block",a.innerHTML="&nbsp;&nbsp;"+s(i,!0)+"&nbsp;&nbsp;";let o=a.getBoundingClientRect();a.style.top=n.top-12+"px",t.clientX<n.left+n.width/2?a.style.left=t.clientX+"px":a.style.left=t.clientX-o.width+"px"}(t,this)},b.onmouseout=function(t){document.getElementById("bimTimeScaleTooltip").style.display="none"}}function y(t){let e=F(b.value),n=document.getElementById("bimTimeScaleToFinish");n.disabled=100==b.value,n.style.cursor=100==b.value?"default":"pointer",function(t){for(let e=0;e<u.activities.length;e++){let n=u.activities[e],r=0;for(let e=0;e<u.performance.length;e++){let i=u.performance[e];if(i.OperCode!=n.Code)continue;if(i.StartInSeconds>t)continue;if(i.FinInSeconds<t){r+=i.Vol;continue}let a=i.FinInSeconds-i.StartInSeconds;if(!(a>0)){r+=i.Vol;continue}let o=(t-i.StartInSeconds)*i.Vol/a;r+=o}let i="number"==typeof n.VolPlan?n.VolPlan:0,a="number"==typeof n.VolFact?n.VolFact:0,o=i+a;if(n.__progressPct=o>0?parseInt(100*r/o):0,n.__progressPct<100&&-1!=n.AsapStartInSeconds&&-1!=n.AsapFinInSeconds&&t>=n.AsapStartInSeconds)if(t>=n.AsapFinInSeconds)n.__progressPct=100;else{let e=(t-n.AsapStartInSeconds)*n.VolPlan/(n.AsapFinInSeconds-n.AsapStartInSeconds+1);o>0&&(n.__progressPct+=parseInt(100*e/o))}if("Start_COMPInSeconds"in n&&"Fin_COMPInSeconds"in n&&-1!=n.Start_COMPInSeconds&&-1!=n.Fin_COMPInSeconds)if(t<n.Start_COMPInSeconds)n.__progressComparePct=0;else if(t>n.Fin_COMPInSeconds)n.__progressComparePct=100;else{let e=n.Fin_COMPInSeconds-n.Start_COMPInSeconds;n.__progressComparePct=e>0?(t-n.Start_COMPInSeconds)/e:100}}}(e),function(t){if(t){let t=R._handles.length;for(let e=0;e<t;e++)for(let t in R._handles[e]._model.productMaps)for(let e=0;e<u.activities.length;e++){if(!("f_Model"in u.activities[e]))continue;let n=parseInt(u.activities[e].f_Model);if(t==n){100==u.activities[e].__progressPct?R.setStyle(C.State.UNSTYLED,[t]):u.activities[e].__progressPct>90?R.setStyle(a.undoneStyleCodes[6],[t]):u.activities[e].__progressPct>70?R.setStyle(a.undoneStyleCodes[5],[t]):u.activities[e].__progressPct>50?R.setStyle(a.undoneStyleCodes[4],[t]):u.activities[e].__progressPct>30?R.setStyle(a.undoneStyleCodes[3],[t]):u.activities[e].__progressPct>10?R.setStyle(a.undoneStyleCodes[2],[t]):u.activities[e].__progressPct>0?R.setStyle(a.undoneStyleCodes[1],[t]):R.setStyle(a.undoneStyleCodes[0],[t]);break}}}else R.resetStyles()}(!0);let r=new Date(1e3*e);document.getElementById("bimTimeScalePosition").innerText=s(r,!0)}function F(t){return u.startMinInSeconds+t*(u.finMaxInSeconds-u.startMinInSeconds)/100}var S=null,O=null,_=[255,100,100,255],P=Array(),N=0,x=[255,255,255,255],B=[0,0,0,255],L=[255,0,0,100],w=!1,U=null,D=null,G=null,V=null;function H(){let t=C.Viewer.check();if(!t.noErrors){let e="";for(let n in t.errors)e+=t.errors[n]+"<br/>";return void I(e)}U=document.getElementById("bimProduct"),document.getElementById("bimClip").onclick=function(t){S&&(S.clip(),w=!0,document.getElementById("bimClip").disabled=!0,document.getElementById("bimUnclip").disabled=!1)},document.getElementById("bimUnclip").onclick=function(t){S&&(w?(S.stopClipping(),w=!1):S.unclip(),document.getElementById("bimClip").disabled=!1,document.getElementById("bimUnclip").disabled=!0)},(D=document.getElementById("bimHideByPickMode")).onchange=function(t){},(G=document.getElementById("bimHideByPickReset")).className="disabled",G.onclick=function(t){S.resetState(),P.length=0,k(),G.className="disabled"},(V=document.getElementById("bimDarkBackgroundMode")).onchange=function(t){q()},S=new C.Viewer("bimCanvas"),q(!0),S.highlightingColour=L,(O=new C.Grid).colour=[.5,.5,.5,.5],O.zFactor=20,S.addPlugin(O),S.defineStyle(10,_);for(let t=0;t<a.undoneStyleCodes.length;t++)S.defineStyle(a.undoneStyleCodes[t],a.undoneStyles[t]);S.on("loaded",(function(t){M(S),m(),S.start(),S.show(C.ViewType.DEFAULT,void 0,void 0,!1)})),S.on("error",(function(t){I(o.errorWexbimNotFound)})),S.on("pick",(function(t){if(D.checked)return S.setState(C.State.HIDDEN,[t.id]),void(G.className="enabled");if(!U)return;if(P.length>0){for(let e=0;e<P.length;e++)if(P[e]==t.id)return S.setState(C.State.UNDEFINED,[t.id]),P.splice(e,1),void k();document.getElementById("bimMultipleChoiceMode").checked||(S.setState(C.State.UNDEFINED,[P[0]]),P.length=0,k())}if(null===t.id)return;G.className="enabled",S.setState(C.State.HIGHLIGHTED,[t.id]),P.push(t.id),k();let e=(new Date).getTime();e-N<200&&S.zoomTo(t.id),N=e})),S.on("mouseDown",(function(t){S.setCameraTarget(t.id)})),S.on("clipped",(function(t){w=!1,document.getElementById("bimClip").disabled=!0,document.getElementById("bimUnclip").disabled=!1})),S.on("unclipped",(function(t){document.getElementById("bimClip").disabled=!1,document.getElementById("bimUnclip").disabled=!0}));let e=a.urlWexbim+(window.location.search.length>0?window.location.search:"");S.load(e)}function k(){let t="";for(let e=0;e<P.length;e++){let n=P[e],r=!1;for(let e=0;e<u.activities.length;e++)if(parseInt(n)===parseInt(u.activities[e].f_Model)){t.length>0&&(t+="</br></br>"),t+=X(e),r=!0;break}r||(t.length>0&&(t+="</br></br>"),t+=`<span>[${n}] ${o[h.lang].cantFindElementByProductId}</span>`)}U.innerHTML=t}function X(t){let e=u.activities[t],n="";for(let t=0;t<u.fields.length;t++){let r=u.fields[t].Code;r in e&&(n.length>0&&(n+="</br>"),n+=`<span>${u.fields[t].Name}:</span> ${e[r]}`)}return n}function q(t){null==t?t=V.checked:V.checked=!!t,S.background=t?B:x}let W=document.getElementById("bundle"),Q=null,z=null;if(W){let t=W.getAttribute("data-appcontainer");t&&(Q=document.getElementById(t)),z=W.getAttribute("data-user")}function j(){let t;t=document.getElementById("bimDiv"),t.style.height=(h.innerHeight-parseInt(h.headerHeight)).toString()+"px",t.style.width=parseInt(.75*h.innerWidth).toString()+"px",t=document.getElementById("bimCanvas"),t.style.height=(h.innerHeight-parseInt(h.headerHeight)).toString()+"px",t.style.width=parseInt(.75*h.innerWidth).toString()+"px"}Q?Q.innerHTML=i.a:document.body.innerHTML=i.a,function(t,e){if(h.page3d=document.getElementById("page3d"),h.pageHelp=document.getElementById("pageHelp"),h.htmlStyles=window.getComputedStyle(document.querySelector("html")),h.headerHeight=h.htmlStyles.getPropertyValue("--header-height"),t){let e=t.getBoundingClientRect();h.innerWidth=Math.floor(e.width),h.innerHeight=Math.floor(e.height)}else h.innerWidth=window.innerWidth,h.innerHeight=window.innerHeight;if(null===e){let t=function(t,e="string"){let n=t+"=",r=decodeURIComponent(document.cookie).split(";");for(let t=0;t<r.length;t++){let i=r[t];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(n)){let t=i.substring(n.length,i.length);if("string"==e)return t;if("int"==e){let e=parseInt(t);if(!isNaN(e))return e}if("float"==e){let e=parseFloat(t);if(!isNaN(e))return e}return null}}return null}("user");null!==t&&(e=t)}e||(e="NoName"),h.user=e}(Q,z),j(),window.addEventListener("load",(function(){!function(){if(document.location.host){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){let t=!1;try{!function(t){if("parameters"in(u=JSON.parse(t))){"string"==typeof u.parameters.dateDelim&&(h.dateDelim=u.parameters.dateDelim),"string"==typeof u.parameters.timeDelim&&(h.timeDelim=u.parameters.timeDelim),"string"==typeof u.parameters.language&&(h.lang=u.parameters.language),"string"==typeof u.parameters.user&&(h.user=u.parameters.user),new RegExp("([mM]+)([dD]+)([yY]+)").test(u.parameters.dateFormat)?h.dateDMY=!1:h.dateDMY=!0}}(this.responseText)}catch(e){console.log("Error: "+e.name+":"+e.message+"\n"+e.stack+"\n"+e.cause),t=!0}if(t)return void I(o[h.lang].errorParsingData);if(m(),!("activities"in u)||0==u.activities.length)return void I(o[h.lang].errorParsingData);0==function(){if(u.project.curTimeInSeconds=u.project.CurTime,u.project.CurTime=s(u.project.CurTime),0==u.activities.length)return I(_texts[h.lang].errorParsingData),-1;for(let t=0;t<u.performance.length;t++){let e=u.performance[t];void 0!==e.Start&&null!==e.Start?(e.StartInSeconds=e.Start,e.Start=s(e.StartInSeconds)):d.StartInSeconds=-1,void 0!==e.Fin&&null!==e.Find?(e.FinInSeconds=e.Fin,e.Fin=s(e.FinInSeconds)):d.FinInSeconds=-1}for(let t=0;t<u.activities.length;t++){if(!("Code"in u.activities[t]))return-1;if(a.ifcProductIdKey in u.activities[t]||(u.activities[t][a.ifcProductIdKey]=u.activities[t].Code),u.activities[t].progress=100,a.workRemainedKey in u.activities[t])if(null===u.activities[t][a.workRemainedKey])u.activities[t].progress=100;else if(0==u.activities[t][a.workRemainedKey])u.activities[t].progress=100;else if(a.workDoneKey in u.activities[t])if(null!==u.activities[t][a.workDoneKey]){let e=u.activities[t][a.workDoneKey]+u.activities[t][a.workRemainedKey];u.activities[t].progress=e>0?parseInt(100*u.activities[t][a.workDoneKey]/e):100}else u.activities[t].progress=0}u.startMinInSeconds=-1,u.finMaxInSeconds=-1,u.startFinSeconds=-1;for(let t=0;t<u.activities.length;t++){let e=u.activities[t];if(void 0!==e.AsapStart&&null!==e.AsapStart?(e.AsapStartInSeconds=e.AsapStart,e.AsapStart=s(e.AsapStartInSeconds),u.startMinInSeconds=T(u.startMinInSeconds,e.AsapStartInSeconds,!1)):e.AsapStartInSeconds=-1,void 0!==e.AsapFin&&null!==e.AsapFin?(e.AsapFinInSeconds=e.AsapFin,e.AsapFin=s(e.AsapFinInSeconds),u.finMaxInSeconds=T(u.finMaxInSeconds,e.AsapFinInSeconds,!0)):e.AsapFinInSeconds=-1,void 0!==e.FactStart&&null!==e.FactStart?(e.FactStartInSeconds=e.FactStart,e.FactStart=s(e.FactStartInSeconds),u.startMinInSeconds=T(u.startMinInSeconds,e.FactStartInSeconds,!1)):e.FactStartInSeconds=-1,void 0!==e.FactFin&&null!==e.FactFin?(e.FactFinInSeconds=e.FactFin,e.FactFin=s(e.FactFinInSeconds),u.finMaxInSeconds=T(u.finMaxInSeconds,e.FactFinInSeconds,!0)):e.FactFinInSeconds=-1,void 0!==e.Start_COMP&&null!==e.Start_COMP?(e.Start_COMPInSeconds=e.Start_COMP,e.Start_COMP=s(e.Start_COMPInSeconds),u.startMinInSeconds=T(u.startMinInSeconds,e.Start_COMPInSeconds,!1)):e.Start_COMPInSeconds=-1,void 0!==e.Fin_COMP&&null!==e.Fin_COMP?(e.Fin_COMPInSeconds=e.Fin_COMP,e.Fin_COMP=s(e.Fin_COMPInSeconds),u.finMaxInSeconds=T(u.finMaxInSeconds,e.Fin_COMPInSeconds,!0)):e.Fin_COMPInSeconds=-1,void 0!==e.AlapStart&&null!==e.AlapStart?(e.AlapStartInSeconds=e.AlapStart,e.AlapStart=s(e.AlapStartInSeconds),u.startMinInSeconds=T(u.startMinInSeconds,e.AlapStartInSeconds,!1)):e.AlapStartInSeconds=-1,void 0!==e.AlapFin&&null!==e.AlapFin?(e.AlapFinInSeconds=e.AlapFin,e.AlapFin=s(e.AlapFinInSeconds),u.finMaxInSeconds=T(u.finMaxInSeconds,e.AlapFinInSeconds,!0)):e.AlapFinInSeconds=-1,void 0!==e.f_LastFin&&null!==e.f_LastFin?e.lastFinInSeconds=e.f_LastFin:e.lastFinInSeconds=e.AsapStartInSeconds,e.FactFin)e.status=100,e.displayStartInSeconds=e.FactStartInSeconds,e.displayFinInSeconds=e.FactFinInSeconds,e.displayRestartInSeconds=null;else if(e.FactStart){let t=e.AsapFinInSeconds-e.AsapStartInSeconds+(e.lastFinInSeconds-e.FactStartInSeconds);e.status=t>0?parseInt(100*(e.lastFinInSeconds-e.FactStartInSeconds)/t-1):50,e.displayStartInSeconds=e.FactStartInSeconds,e.displayFinInSeconds=e.AsapFinInSeconds,e.displayRestartInSeconds=e.AsapStartInSeconds}else e.status=0,e.displayStartInSeconds=e.AsapStartInSeconds,e.displayFinInSeconds=e.AsapFinInSeconds,e.displayRestartInSeconds=null;e.color=c(e.f_ColorCom,a.ganttOperation0Color),e.colorBack=c(e.f_ColorBack,"#ffffff"),e.colorFont=c(e.f_FontColor,a.tableContentStrokeColor),"string"==typeof e.Level&&l(e.Level)&&(e.Level=parseInt(e.Level))}return-1==u.startMinInSeconds||-1==u.finMaxInSeconds?(I(_texts[_lang].errorParsingData),-1):(u.startFinSeconds=u.finMaxInSeconds-u.startMinInSeconds,u.visibleMin=u.startMinInSeconds,u.visibleMax=u.finMaxInSeconds,u.visibleMaxWidth=u.visibleMax-u.visibleMin,0)}()?(!function(){if(void 0===u||!("project"in u))return;document.title=u.project.Name;let t=document.getElementById("projectName");t.innerText=u.project.Name+" ("+u.project.Code+")";let e=document.getElementById("projectTimeAndVersion");if("UploadTime"in u.project){let t=s(u.parameters.uploadTime);t=" / "+o[h.lang].uploadTime+": "+t}if(h.touchDevice)t.setAttribute("style","font-size:18px;"),e.setAttribute("style","display:none");else{let t=u.project.CurTime+" | "+o[h.lang].version+": "+u.project.Version;e.innerText=t}v(),function(){let t;t=document.getElementById("bimDarkBackgroundModeLabel"),t.innerHTML=o[h.lang].darkBackground,t=document.getElementById("bimHideByPickModeLabel"),t.innerHTML=o[h.lang].hideByPick,t=document.getElementById("bimMultipleChoiceModeLabel"),t.innerHTML=o[h.lang].multipleChoice,t=document.getElementById("bimHideByPickReset"),t.innerHTML=o[h.lang].reset}()}(),H()):I(o[h.lang].errorLoadingData)}else I(o[h.lang].errorLoadingData)};let e=a.urlData+decodeURIComponent(window.location.search);t.open("GET",e,!0),t.setRequestHeader("Cache-Control","no-cache"),t.send(),I(o[h.lang].waitDataText)}}()})),window.addEventListener("resize",(function(t){j()}))}]);